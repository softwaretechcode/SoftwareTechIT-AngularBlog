/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x9808=['_model','getRanges','discard','split','head','getItems','reduce','add','toJSON','nodeAfter','getMarkers','getRange','addRange','commentThread','_onDiscard','getMultiRangeId','createdAt','subType','getFirstMarker','onAttributesChange','accept','addMarker','push','get','getFirstRange','onAccept','getContainedElement','next','markers','attributes','decorate','data','author','start','_markerNames','clear','suggestion:','_onAttributesChange','nodeBefore','type','set','onDiscard','map','removeAttribute','isIntersecting','length','_onAccept','isMultiRange','end','hasComments','creator','@external','change','isIntersectingWithRange','isInContent','removeMarker','from','getMarkerNames','authoredAt','setAttribute','previous','removeMarkers'];(function(_0x3cae3e,_0x9808dc){const _0x4ec64f=function(_0x4c17b0){while(--_0x4c17b0){_0x3cae3e['push'](_0x3cae3e['shift']());}};_0x4ec64f(++_0x9808dc);}(_0x9808,0x163));const _0x4ec6=function(_0x3cae3e,_0x9808dc){_0x3cae3e=_0x3cae3e-0x0;let _0x4ec64f=_0x9808[_0x3cae3e];return _0x4ec64f;};import{Element as _0x20afd1}from'ckeditor5/src/engine';import{ObservableMixin as _0x1c9a60,uid as _0x4b2b9d}from'ckeditor5/src/utils';import{cloneDeep as _0x18cef9,isEqual as _0x163eab,set as _0x1c5797,unset as _0x42ca37}from'lodash-es';export default class u extends _0x1c9a60(){constructor(_0x32e0cb,_0xe666){super(),this['id']=_0xe666['id'],this[_0x4ec6('0x38')]=_0xe666[_0x4ec6('0x38')],this[_0x4ec6('0x22')]=_0xe666['subType']||null,this[_0x4ec6('0x31')]=_0xe666[_0x4ec6('0x31')],this[_0x4ec6('0x5')]=_0xe666[_0x4ec6('0x5')]||_0xe666[_0x4ec6('0x31')],this['isExternal']=Boolean(_0xe666['attributes']&&_0xe666[_0x4ec6('0x2e')][_0x4ec6('0x6')]),this[_0x4ec6('0x30')]=null,this[_0x4ec6('0x11')]=_0x32e0cb,this[_0x4ec6('0x1')]=_0xe666[_0x4ec6('0x2a')],this[_0x4ec6('0x1f')]=_0xe666[_0x4ec6('0x3a')],this['_onAttributesChange']=_0xe666[_0x4ec6('0x24')],this['_markerNames']=new Set(),this[_0x4ec6('0x21')]=null,this[_0x4ec6('0x39')](_0x4ec6('0xd'),null),this['set'](_0x4ec6('0x2e'),_0xe666[_0x4ec6('0x2e')]||{}),this['set'](_0x4ec6('0xf'),null),this['set'](_0x4ec6('0x2c'),null),this[_0x4ec6('0x39')](_0x4ec6('0x1e'),null),this[_0x4ec6('0x39')]('_saved',!0x1),this['decorate'](_0x4ec6('0x25')),this[_0x4ec6('0x2f')](_0x4ec6('0x13'));}get[_0x4ec6('0x15')](){let _0x4349c4=this;for(;_0x4349c4[_0x4ec6('0xf')];)_0x4349c4=_0x4349c4[_0x4ec6('0xf')];return _0x4349c4;}get[_0x4ec6('0x4')](){return!!this[_0x4ec6('0x1e')]&&this['commentThread'][_0x4ec6('0x0')]>0x0;}get[_0x4ec6('0x2')](){if(0x0==this[_0x4ec6('0x33')]['size'])return!0x1;return 0x6==Array[_0x4ec6('0xb')](this[_0x4ec6('0x33')])[0x0][_0x4ec6('0x14')](':')['length'];}get[_0x4ec6('0x9')](){return null!==this[_0x4ec6('0x23')]();}['addMarkerName'](_0x197dce){this['_markerNames'][_0x4ec6('0x18')](_0x197dce);}['getMarkerNames'](){return Array[_0x4ec6('0xb')](this[_0x4ec6('0x33')]);}[_0x4ec6('0x1b')](){return this[_0x4ec6('0xc')]()[_0x4ec6('0x3b')](_0x27f148=>this[_0x4ec6('0x11')][_0x4ec6('0x2d')][_0x4ec6('0x28')](_0x27f148))['filter'](_0x46be26=>_0x46be26);}[_0x4ec6('0x23')](){return this[_0x4ec6('0x1b')]()[0x0]||null;}[_0x4ec6('0x10')](){this[_0x4ec6('0x11')]['change'](_0x17d2c3=>{for(const _0x76b15 of this[_0x4ec6('0x1b')]())_0x17d2c3[_0x4ec6('0xa')](_0x76b15);}),this['_markerNames'][_0x4ec6('0x34')]();}[_0x4ec6('0xa')](_0x24707d){this[_0x4ec6('0x11')][_0x4ec6('0x7')](_0x4c5a1a=>{_0x4c5a1a[_0x4ec6('0xa')](_0x24707d);}),this[_0x4ec6('0x33')]['delete'](_0x24707d);}[_0x4ec6('0x1d')](_0x142056){const _0x17ea84=_0x4ec6('0x35')+this[_0x4ec6('0x38')]+':'+this[_0x4ec6('0x22')]+':'+this['id']+':'+this[_0x4ec6('0x5')]['id']+':'+u[_0x4ec6('0x20')]();this['addMarkerName'](_0x17ea84),this[_0x4ec6('0x11')][_0x4ec6('0x7')](_0xd7de07=>{_0xd7de07[_0x4ec6('0x26')](_0x17ea84,{'range':_0x142056,'usingOperation':!0x0,'affectsData':!0x0});});}[_0x4ec6('0x8')](_0x43660c){for(const _0xc51c94 of this[_0x4ec6('0x12')]())if(_0xc51c94[_0x4ec6('0x3d')](_0x43660c))return!0x0;return!0x1;}[_0x4ec6('0x12')](){return this[_0x4ec6('0x1b')]()[_0x4ec6('0x3b')](_0x53412e=>_0x53412e[_0x4ec6('0x1c')]());}[_0x4ec6('0x16')](){return this[_0x4ec6('0x12')]()[_0x4ec6('0x17')]((_0x3fdbac,_0x48058b)=>[..._0x3fdbac,..._0x48058b['getItems']()],[]);}[_0x4ec6('0x29')](){var _0x25247b;return(null===(_0x25247b=this[_0x4ec6('0x23')]())||void 0x0===_0x25247b?void 0x0:_0x25247b[_0x4ec6('0x1c')]())||null;}[_0x4ec6('0x2b')](){const _0x872b8f=this[_0x4ec6('0x12')]();if(0x1!=_0x872b8f[_0x4ec6('0x0')])return null;const _0x5b2052=_0x872b8f[0x0],_0x42205e=_0x5b2052[_0x4ec6('0x32')][_0x4ec6('0x1a')],_0x4a3e22=_0x5b2052[_0x4ec6('0x3')][_0x4ec6('0x37')];return _0x42205e instanceof _0x20afd1?_0x42205e!=_0x4a3e22?null:_0x42205e:null;}[_0x4ec6('0x25')](){this[_0x4ec6('0x1')](this['getRanges'](),this['data'],this['attributes']),this[_0x4ec6('0x10')]();}[_0x4ec6('0x13')](){this['_onDiscard'](this[_0x4ec6('0x12')](),this['data'],this[_0x4ec6('0x2e')]),this[_0x4ec6('0x10')]();}['getAllAdjacentSuggestions'](){const _0x39afee=[];let _0x42c74f=this['head'];for(;_0x42c74f;)_0x39afee[_0x4ec6('0x27')](_0x42c74f),_0x42c74f=_0x42c74f[_0x4ec6('0x2c')];return _0x39afee;}[_0x4ec6('0xe')](_0x300ec6,_0x57e64f){const _0xae42ba=_0x18cef9(this[_0x4ec6('0x2e')]);_0x1c5797(_0xae42ba,_0x300ec6,_0x57e64f),_0x163eab(_0xae42ba,this['attributes'])||(this[_0x4ec6('0x2e')]=_0xae42ba,this['_onAttributesChange'](_0xae42ba));}[_0x4ec6('0x3c')](_0x4b1eb9){const _0x4f54a6=_0x18cef9(this['attributes']);_0x42ca37(_0x4f54a6,_0x4b1eb9),_0x163eab(_0x4f54a6,this[_0x4ec6('0x2e')])||(this[_0x4ec6('0x2e')]=_0x4f54a6,this[_0x4ec6('0x36')](this[_0x4ec6('0x2e')]));}[_0x4ec6('0x19')](){return{'id':this['id'],'type':this[_0x4ec6('0x22')]?this[_0x4ec6('0x38')]+':'+this[_0x4ec6('0x22')]:this['type'],'authorId':this['creator']['id'],'createdAt':this[_0x4ec6('0x21')],'hasComments':this[_0x4ec6('0x4')],'data':this[_0x4ec6('0x30')],'attributes':this['attributes']};}static[_0x4ec6('0x20')](){return _0x4b2b9d()['substr'](0x1,0x5);}}