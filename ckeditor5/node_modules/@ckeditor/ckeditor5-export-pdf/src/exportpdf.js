/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x264deb}from'ckeditor5/src/core';import{ButtonView as _0xdffc9a,View as _0x5c7769,Notification as _0x7f2264}from'ckeditor5/src/ui';import _0x2dc216 from'./exportpdfcommand';import _0x2c036f from'../theme/icons/exportpdf.svg';import'../theme/exportpdf.css';export default class p extends _0x264deb{static get['pluginName'](){return'ExportPdf';}static get['requires'](){return['CloudServices',_0x7f2264];}['init'](){const _0x4c9aee=this['editor'],t=_0x4c9aee['t'],_0x320129=_0x4c9aee['config']['get']('exportPdf')||{};_0x4c9aee['commands']['add']('exportPdf',new _0x2dc216(_0x4c9aee)),_0x4c9aee['ui']['componentFactory']['add']('exportPdf',_0x377b4c=>{const _0x5cbaf7=_0x4c9aee['commands']['get']('exportPdf'),_0x1c8938=new _0xdffc9a(_0x377b4c);_0x1c8938['set']({'label':t('Export\x20to\x20PDF'),'icon':_0x2c036f,'tooltip':!0x0}),_0x1c8938['bind']('isOn','isEnabled')['to'](_0x5cbaf7,'isBusy','isEnabled'),_0x1c8938['extendTemplate']({'attributes':{'class':[_0x1c8938['bindTemplate']['if']('isOn','ck-exportpdf_status-pending')]}});const _0x103a87=new _0x5c7769();return _0x103a87['setTemplate']({'tag':'span','attributes':{'class':['ck','ck-exportpdf__spinner-container']},'children':[{'tag':'span','attributes':{'class':['ck','ck-exportpdf__spinner']}}]}),_0x1c8938['children']['add'](_0x103a87),this['listenTo'](_0x1c8938,'execute',()=>{_0x4c9aee['execute']('exportPdf',_0x320129),_0x4c9aee['editing']['view']['focus']();}),_0x1c8938;});const _0x6fde34=_0x4c9aee['plugins']['get']('CloudServices');!0x1===_0x320129['tokenUrl']?this['_token']=null:_0x320129['tokenUrl']?_0x6fde34['registerTokenUrl'](_0x320129['tokenUrl'])['then'](_0x2d54f3=>{this['_token']=_0x2d54f3;}):this['_token']=_0x6fde34['token'];}}