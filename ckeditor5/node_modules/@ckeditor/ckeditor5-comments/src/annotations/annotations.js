/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x5af9=['change:isVisible','has','refreshPositioning','source','refreshVisibility','createAnnotationView','delete','activate','collection','isVisible','activeAnnotations','createAnnotation','_activateAnnotation','destroy','view','getByInnerView','Annotations','fire','deactivateAll','_addActiveAnnotation','set','_deactivateAllAnnotations','add','remove','_removeActiveAnnotation','element','focusTracker','listenTo','_visibleAnnotations','_bindAnnotationsToVisibleAnnotations'];(function(_0x12f9db,_0x5af9f5){const _0x5219ee=function(_0x3b80cf){while(--_0x3b80cf){_0x12f9db['push'](_0x12f9db['shift']());}};_0x5219ee(++_0x5af9f5);}(_0x5af9,0xb3));const _0x5219=function(_0x12f9db,_0x5af9f5){_0x12f9db=_0x12f9db-0x0;let _0x5219ee=_0x5af9[_0x12f9db];return _0x5219ee;};import{ContextPlugin as _0x25ada4}from'ckeditor5/src/core';import _0x9cfe95 from'./annotation';import _0x3ed50e from'./annotationcollection';import _0x22f3e5 from'./view/annotationview';export default class b extends _0x25ada4{static get['pluginName'](){return _0x5219('0x11');}constructor(_0x2df73){super(_0x2df73),this['collection']=new _0x3ed50e(),this[_0x5219('0x1d')]=new _0x3ed50e(),this[_0x5219('0x15')]('activeAnnotations',new Set()),this[_0x5219('0x0')]();}[_0x5219('0x17')](_0x499b01){this[_0x5219('0x9')][_0x5219('0x17')](_0x499b01);}[_0x5219('0x18')](_0x51e582){this[_0x5219('0x9')][_0x5219('0x18')](_0x51e582),_0x51e582[_0x5219('0xe')]();}[_0x5219('0x5')](){for(const _0x19f1cb of this[_0x5219('0x9')])_0x19f1cb['refreshVisibility']();}[_0x5219('0x3')](){this['_visibleAnnotations'][_0x5219('0x3')]();}[_0x5219('0x10')](_0x5a0987){return this[_0x5219('0x9')][_0x5219('0x10')](_0x5a0987);}[_0x5219('0x13')](){this[_0x5219('0x12')](_0x5219('0x16'));}[_0x5219('0xe')](){for(const _0x3ec537 of this[_0x5219('0x9')])_0x3ec537[_0x5219('0xe')]();this['_visibleAnnotations'][_0x5219('0xe')](),this['collection'][_0x5219('0xe')](),super[_0x5219('0xe')]();}[_0x5219('0x8')](_0x24d0dd){this[_0x5219('0x12')](_0x5219('0xd'),_0x24d0dd);}[_0x5219('0xc')](_0x18e8ff){return new _0x9cfe95(_0x18e8ff);}[_0x5219('0x6')](_0x1cdc1d,_0x47073c){return new _0x22f3e5(_0x1cdc1d,_0x47073c);}[_0x5219('0x14')](_0x1b3f05){const _0xb9cf19=new Set(this[_0x5219('0xb')]);_0xb9cf19[_0x5219('0x17')](_0x1b3f05),this[_0x5219('0xb')]=_0xb9cf19;}[_0x5219('0x19')](_0x516289){const _0x71394f=new Set(this[_0x5219('0xb')]);_0x71394f[_0x5219('0x7')](_0x516289),this['activeAnnotations']=_0x71394f;}[_0x5219('0x0')](){const _0x535ddf=this[_0x5219('0x9')],_0x36582a=this[_0x5219('0x1d')];function _0x3a657e(_0x3b4f65){const _0x17f4df=_0x3b4f65[_0x5219('0x4')];_0x17f4df['isVisible']&&!_0x36582a['has'](_0x17f4df)?_0x36582a['add'](_0x17f4df):!_0x17f4df['isVisible']&&_0x36582a[_0x5219('0x2')](_0x17f4df)&&_0x36582a[_0x5219('0x18')](_0x17f4df),_0x17f4df[_0x5219('0xf')][_0x5219('0x1b')][_0x5219('0x18')](_0x17f4df[_0x5219('0xf')][_0x5219('0x1a')]),_0x17f4df[_0x5219('0xf')][_0x5219('0x1b')][_0x5219('0x17')](_0x17f4df[_0x5219('0xf')]['element']);}this[_0x5219('0x1c')](_0x535ddf,_0x5219('0x17'),(_0x3ae8c9,_0x571df8)=>{_0x571df8[_0x5219('0xa')]&&_0x36582a[_0x5219('0x17')](_0x571df8),this[_0x5219('0x1c')](_0x571df8,_0x5219('0x1'),_0x3a657e);}),this[_0x5219('0x1c')](_0x535ddf,_0x5219('0x18'),(_0x42a2ae,_0x4577b9)=>{_0x36582a[_0x5219('0x2')](_0x4577b9)&&_0x36582a[_0x5219('0x18')](_0x4577b9),this['stopListening'](_0x4577b9,_0x5219('0x1'),_0x3a657e);});}}