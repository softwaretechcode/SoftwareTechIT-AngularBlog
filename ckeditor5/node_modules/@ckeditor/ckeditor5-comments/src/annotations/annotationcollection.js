/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x3fe3=['from','getByView','view','getByInnerView','annotationcollection-duplicated-item','_innerViewToAnnotation','isFocused','focusTracker','stopListening','add','annotationcollection-not-existing-item','fire','focus','_sort','targetRect','change:isFocused','clear','remove','has','delete','destroy','set','length','focusableElements','get','_viewToAnnotation','_getOrderInContent','listenTo','getIndex','updateTargetRect','_focusTracker','innerView','left','top','sort'];(function(_0x77fc86,_0x3fe357){const _0x575ee8=function(_0x9ac481){while(--_0x9ac481){_0x77fc86['push'](_0x77fc86['shift']());}};_0x575ee8(++_0x3fe357);}(_0x3fe3,0x83));const _0x575e=function(_0x77fc86,_0x3fe357){_0x77fc86=_0x77fc86-0x0;let _0x575ee8=_0x3fe3[_0x77fc86];return _0x575ee8;};import{CKEditorError as _0x413dc6,Collection as _0x20da9a,FocusTracker as _0x242223}from'ckeditor5/src/utils';export default class x extends _0x20da9a{constructor(_0x1a6264=[]){super(),this[_0x575e('0xe')]=new Map(),this['_viewToAnnotation']=new Map(),this['_focusTracker']=new _0x242223(),this['_focusTracker']['on'](_0x575e('0x18'),(_0x5c57d5,_0x7c5cbc,_0x3452d9)=>{_0x3452d9||this[_0x575e('0x14')]('blur');});for(const _0x5dce02 of _0x1a6264)this['add'](_0x5dce02);}get[_0x575e('0xf')](){return this['_focusTracker']['isFocused'];}['add'](_0xe4aecb){if(this[_0x575e('0x1b')](_0xe4aecb))throw new _0x413dc6(_0x575e('0xd'),null);this[_0x575e('0xe')][_0x575e('0x1e')](_0xe4aecb[_0x575e('0x5')],_0xe4aecb),this['_viewToAnnotation']['set'](_0xe4aecb['view'],_0xe4aecb);for(const _0xb53497 of _0xe4aecb[_0x575e('0x20')])this[_0x575e('0x4')][_0x575e('0x12')](_0xb53497);this[_0x575e('0x1')](_0xe4aecb[_0x575e('0x20')],_0x575e('0x12'),(_0x5350cc,_0x3673c6)=>{this[_0x575e('0x4')][_0x575e('0x12')](_0x3673c6);}),this[_0x575e('0x1')](_0xe4aecb[_0x575e('0x20')],_0x575e('0x1a'),(_0x2e1c44,_0x52f966)=>{this[_0x575e('0x4')][_0x575e('0x1a')](_0x52f966);}),this[_0x575e('0x1')](_0xe4aecb['view'][_0x575e('0x10')],'change:isFocused',(_0x5a2026,_0x2c516b,_0xbb8256)=>{_0xbb8256&&this[_0x575e('0x14')](_0x575e('0x15'),_0xe4aecb);}),_0xe4aecb['updateTargetRect']();const _0x5a089a=this[_0x575e('0x0')](_0xe4aecb[_0x575e('0xb')]['targetRect']);return super['add'](_0xe4aecb,_0x5a089a);}['remove'](_0x3893c5){if(!this[_0x575e('0x1b')](_0x3893c5))throw new _0x413dc6(_0x575e('0x13'),null);this[_0x575e('0x11')](_0x3893c5['view']['focusTracker']),this[_0x575e('0x11')](_0x3893c5[_0x575e('0x20')]);for(const _0x414460 of _0x3893c5['focusableElements'])this[_0x575e('0x4')][_0x575e('0x1a')](_0x414460);return this[_0x575e('0x22')][_0x575e('0x1c')](_0x3893c5[_0x575e('0xb')]),this['_innerViewToAnnotation']['delete'](_0x3893c5['innerView']),super[_0x575e('0x1a')](_0x3893c5);}[_0x575e('0xc')](_0xd8007b){return this[_0x575e('0xe')][_0x575e('0x21')](_0xd8007b);}[_0x575e('0xa')](_0x1ea035){return this[_0x575e('0x22')][_0x575e('0x21')](_0x1ea035);}['destroy'](){super['clear'](),this[_0x575e('0x11')](),this[_0x575e('0xe')][_0x575e('0x19')](),this[_0x575e('0x22')][_0x575e('0x19')](),this[_0x575e('0x4')][_0x575e('0x1d')]();}['refreshPositioning'](){for(const _0x431bf0 of this)_0x431bf0[_0x575e('0x3')]();this['_sort']();}[_0x575e('0x16')](){const _0x2f83c0=Array[_0x575e('0x9')](this)[_0x575e('0x8')]((_0x20e222,_0x519771)=>v(_0x20e222[_0x575e('0xb')][_0x575e('0x17')],_0x519771[_0x575e('0xb')][_0x575e('0x17')]));for(let _0x257fb7=_0x2f83c0[_0x575e('0x1f')]-0x1;_0x257fb7>0x0;_0x257fb7--){const _0x2a36e5=_0x2f83c0[_0x257fb7];_0x257fb7!==this[_0x575e('0x2')](_0x2a36e5)&&(this[_0x575e('0x1a')](_0x2a36e5),this[_0x575e('0x12')](_0x2a36e5));}}[_0x575e('0x0')](_0x1efea3){let _0x57453b=0x0;if(!_0x1efea3)return this[_0x575e('0x1f')];for(const _0x5f54d0 of this){const _0xaed341=_0x5f54d0[_0x575e('0xb')][_0x575e('0x17')];if(_0xaed341){if(v(_0x1efea3,_0xaed341)<0x0)return _0x57453b;_0x57453b++;}}return _0x57453b;}}export function bindAnnotationCollections({source:_0x437e47,target:_0x1601bf,filter:_0x182738}){for(const _0x370d19 of _0x437e47)_0x182738(_0x370d19)&&_0x1601bf[_0x575e('0x12')](_0x370d19);_0x1601bf[_0x575e('0x1')](_0x437e47,_0x575e('0x12'),(_0x4ea21b,_0x22c5cd)=>{_0x182738(_0x22c5cd)&&_0x1601bf[_0x575e('0x12')](_0x22c5cd);}),_0x1601bf[_0x575e('0x1')](_0x437e47,_0x575e('0x1a'),(_0x568a1f,_0x3c13d5)=>{_0x1601bf[_0x575e('0x1b')](_0x3c13d5)&&_0x1601bf[_0x575e('0x1a')](_0x3c13d5);});}function v(_0x3301f9,_0x24ee94){if(null===_0x3301f9&&null===_0x24ee94)return 0x0;if(null===_0x3301f9)return-0x1;if(null===_0x24ee94)return 0x1;const _0xb609a5=_0x3301f9[_0x575e('0x7')]-_0x24ee94['top'];return 0x0==_0xb609a5?_0x3301f9[_0x575e('0x6')]-_0x24ee94['left']:_0xb609a5;}