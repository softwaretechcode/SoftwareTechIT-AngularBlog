/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x10b0=['remove','from','stop','detach','ready','WideSidebar','add','annotations','activeAnnotation','addEventListener','EditorAnnotations','get','set','refreshPositioning','addAnnotation','attach','stopListening','has','setActiveAnnotation','pluginName','destroy','_annotations','uiUpdate','set:container','updateTargetRect','register','cancel','ck-sidebar--wide','isAttached','refresh','_refreshPositioningDebounced','wideSidebar','change:container','listenTo','_destroyEditorAnnotationsIntegration','plugins','context','editors','container','widesidebar-attach-already-attached','resize','_integrateWithEditorAnnotations','rearrange','_activeAnnotation','_editorAnnotations','high','focus','blur'];(function(_0x56c9c5,_0x10b0f0){const _0x918895=function(_0x128ddc){while(--_0x128ddc){_0x56c9c5['push'](_0x56c9c5['shift']());}};_0x918895(++_0x10b0f0);}(_0x10b0,0x1d0));const _0x9188=function(_0x56c9c5,_0x10b0f0){_0x56c9c5=_0x56c9c5-0x0;let _0x918895=_0x10b0[_0x56c9c5];return _0x918895;};import{ContextPlugin as _0x1bb172,Context as _0x369c18}from'ckeditor5/src/core';import _0x364217 from'./annotationsuis';import _0x43267f from'./sidebar';import{CKEditorError as _0x19fbbc,Collection as _0x3834c7}from'ckeditor5/src/utils';import{debounce as _0x379b69}from'lodash-es';import _0x160b49 from'./editorannotations';export default class i extends _0x1bb172{static get['requires'](){return[_0x43267f,_0x364217];}static get[_0x9188('0x23')](){return _0x9188('0x15');}constructor(_0x212daf){super(_0x212daf),this[_0x9188('0x2c')]=!0x1,this[_0x9188('0x1c')](_0x9188('0x18'),null),this[_0x9188('0x17')]=null,this[_0x9188('0xc')]=new _0x3834c7(),this[_0x9188('0x2e')]=_0x379b69(()=>{this[_0x9188('0x17')][_0x9188('0x1d')]();},0xfa,{'leading':!0x1});}['init'](){const _0x12210c=this[_0x9188('0x4')][_0x9188('0x3')][_0x9188('0x1b')](_0x364217),_0x501735=this[_0x9188('0x4')]['plugins'][_0x9188('0x1b')](_0x43267f);_0x12210c[_0x9188('0x29')](_0x9188('0x2f'),this),_0x501735[_0x9188('0x6')]&&_0x12210c['switchTo'](_0x9188('0x2f'));}['setActiveAnnotation'](_0x3571b6){if(_0x3571b6===this[_0x9188('0x18')])return;const _0x5d82eb=this[_0x9188('0x4')]['plugins'][_0x9188('0x1b')](_0x43267f);_0x5d82eb[_0x9188('0xb')]=_0x3571b6;const _0x48c0eb=this[_0x9188('0x18')];this['activeAnnotation']=_0x3571b6,_0x5d82eb[_0x9188('0x2d')]({'blurredAnnotation':_0x48c0eb,'activatedAnnotation':this[_0x9188('0x18')]});}[_0x9188('0x1f')](_0x21f3da){this['annotations']=_0x21f3da;const _0x124ff6=this['context'][_0x9188('0x3')][_0x9188('0x1b')](_0x43267f);if(_0x124ff6[_0x9188('0x25')]=_0x21f3da,this[_0x9188('0x2c')])throw new _0x19fbbc(_0x9188('0x7'),this);this[_0x9188('0x2c')]=!0x0,this[_0x9188('0x1')](_0x124ff6,_0x9188('0x27'),()=>{this[_0x9188('0x13')](),this[_0x9188('0x1')](_0x124ff6,_0x9188('0x0'),_0x2781ab=>{_0x2781ab['off'](),this[_0x9188('0x1f')](_0x21f3da);});}),_0x124ff6['_attachToContainer']({'viewClass':_0x9188('0x2b')});const _0x1a60ce=_0x62558a=>{_0x62558a[_0x9188('0x28')](),_0x124ff6[_0x9188('0x1e')](_0x62558a);};for(const _0x3461d5 of _0x21f3da)_0x1a60ce(_0x3461d5);this[_0x9188('0x1')](_0x21f3da,_0x9188('0x16'),(_0x56d488,_0x11c127)=>{_0x1a60ce(_0x11c127);}),this[_0x9188('0x1')](_0x21f3da,_0x9188('0x10'),(_0x32cb58,_0x36c53d,_0x5afd6a)=>{_0x124ff6[_0x9188('0xa')]({'removedAnnotation':_0x36c53d,'previousAnnotation':_0x21f3da['get'](_0x5afd6a-0x1),'nextAnnotation':_0x21f3da['get'](_0x5afd6a+0x1)}),_0x36c53d===this[_0x9188('0x18')]&&this[_0x9188('0x22')](null);},{'priority':_0x9188('0xd')}),this[_0x9188('0x1')](_0x21f3da,_0x9188('0xe'),(_0x11bc9f,_0x36ab4c)=>{this['setActiveAnnotation'](_0x36ab4c);}),this[_0x9188('0x1')](_0x21f3da,_0x9188('0xf'),()=>{this[_0x9188('0x22')](null);});const _0x5ed7df=this[_0x9188('0x4')]instanceof _0x369c18?this[_0x9188('0x4')][_0x9188('0x5')]:new _0x3834c7([this[_0x9188('0x4')]]);for(const _0x11a80a of _0x5ed7df)this[_0x9188('0x9')](_0x11a80a);this[_0x9188('0x1')](_0x5ed7df,_0x9188('0x16'),(_0xa51fe4,_0x5e0005)=>{this['listenTo'](_0x5e0005,_0x9188('0x14'),()=>{this[_0x9188('0x9')](_0x5e0005);});}),this['listenTo'](_0x5ed7df,'remove',(_0x1c672d,_0x440783)=>{_0x440783[_0x9188('0x3')][_0x9188('0x21')](_0x9188('0x1a'))&&this[_0x9188('0x2')](_0x440783['plugins']['get'](_0x9188('0x1a')));}),window[_0x9188('0x19')](_0x9188('0x8'),this['_refreshPositioningDebounced']),this['annotations']['refreshPositioning']();}[_0x9188('0x13')](){if(!this[_0x9188('0x2c')])throw new _0x19fbbc('widesidebar-detach-not-attached',this);this[_0x9188('0x22')](null);const _0x38ca72=this[_0x9188('0x4')]['plugins'][_0x9188('0x1b')](_0x43267f);_0x38ca72['_detachFromContainer'](this[_0x9188('0x17')]),this[_0x9188('0x20')](_0x38ca72),this[_0x9188('0x20')](this[_0x9188('0x17')]),this[_0x9188('0x4')]instanceof _0x369c18&&this[_0x9188('0x20')](this['context'][_0x9188('0x5')]);for(const _0x340786 of Array[_0x9188('0x11')](this[_0x9188('0xc')]))this[_0x9188('0x2')](_0x340786);window['removeEventListener'](_0x9188('0x8'),this['_refreshPositioningDebounced']),this['_refreshPositioningDebounced'][_0x9188('0x2a')](),this['activeAnnotation']=null,this[_0x9188('0x2c')]=!0x1,this[_0x9188('0x17')]=null;}[_0x9188('0x24')](){this[_0x9188('0x2c')]&&this[_0x9188('0x13')]();}['_integrateWithEditorAnnotations'](_0x4aa962){const _0x463b64=_0x4aa962[_0x9188('0x3')][_0x9188('0x1b')](_0x160b49);if(!_0x463b64)return;const _0x3b0202=()=>{const _0x4199d0=_0x463b64['getOrderedSelectedAnnotations']({'annotations':this[_0x9188('0x17')],'activeAnnotation':this[_0x9188('0x18')]});this['setActiveAnnotation'](_0x4199d0[0x0]||null);};this[_0x9188('0x1')](_0x463b64,'refresh',_0x3b0202),this['listenTo'](_0x463b64,_0x9188('0xf'),(_0x529bd7,{isAnnotationTracked:_0x3fff23})=>{this[_0x9188('0x18')]&&_0x3fff23(this['activeAnnotation'])&&this['setActiveAnnotation'](null);}),this[_0x9188('0x1')](_0x463b64,_0x9188('0x26'),()=>{this['_refreshPositioningDebounced']();}),this['listenTo'](this['annotations'],_0x9188('0xf'),_0x330a16=>{_0x463b64['hasDomSelection']()&&(_0x3b0202(),_0x330a16[_0x9188('0x12')]());},{'priority':_0x9188('0xd')}),this[_0x9188('0xc')][_0x9188('0x16')](_0x463b64);}[_0x9188('0x2')](_0x810b2c){this[_0x9188('0x20')](_0x810b2c),this[_0x9188('0xc')][_0x9188('0x10')](_0x810b2c);}}