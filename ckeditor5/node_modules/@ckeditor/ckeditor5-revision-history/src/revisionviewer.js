/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x54f6=['stop','split','insert','diff','writer','_setDistance','createPositionFromPath','end','revision-suggestion:','top','revisionHistoryAttachChange','createUIElement','upcast','keys','_markSuggestions','toViewRange','hasClass','changes','name','then','getAttributes','adapter','repository','_setChanges','listenTo','observeMarkers','isReady','getRevisionRootsAttributes','consumable','numberOfChanges','elementToAttribute','_threeWayMerge','getRoot','showStack','deletions','item','enableReadOnlyMode','isObject','has','isIncorrect','markerToData','WidgetToolbarRepository','data-change-id','uiElement','nodeAfter','splice','isRemoved','editing','model','bottom','_cleanUp','_fixObsoleteTags','_update','removeMarker:revision-suggestion','editor','revision-suggestion','first','concat','document','modelRange','removeClass','elementEnd','oldRevisionId','_changeIdToChange','isCollapsed','endIndex','pop','destroy','abs','toViewPosition','getRootNames','getIndex','isBlock','ck-suggestion-marker-split','revision-end','viewItem','roots','mousedown','revision:','forward','isOnRoot','markers','removeAttribute','parent','for','marked','change:activeView','isBefore','config','index','_changeView','ck-suggestion-marker-merge','slice','getWalker','data-revision-','locale','addMarker:revision-suggestion:insertion','bind','_getRevisionsRange','detachRoot','includes','POSITIVE_INFINITY','getAttribute','revision-viewer','mapViewToDom','_removeUnsupportedChanges','changeId','isAtStart','data','refresh','activeView','span','_activeViewTarget','isAdded','useFillerType','-new','addMarker:revision','code','restoreRevisionCallback','vid','mapper','_joinTapes','sort','text','type','_makeModelFromViewString','ck-revision-history-root-','userId','isAttached','length','add','compare','_sortAndFilterDiffChanges','commands','affectsData','_step','toModel','indexOf','left','side','unbindElementFromMarkerName','markerName','getItems','isLimit','enqueueChange','bindElementToMarker','isSuggestion','_getChangeFromId','error','isEnabled','push','isEqual','dataToMarker','done','ck-suggestion-marker-','level','resolve','range','isRemoveSuggestion','diffData','ck-suggestion-preview-marker','attachChange','insertion','startsWith','forEach','_markMismatchedRemovedTags','ck-suggestion-marker--active','change:isEnabled','element:pre','change:isReady','view','createRangeIn','pluginName','shift','attributes','showNextChange','_getDiff','high','ck-revision-history-root-add','setAttribute','deletion','vid_start','updatePosition','low','element','wrap','showPreviousChange','_removeMissingPairs','isAddSuggestion','change:activeChange','ck-suggestion-preview-marker-','all','elementStart','isAfter','getDomRoot','return','suggestion','pairId','consume','downcastDispatcher','reconvertMarker','_setConversion','newRevisionId','unshift','processor','comment','_makeTape','attributesAfter','get','start','markerNameToElements','backward','getRevisionData','_initInteractions','change:numberOfChanges','highest','ck-suggestion-marker','_refreshStartEndIndex','markerRange','_appendChild','revisionHistoryLabel','flat','default','nextSibling','rootName','_findChangeIdFromDomTarget','filter','right','attribute:vid','activeChange','addRoot','getCustomProperty','from','_makeModelFromTape','_revisions','next','collaboration.channelId','getChild','object','_markInsertions','plugins','startIndex','schema','conversion','remove','ck-revision-history-root--active','softBreak','_processTape','_getViewForChange','insertions','revision','toViewElement','checkAttribute','getRevision','domEvent','markersStart','set','markerToHighlight','init','createAttributeElement','createPositionBefore','hasAttribute','findIndex','editingDowncast','isContent','map','children','test','merge','distance','selection','target','isAtEnd','delete','addRevisionData','RevisionsRepository','vid_end','domConverter','dataDowncast','isNavigationMode','markersEnd','ck-revision-history-root-remove','addMarker:revision-suggestion:deletion','_cleanMarkers','ck-editor__editable__overlay','_markMarkers','_balloon','_removeRevisionMarkers','createRange','execute','string','loadRevisionData','getClientRects','_getViewObj','previousPosition','addHighlight','change','addClass'];(function(_0x30ae01,_0x54f6e4){const _0x5d83f5=function(_0x3a43e2){while(--_0x3a43e2){_0x30ae01['push'](_0x30ae01['shift']());}};_0x5d83f5(++_0x54f6e4);}(_0x54f6,0x130));const _0x5d83=function(_0x30ae01,_0x54f6e4){_0x30ae01=_0x30ae01-0x0;let _0x5d83f5=_0x54f6[_0x30ae01];return _0x5d83f5;};import{Plugin as _0x13299e,Command as _0x1008a0}from'ckeditor5/src/core';import{scrollViewportToShowTarget as _0x2046aa}from'ckeditor5/src/utils';import{ContextualBalloon as _0x21638b}from'ckeditor5/src/ui';import{DocumentFragment as _0x5089c8,Element as _0x3052f3,Text as _0x562b4d,ViewDocumentFragment as _0x453b50,ViewText as _0x5b1f5d,ViewElement as _0x539cb4,ViewContainerElement as _0x344279,ViewAttributeElement as _0xd08c88,ViewEmptyElement as _0x4d839c,ViewRawElement as _0x15cf6a,ViewUIElement as _0x51b3d8}from'ckeditor5/src/engine';import{Users as _0x8c396f,getMarkerDomElement as _0xa03dff}from'ckeditor5-collaboration/src/collaboration-core';import _0xe84d61 from'./ui/revisionviewer/changedetailsview';import _0x3f36ed from'./revisionsrepository';import _0x5b860c from'./changeitem';import{default as _0x36cd4c}from'./revisiondiff';import'../theme/revisionviewer.css';import{cloneDeep as _0x2a4d62}from'lodash-es';const tt={'c':_0x344279,'a':_0xd08c88,'e':_0x4d839c,'r':_0x15cf6a,'u':_0x51b3d8};export default class d extends _0x13299e{static get[_0x5d83('0xa6')](){return'RevisionViewer';}static get['requires'](){return[_0x8c396f,_0x21638b,_0x3f36ed];}constructor(_0x2e6abd){super(_0x2e6abd),this[_0x5d83('0x10')]=this[_0x5d83('0x30')]['plugins'][_0x5d83('0xca')](_0x5d83('0x10d')),this[_0x5d83('0xfa')]('activeChange',null),this['set']('activeView',null),this[_0x5d83('0x6a')]=null,this[_0x5d83('0xfa')]('diff',null),this[_0x5d83('0xfa')](_0x5d83('0x14'),!0x1),this['set'](_0x5d83('0x8f'),!0x0),this['on'](_0x5d83('0xa1'),(_0x52e816,_0x36a583,_0x4d4f99)=>{this[_0x5d83('0xdf')]=null,this['activeView']=null,this[_0x5d83('0x30')]['editing'][_0x5d83('0xa4')]['change'](_0x5298d2=>{for(const _0x50bda3 of this[_0x5d83('0x30')][_0x5d83('0x29')]['view'][_0x5d83('0x34')][_0x5d83('0x46')])_0x4d4f99?_0x5298d2[_0x5d83('0x36')](_0x5d83('0x116'),_0x50bda3):_0x5298d2[_0x5d83('0x123')](_0x5d83('0x116'),_0x50bda3);});}),this[_0x5d83('0x5b')](_0x5d83('0x111'))['to'](this,_0x5d83('0xdf'),_0x15d3df=>null!==_0x15d3df),this[_0x5d83('0x5b')]('currentChangeNumber')['to'](this,_0x5d83('0x14'),this,'diff',this,_0x5d83('0xdf'),(_0x3cb029,_0x53e846,_0x3ba155)=>_0x3cb029&&_0x3ba155?_0x53e846[_0x5d83('0xb')][_0x5d83('0x41')](_0x3ba155):0x0),this['bind'](_0x5d83('0x17'))['to'](this,'isReady',this,_0x5d83('0x127'),(_0x3968fe,_0x2536f)=>_0x3968fe?_0x2536f[_0x5d83('0xb')][_0x5d83('0x7b')]:0x0),this['_changeView']=null,this['_changeIdToChange']=new Map(),this[_0x5d83('0xf')]=null,this[_0x5d83('0x118')]=this[_0x5d83('0x30')][_0x5d83('0xea')]['get'](_0x21638b);}[_0x5d83('0xfc')](){const _0x122d41=this['editor'],_0x4ec486=new ShowChangeCommand(_0x122d41,{'direction':_0x5d83('0xcd')}),_0x307833=new ShowChangeCommand(_0x122d41,{'direction':_0x5d83('0x49')});(_0x122d41[_0x5d83('0x7f')][_0x5d83('0x7c')](_0x5d83('0xb4'),_0x4ec486),_0x122d41[_0x5d83('0x7f')][_0x5d83('0x7c')](_0x5d83('0xa9'),_0x307833),_0x122d41[_0x5d83('0x7f')][_0x5d83('0x7c')]('restoreRevision',new RestoreRevisionCommand(_0x122d41)),this['on'](_0x5d83('0xd0'),()=>{_0x4ec486[_0x5d83('0x67')](),_0x307833['refresh']();}),this[_0x5d83('0xc3')](),this[_0x5d83('0xcf')](),_0x122d41[_0x5d83('0x1e')]('revision-viewer'),_0x122d41['plugins']['has'](_0x5d83('0x23')))&&_0x122d41[_0x5d83('0xea')]['get']('WidgetToolbarRepository')['forceDisabled'](_0x5d83('0x61'));}async[_0x5d83('0xce')](_0xcfbc11){await this['loadRevisionData'](_0xcfbc11);const _0x173e06={};for(const _0x376b01 in _0xcfbc11['diffData']){if(_0xcfbc11[_0x5d83('0x99')][_0x376b01]['attachChange']&&!_0xcfbc11['diffData'][_0x376b01][_0x5d83('0x9b')]['isAttached'])continue;const _0x4c2e97=this[_0x5d83('0x119')](JSON['parse'](_0xcfbc11['diffData'][_0x376b01][_0x5d83('0xf3')])),_0x56770e=this[_0x5d83('0x30')]['editing'][_0x5d83('0xa4')]['document'],_0x516fe3=new _0x453b50(_0x56770e,_0x4c2e97[_0x5d83('0x103')](_0x620242=>this[_0x5d83('0x11f')](_0x620242)));this[_0x5d83('0x30')][_0x5d83('0x66')][_0x5d83('0xc6')][_0x5d83('0x6c')](_0x5d83('0x4f')),_0x173e06[_0x376b01]=this[_0x5d83('0x30')][_0x5d83('0x66')]['processor']['toData'](_0x516fe3),this['editor'][_0x5d83('0x66')][_0x5d83('0xc6')][_0x5d83('0x6c')](_0x5d83('0xd8'));}return _0x173e06;}async[_0x5d83('0x15')](_0x4da384){await this[_0x5d83('0x11d')](_0x4da384);const _0x2c89a0={};for(const _0x5618bf in _0x4da384[_0x5d83('0x99')])_0x4da384[_0x5d83('0x99')][_0x5618bf]['attachChange']&&!_0x4da384[_0x5d83('0x99')][_0x5618bf]['attachChange'][_0x5d83('0x7a')]||(_0x2c89a0[_0x5618bf]=_0x4da384[_0x5d83('0x99')][_0x5618bf][_0x5d83('0xc9')]||{});return _0x2c89a0;}[_0x5d83('0x119')](_0x3998b6){return(_0x3998b6=_0x3998b6['filter'](_0x16536d=>!_0x16536d['name']||'revision-start'!==_0x16536d['name']&&_0x5d83('0x44')!==_0x16536d[_0x5d83('0xc')]))[_0x5d83('0x9e')](_0x11a06c=>{_0x5d83('0x11c')!=typeof _0x11a06c&&(_0x11a06c['children']=this[_0x5d83('0x119')](_0x11a06c['children']),_0x11a06c[_0x5d83('0xa8')]=_0x11a06c[_0x5d83('0xa8')][_0x5d83('0xdc')](_0x5186be=>!_0x5186be[0x0][_0x5d83('0x9d')](_0x5d83('0x58'))));}),_0x3998b6;}async[_0x5d83('0x7d')](_0x29f94d,_0x45a6d9,_0x51c881=!0x1){if(!this[_0x5d83('0x8f')])return;const _0x24406e=this[_0x5d83('0x127')],_0x3e3ee5=this[_0x5d83('0x10')],_0x4c8817=_0x5d83('0x11c')==typeof _0x29f94d?_0x3e3ee5[_0x5d83('0xf7')](_0x29f94d):_0x29f94d,_0x168da9=_0x5d83('0x11c')==typeof _0x45a6d9?_0x3e3ee5[_0x5d83('0xf7')](_0x45a6d9):_0x45a6d9,_0x412227=_0x4c8817['id'],_0x16d38b=_0x168da9?_0x168da9['id']:null;if(!_0x51c881&&this[_0x5d83('0x127')]&&this[_0x5d83('0x127')][_0x5d83('0xc4')]===_0x412227&&this['diff'][_0x5d83('0x38')]===_0x16d38b)return Promise[_0x5d83('0x96')]();this['isReady']=!0x1,this[_0x5d83('0x68')]=null,this[_0x5d83('0xdf')]=null,this['diff']=new _0x36cd4c(_0x412227,_0x16d38b);const _0x355c75=this[_0x5d83('0x5c')](_0x4c8817,_0x168da9,!0x0)[_0x5d83('0x103')](_0x25411e=>this[_0x5d83('0x11d')](_0x25411e));return _0x355c75[_0x5d83('0x90')](new Promise(_0x331385=>{setTimeout(_0x331385,0x14);})),Promise[_0x5d83('0xb9')](_0x355c75)[_0x5d83('0xd')](()=>{if(!this[_0x5d83('0x8f')])return;this[_0x5d83('0x2c')]();const _0x18260b=this[_0x5d83('0xaa')](_0x412227,_0x16d38b);for(const _0x4f8989 of _0x18260b['changes'])this[_0x5d83('0x39')]['set'](_0x4f8989['id'],_0x4f8989);this[_0x5d83('0x30')]['model'][_0x5d83('0x8a')]({'isUndoable':!0x1},_0x5944b5=>{for(const _0x114c4e of this[_0x5d83('0x30')]['model'][_0x5d83('0x34')][_0x5d83('0x40')]())_0x5944b5[_0x5d83('0x5d')](_0x114c4e);for(const _0x12ae74 of Object['keys'](_0x18260b['model'])){const _0x2c740b=_0x5944b5[_0x5d83('0xe0')](_0x12ae74);for(const _0x36a560 of Object[_0x5d83('0x7')](_0x18260b[_0x5d83('0xa8')][_0x12ae74]))_0x5944b5[_0x5d83('0xad')](_0x36a560,_0x18260b[_0x5d83('0xa8')][_0x12ae74][_0x36a560],_0x2c740b);_0x5944b5[_0x5d83('0x126')](_0x18260b[_0x5d83('0x2a')][_0x12ae74],_0x2c740b,0x0);}}),this['diff'][_0x5d83('0x11')](this[_0x5d83('0x7e')](_0x18260b[_0x5d83('0xb')])),this['isReady']=!0x0;})['catch'](_0x4f067b=>{console[_0x5d83('0x8e')](_0x4f067b),this[_0x5d83('0x2c')](),_0x24406e&&(this[_0x5d83('0x127')]=_0x24406e),this[_0x5d83('0x14')]=!0x0;});}[_0x5d83('0x10c')](_0xa089be,_0x605fa8){const _0x7ca8ee=this['repository']['createRevision'](_0xa089be);return _0x7ca8ee['on']('_update',(_0x3c0f54,_0x493020,_0x2ddf69)=>_0x605fa8(_0x493020,_0x2ddf69,_0x7ca8ee)),this[_0x5d83('0x10')]['addRevision'](_0x7ca8ee),_0x7ca8ee;}[_0x5d83('0x11d')](_0x4b60ad){if(!_0x4b60ad||_0x4b60ad[_0x5d83('0x99')])return Promise[_0x5d83('0x96')]();{const _0x50970a=this[_0x5d83('0x30')]['config'][_0x5d83('0xca')](_0x5d83('0xe6'));return this[_0x5d83('0xf')]['getRevision']({'channelId':_0x50970a,'revisionId':_0x4b60ad['id']})[_0x5d83('0xd')](_0xe41ddf=>{_0x4b60ad[_0x5d83('0x2e')]({'diffData':_0xe41ddf[_0x5d83('0x99')]},!0x0);});}}[_0x5d83('0x2c')](){this[_0x5d83('0xdf')]=null,this[_0x5d83('0x115')](),this['_changeView']&&this['_changeView'][_0x5d83('0x3d')](),this[_0x5d83('0x54')]=null,this[_0x5d83('0x39')]['clear'](),this['editor']['model'][_0x5d83('0x8a')]({'isUndoable':!0x1},_0x8b0ef=>{for(const _0x956f2f of this[_0x5d83('0x30')][_0x5d83('0x2a')][_0x5d83('0x34')][_0x5d83('0x40')]())_0x8b0ef[_0x5d83('0x5d')](_0x956f2f);});}[_0x5d83('0x7e')](_0x43b75e){const _0xc4f096=[],_0x34af17=new Map();for(const _0x48be7a of this['editor'][_0x5d83('0x2a')]['document'][_0x5d83('0x40')]()){const _0xbb4a2f=this[_0x5d83('0x30')][_0x5d83('0x29')]['view'][_0x5d83('0xbc')](_0x48be7a);if(!_0xbb4a2f)continue;const _0x52e899=_0xbb4a2f['getClientRects']()[_0x5d83('0x1d')](0x0);_0x52e899&&(_0xc4f096[_0x5d83('0x90')](_0x48be7a),_0x34af17[_0x5d83('0xfa')](_0x48be7a,_0x52e899));}return _0xc4f096[_0x5d83('0x74')]((_0xd8a6a0,_0x25f256)=>{const _0x3dbf1b=_0x34af17[_0x5d83('0xca')](_0xd8a6a0),_0x464c2b=_0x34af17[_0x5d83('0xca')](_0x25f256);return _0x3dbf1b['y']-_0x464c2b['y']||_0x3dbf1b['x']-_0x464c2b['x'];}),(_0x43b75e=_0x43b75e['filter'](_0x3b6f77=>_0xc4f096[_0x5d83('0x5e')](_0x3b6f77[_0x5d83('0xda')])))['sort']((_0x10287a,_0x336f57)=>_0xc4f096[_0x5d83('0x83')](_0x10287a[_0x5d83('0xda')])-_0xc4f096[_0x5d83('0x83')](_0x336f57[_0x5d83('0xda')])),_0x43b75e;}[_0x5d83('0xc8')](_0x3e8ff0){const _0x3da683=Array['from'](_0x3e8ff0[_0x5d83('0x4b')])['filter'](([_0x5a6a8a,_0x33f705])=>_0x5a6a8a[_0x5d83('0x9d')]('revision:')&&!_0x33f705[_0x5d83('0x3a')]),_0x5c6697=Array[_0x5d83('0xe2')](this[_0x5d83('0x30')][_0x5d83('0x2a')][_0x5d83('0xa5')](_0x3e8ff0)[_0x5d83('0x57')]({'singleCharacters':!0x0}));if(0x0!=_0x3da683[_0x5d83('0x7b')])for(const _0x30de79 of _0x5c6697){const [_0xa6a354,_0x433f1e]=_0x3da683[0x0],[,_0x2dd507,_0x34582a]=_0xa6a354[_0x5d83('0x125')](':');if(_0x433f1e['end'][_0x5d83('0x91')](_0x30de79['nextPosition'])&&_0x3da683[_0x5d83('0xa7')](),(_0x30de79[_0x5d83('0x120')][_0x5d83('0x91')](_0x433f1e[_0x5d83('0xcb')])||_0x30de79['previousPosition'][_0x5d83('0xbb')](_0x433f1e['start']))&&(_0x5d83('0x9c')==_0x2dd507?_0x30de79['isAdded']={'userId':_0x34582a}:'deletion'==_0x2dd507&&(_0x30de79[_0x5d83('0x28')]={'userId':_0x34582a})),0x0==_0x3da683['length'])break;}return _0x5c6697;}[_0x5d83('0xd3')](_0xadda63){const _0x474ded=new Map();for(let _0x5809e3=0x0;_0x5809e3<_0xadda63['length'];_0x5809e3++)_0x5d83('0x75')===_0xadda63[_0x5809e3][_0x5d83('0x76')]?(_0xadda63[_0x5809e3][_0x5d83('0x1d')][_0x5d83('0xeb')]=_0x5809e3,_0xadda63[_0x5809e3][_0x5d83('0x1d')][_0x5d83('0x3b')]=_0x5809e3):(_0x5d83('0xba')===_0xadda63[_0x5809e3]['type']?_0xadda63[_0x5809e3]['item'][_0x5d83('0xeb')]=_0x5809e3:_0x5d83('0x37')===_0xadda63[_0x5809e3][_0x5d83('0x76')]&&(_0xadda63[_0x5809e3][_0x5d83('0x1d')][_0x5d83('0x3b')]=_0x5809e3),_0x474ded[_0x5d83('0xfa')](_0xadda63[_0x5809e3]['id'],_0x5809e3));for(const _0xa127a6 of _0x474ded['values']())_0x5d83('0xba')===_0xadda63[_0xa127a6]['type']?_0xadda63[_0xa127a6][_0x5d83('0x1d')][_0x5d83('0x3b')]=_0x474ded[_0x5d83('0xca')](_0xadda63[_0xa127a6]['pairId']):'elementEnd'===_0xadda63[_0xa127a6][_0x5d83('0x76')]&&(_0xadda63[_0xa127a6]['item'][_0x5d83('0xeb')]=_0x474ded[_0x5d83('0xca')](_0xadda63[_0xa127a6][_0x5d83('0xbf')]));}[_0x5d83('0xf1')](_0x582dfb){for(let _0x34369d=0x0;_0x34369d<_0x582dfb[_0x5d83('0x7b')];_0x34369d++){if('elementStart'===_0x582dfb[_0x34369d][_0x5d83('0x76')])_0x582dfb[_0x34369d]['item'][_0x5d83('0xeb')]=_0x34369d;else{if(_0x5d83('0x37')===_0x582dfb[_0x34369d][_0x5d83('0x76')]){_0x582dfb[_0x34369d][_0x5d83('0x1d')]['endIndex']=_0x34369d;const _0x5151b2=_0x582dfb[_0x34369d][_0x5d83('0x1d')]['startIndex'];_0x582dfb[_0x5151b2][_0x5d83('0xbf')]=_0x582dfb[_0x34369d]['id'],_0x582dfb[_0x34369d]['pairId']=_0x582dfb[_0x5151b2]['id'];}else _0x582dfb[_0x34369d][_0x5d83('0x1d')][_0x5d83('0xeb')]=_0x34369d,_0x582dfb[_0x34369d]['item']['endIndex']=_0x34369d,_0x582dfb[_0x34369d][_0x5d83('0xbf')]=null;}_0x582dfb[_0x34369d][_0x5d83('0xf9')]||(_0x582dfb[_0x34369d][_0x5d83('0xf9')]=[],_0x582dfb[_0x34369d][_0x5d83('0x112')]=[]);}}[_0x5d83('0xe9')](_0x36cde9,_0x239af0){const _0x5d2dbc=_0x36cde9['filter'](_0x4e9c73=>!_0x4e9c73['isAdded']);for(let _0x559985=0x0;_0x559985<_0x239af0[_0x5d83('0x7b')];_0x559985++)_0x239af0[_0x559985][_0x5d83('0x6b')]&&(_0x5d2dbc[_0x559985][_0x5d83('0x6b')]=_0x239af0[_0x559985]['isAdded']);}['_makeModelFromViewString'](_0x16b588){const _0x18f565=JSON['parse'](_0x16b588),_0x382208=this['editor'][_0x5d83('0x29')][_0x5d83('0xa4')]['document'],_0x35cb16=new _0x453b50(_0x382208,_0x18f565[_0x5d83('0x103')](_0x457497=>this[_0x5d83('0x11f')](_0x457497)));return this[_0x5d83('0x30')][_0x5d83('0x66')][_0x5d83('0x82')](_0x35cb16);}['_getViewObj'](_0x4fcf55){const _0x63fa34=this[_0x5d83('0x30')]['editing']['view'][_0x5d83('0x34')];if(_0x5d83('0x11c')==typeof _0x4fcf55)return new _0x5b1f5d(_0x63fa34,_0x4fcf55);{const _0x414299=_0x4fcf55[_0x5d83('0x104')][_0x5d83('0x103')](_0x13f868=>this[_0x5d83('0x11f')](_0x13f868));return new(tt[_0x4fcf55[(_0x5d83('0x76'))]]||_0x539cb4)(_0x63fa34,_0x4fcf55['name'],_0x4fcf55['attributes'],_0x414299);}}[_0x5d83('0xaa')](_0x3452ad,_0xb3aa1d=null){const _0x5093ac=this[_0x5d83('0x10')][_0x5d83('0xf7')](_0x3452ad),_0x493188=_0xb3aa1d?this[_0x5d83('0x10')]['getRevision'](_0xb3aa1d):null,_0x406bbb=this['_getRevisionsRange'](_0x5093ac,_0x493188),_0x1dec82=_0x406bbb[_0x406bbb[_0x5d83('0x7b')]-0x1],_0x3aaf53=new Map(),_0x43631f={'model':{},'attributes':{},'changes':[]},_0x2d16cd=new Set(),_0x21f30d=new Map();for(let _0x2276a7=_0x406bbb[_0x5d83('0x7b')]-0x1;_0x2276a7>=0x0;_0x2276a7--){const _0x1f4018=_0x406bbb[_0x2276a7];for(const _0xf9d579 of Object[_0x5d83('0x7')](_0x1f4018[_0x5d83('0x99')]))if(_0x1f4018[_0x5d83('0x99')][_0xf9d579][_0x5d83('0x9b')]){const _0x261649=_0x1f4018[_0x5d83('0x99')][_0xf9d579]['attachChange'];_0x261649[_0x5d83('0x7a')]?(_0x2d16cd[_0x5d83('0x7c')](_0xf9d579),_0x21f30d[_0x5d83('0x20')](_0xf9d579)&&_0x21f30d[_0x5d83('0xca')](_0xf9d579)['userId']==_0x261649[_0x5d83('0x79')]?_0x21f30d[_0x5d83('0x10b')](_0xf9d579):_0x21f30d['set'](_0xf9d579,_0x261649)):_0x21f30d[_0x5d83('0x20')](_0xf9d579)?(_0x2d16cd['delete'](_0xf9d579),_0x21f30d[_0x5d83('0x10b')](_0xf9d579)):(_0x2d16cd['add'](_0xf9d579),_0x21f30d['set'](_0xf9d579,_0x261649));}else _0x2d16cd[_0x5d83('0x7c')](_0xf9d579);}for(const _0x430272 of _0x2d16cd){const _0x341b82=_0x21f30d[_0x5d83('0x20')](_0x430272)&&!_0x21f30d[_0x5d83('0xca')](_0x430272)['isAttached'];let _0x1eaca9=_0x341b82?_0x406bbb['length']-0x1:0x0;const _0x3b353c=_0x341b82?-0x1:0x1;for(;_0x406bbb[_0x1eaca9];){const _0x3a0efc=_0x406bbb[_0x1eaca9];if(_0x3a0efc[_0x5d83('0x99')][_0x430272]){const _0x3ac35e=_0x341b82?_0x3a0efc[_0x5d83('0x99')][_0x430272]['attributesBefore']:_0x3a0efc[_0x5d83('0x99')][_0x430272]['attributesAfter'];_0x43631f[_0x5d83('0xa8')][_0x430272]=_0x3ac35e?_0x2a4d62(_0x3ac35e):{};break;}_0x1eaca9+=_0x3b353c;}}for(const _0x587d07 of _0x406bbb){_0x587d07[_0x5d83('0x2a')]={};for(const _0x306ce5 of _0x587d07['authors'])_0x3aaf53['set'](_0x306ce5['id'],_0x306ce5);for(const _0x198ef3 of _0x2d16cd){const _0xe2fa=_0x587d07['diffData'][_0x198ef3]?_0x587d07[_0x5d83('0x99')][_0x198ef3]['insertions']:'[]',_0xda8bfb=_0x587d07['diffData'][_0x198ef3]?_0x587d07['diffData'][_0x198ef3][_0x5d83('0x1c')]:'[]';_0x587d07[_0x5d83('0x2a')][_0x198ef3]={'insertions':this[_0x5d83('0x77')](_0xe2fa),'deletions':this[_0x5d83('0x77')](_0xda8bfb)};}}for(const _0x482ae2 of _0x2d16cd){let _0x486120=null,_0x7515a6=0x0;const _0x346f3c=new Map(Array[_0x5d83('0xe2')](_0x5093ac[_0x5d83('0x2a')][_0x482ae2]['insertions'][_0x5d83('0x4b')])['filter'](([_0x26c2a0])=>!_0x26c2a0[_0x5d83('0x9d')](_0x5d83('0x48'))));let _0x5c281c=0x0;for(const _0x52ab86 of _0x406bbb){const _0x10d315=this[_0x5d83('0xc8')](_0x52ab86[_0x5d83('0x2a')][_0x482ae2][_0x5d83('0xf3')]);_0x52ab86==_0x5093ac?(_0x486120=_0x10d315,_0x7515a6=_0x486120['length'],_0x486120['forEach'](_0x1e9279=>{_0x1e9279['id']=_0x5c281c++;}),this[_0x5d83('0xf1')](_0x486120)):this[_0x5d83('0xe9')](_0x486120,_0x10d315);const _0x5d6526=_0x486120[_0x5d83('0xdc')](_0x4e510e=>!_0x4e510e['isAdded'])[_0x5d83('0x103')](_0x465985=>_0x465985['id']);let _0x6354ce=0x0;const _0x4e6a14=this[_0x5d83('0xc8')](_0x52ab86[_0x5d83('0x2a')][_0x482ae2][_0x5d83('0x1c')]);_0x4e6a14['forEach'](_0x2b2d99=>{_0x2b2d99['isRemoved']?_0x2b2d99['id']=_0x7515a6++:_0x2b2d99['id']=_0x5d6526[_0x6354ce++];}),this[_0x5d83('0xf1')](_0x4e6a14),this['_setDistance'](_0x486120,'isAdded'),this[_0x5d83('0x129')](_0x4e6a14,_0x5d83('0x28')),_0x52ab86==_0x5093ac&&this[_0x5d83('0x117')](_0x486120,_0x346f3c),_0x486120=this[_0x5d83('0x73')](_0x486120,_0x4e6a14),this[_0x5d83('0xd3')](_0x486120),this['_setDistance'](_0x486120,'isRemoved');}_0x486120=_0x486120[_0x5d83('0xdc')](_0x20c9a5=>!(_0x20c9a5[_0x5d83('0x6b')]&&_0x20c9a5[_0x5d83('0x28')]));const _0x50b507=new Map(_0x1dec82['model'][_0x482ae2][_0x5d83('0x1c')]['markers']),_0x136bb7=new Set(_0x346f3c[_0x5d83('0x7')]());for(const _0x34856b of _0x50b507[_0x5d83('0x7')]())_0x136bb7[_0x5d83('0x10b')](_0x34856b);this[_0x5d83('0x8')](_0x486120,_0x136bb7),this[_0x5d83('0x2d')](_0x486120),_0x486120=this[_0x5d83('0xb5')](_0x486120),_0x486120=this[_0x5d83('0x9f')](_0x486120),_0x486120=this[_0x5d83('0x63')](_0x486120);const {root:_0x11ef57,changes:_0x7a90ae}=this[_0x5d83('0xe3')](_0x486120,_0x3aaf53,_0x482ae2);_0x43631f['model'][_0x482ae2]=_0x11ef57;const _0x54b637=_0x21f30d['get'](_0x482ae2);if(_0x54b637){const _0x2c2ad8=_0x3aaf53['get'](_0x54b637[_0x5d83('0x79')]),_0x13cdd0=new _0x5b860c({'author':_0x2c2ad8,'type':_0x54b637['isAttached']?'add':_0x5d83('0xee'),'data':{'isOnRoot':!0x0},'createdAt':new Date(),'rootName':_0x482ae2});_0x7a90ae[_0x5d83('0xc5')](_0x13cdd0),_0x43631f[_0x5d83('0xa8')][_0x482ae2][_0x5d83('0x4')]=_0x13cdd0['id'];}_0x43631f['changes']=_0x43631f[_0x5d83('0xb')][_0x5d83('0x33')](_0x7a90ae);}return _0x43631f;}['_markMarkers'](_0x2614b0,_0x3e8ea2){for(let _0x66fd10=0x0;_0x66fd10<_0x2614b0[_0x5d83('0x7b')];_0x66fd10++)for(const [_0x236d39,_0x5b701e]of _0x3e8ea2)_0x5b701e['start'][_0x5d83('0x91')](_0x2614b0[_0x66fd10][_0x5d83('0x120')])&&_0x2614b0[_0x66fd10][_0x5d83('0xf9')][_0x5d83('0x90')](_0x236d39),_0x5b701e[_0x5d83('0x1')]['isEqual'](_0x2614b0[_0x66fd10]['nextPosition'])&&_0x2614b0[_0x66fd10][_0x5d83('0x112')][_0x5d83('0x90')](_0x236d39);}['_joinTapes'](_0x1baa4d,_0x8ceb89){let _0x20aa52=[],_0x45c374=0x0,_0x2a1a59=0x0;for(;_0x45c374<_0x1baa4d[_0x5d83('0x7b')]||_0x2a1a59<_0x8ceb89[_0x5d83('0x7b')];){const _0x39607b=_0x1baa4d[_0x45c374]||{},_0x182541=_0x8ceb89[_0x2a1a59]||{};if(_0x39607b['id']==_0x182541['id'])_0x45c374++,_0x2a1a59++,_0x20aa52['push'](_0x39607b);else{if(_0x182541['isRemoved']&&_0x39607b[_0x5d83('0x6b')]){const {commonTape:_0x91c478,iEnd:_0x15107e,jEnd:_0x499935}=this[_0x5d83('0x19')](_0x1baa4d,_0x45c374,_0x8ceb89,_0x2a1a59);_0x20aa52=_0x20aa52['concat'](_0x91c478),_0x45c374=_0x15107e,_0x2a1a59=_0x499935;}else _0x182541[_0x5d83('0x28')]?(_0x2a1a59++,_0x20aa52['push'](_0x182541)):(_0x45c374++,_0x20aa52[_0x5d83('0x90')](_0x39607b));}}return _0x20aa52;}[_0x5d83('0x8')](_0x32d680,_0x514f8a){const _0xcf861a=[];for(let _0xba8db=0x0;_0xba8db<_0x32d680[_0x5d83('0x7b')];_0xba8db++){for(let _0x47ea3b=0x0;_0x47ea3b<_0x32d680[_0xba8db][_0x5d83('0xf9')][_0x5d83('0x7b')];_0x47ea3b++){const _0x4981a4=_0x32d680[_0xba8db]['markersStart'][_0x47ea3b];if(!_0x514f8a[_0x5d83('0x20')](_0x4981a4))continue;const {group:_0x269ba8,type:_0x394927,authorId:_0x346a1b}=_0x1c762f(_0x4981a4);'revision-suggestion'!=_0x269ba8||_0x5d83('0x9c')!=_0x394927&&_0x5d83('0xae')!=_0x394927||(_0xcf861a[_0x5d83('0xc5')]({'type':_0x394927,'name':_0x4981a4,'userId':_0x346a1b}),_0x32d680[_0xba8db]['markersStart']['splice'](_0x47ea3b,0x1),_0x47ea3b--);}_0x4b3ea3(_0x32d680[_0xba8db]);for(let _0xa684b9=0x0;_0xa684b9<_0x32d680[_0xba8db][_0x5d83('0x112')][_0x5d83('0x7b')];_0xa684b9++){const _0x5efaed=_0x32d680[_0xba8db][_0x5d83('0x112')][_0xa684b9];if(!_0x514f8a[_0x5d83('0x20')](_0x5efaed))continue;const {group:_0x417bc4,type:_0x354fc7}=_0x1c762f(_0x5efaed);if(_0x5d83('0x31')!=_0x417bc4||_0x5d83('0x9c')!=_0x354fc7&&_0x5d83('0xae')!=_0x354fc7)continue;_0x32d680[_0xba8db][_0x5d83('0x112')][_0x5d83('0x27')](_0xa684b9,0x1),_0xa684b9--;const _0x57771d=_0xcf861a[_0x5d83('0x100')](_0x4f180f=>_0x4f180f[_0x5d83('0xc')]==_0x5efaed);_0x57771d>-0x1&&_0xcf861a['splice'](_0x57771d,0x1);}}function _0x1c762f(_0x2b49ca){const _0x37432f=_0x2b49ca['split'](':');return{'group':_0x37432f[0x0],'type':_0x37432f[0x1],'subType':_0x37432f['length']>=0x5?_0x37432f[0x2]:null,'id':_0x37432f['length']<0x5?_0x37432f[0x2]:_0x37432f[0x3],'authorId':_0x37432f[_0x5d83('0x7b')]<0x5?_0x37432f[0x3]:_0x37432f[0x4],'markerCount':0x6==_0x37432f[_0x5d83('0x7b')]?_0x37432f[0x5]:null};}function _0x4b3ea3(_0x5678f8){for(let _0x28f311=0x0;_0x28f311<_0xcf861a['length'];_0x28f311++){if(_0x5678f8['isAdded']&&_0x5d83('0x9c')==_0xcf861a[_0x28f311]['type'])return _0x5678f8[_0x5d83('0xb6')]=_0xcf861a[_0x28f311],void delete _0x5678f8[_0x5d83('0x6b')];if(!_0x5678f8[_0x5d83('0x6b')]&&!_0x5678f8[_0x5d83('0x28')]&&'deletion'==_0xcf861a[_0x28f311][_0x5d83('0x76')])return void(_0x5678f8[_0x5d83('0x98')]=_0xcf861a[_0x28f311]);}}}[_0x5d83('0x129')](_0x4381c5,_0xf5b39f){let _0x3b26e3=0x0,_0x3397ca=!0x1;const _0x2c855e=new Map();for(const _0x32bdaa of _0x4381c5)_0x32bdaa[_0xf5b39f]?_0x3397ca&&(_0x3b26e3++,_0x3397ca=!0x1):(_0x3b26e3++,_0x3397ca=!0x0),_0x2c855e['set'](_0x32bdaa['id'],_0x3b26e3);for(let _0x5e9519=0x0;_0x5e9519<_0x4381c5[_0x5d83('0x7b')];_0x5e9519++){if(_0x5d83('0x28')==_0xf5b39f&&_0x4381c5[_0x5e9519][_0x5d83('0x6b')]||_0x5d83('0x6b')==_0xf5b39f&&_0x4381c5[_0x5e9519][_0x5d83('0x28')])continue;if('text'==_0x4381c5[_0x5e9519][_0x5d83('0x76')]){_0x4381c5[_0x5e9519][_0x5d83('0x107')]=0x0;continue;}const _0x380e59=_0x2c855e[_0x5d83('0xca')](_0x4381c5[_0x5e9519][_0x5d83('0xbf')]),_0x567c55=_0x2c855e[_0x5d83('0xca')](_0x4381c5[_0x5e9519]['id']);_0x4381c5[_0x5e9519]['distance']=_0x380e59-_0x567c55;}}[_0x5d83('0x5c')](_0x19c0f6,_0x5e03ba,_0x3a7c7b=!0x1){const _0x9094e2=[];let _0x1226ee=this[_0x5d83('0x10')]['getIndex'](_0x19c0f6),_0x752e83=this['repository'][_0x5d83('0x41')](_0x5e03ba);for(-0x1==_0x752e83&&(_0x752e83=this[_0x5d83('0x10')][_0x5d83('0xe4')][_0x5d83('0x7b')],_0x3a7c7b=!0x1);_0x1226ee<_0x752e83;)_0x9094e2[_0x5d83('0x90')](this[_0x5d83('0x10')]['getRevision'](_0x1226ee)),_0x1226ee++;return _0x3a7c7b&&_0x9094e2[_0x5d83('0x90')](this[_0x5d83('0x10')][_0x5d83('0xf7')](_0x1226ee)),_0x9094e2;}[_0x5d83('0x19')](_0x4a382f,_0x2377e1,_0x444d75,_0x3678b0){const _0x3d3e82=this[_0x5d83('0x30')][_0x5d83('0x2a')][_0x5d83('0xec')];let _0x4ce0fc=_0x2377e1;for(;_0x4a382f[_0x4ce0fc]&&_0x4a382f[_0x4ce0fc][_0x5d83('0x6b')];)_0x4ce0fc++;let _0x46ce55=_0x3678b0;for(;_0x444d75[_0x46ce55]&&_0x444d75[_0x46ce55]['isRemoved'];)_0x46ce55++;_0x215f48(_0x4a382f,_0x2377e1,_0x4ce0fc),_0x215f48(_0x444d75,_0x3678b0,_0x46ce55);const _0x3e944c=_0x444d75['slice'](_0x3678b0,_0x46ce55)[_0x5d83('0x33')](_0x4a382f[_0x5d83('0x56')](_0x2377e1,_0x4ce0fc));return _0x3e944c[_0x5d83('0x74')]((_0xba4900,_0x133955)=>_0xba4900[_0x5d83('0x85')]!=_0x133955[_0x5d83('0x85')]?_0xba4900[_0x5d83('0x85')]-_0x133955['side']:_0xba4900[_0x5d83('0x95')]!=_0x133955[_0x5d83('0x95')]?_0xba4900[_0x5d83('0x95')]-_0x133955['level']:_0xba4900[_0x5d83('0x107')]!=_0x133955['distance']?_0x133955['distance']-_0xba4900['distance']:!!_0xba4900['isAdded']!=!!_0x133955['isAdded']?-0x1==_0xba4900['side']||0x0==_0xba4900[_0x5d83('0x85')]?_0xba4900['isAdded']?-0x1:0x1:_0xba4900[_0x5d83('0x6b')]?0x1:-0x1:_0xba4900[_0x5d83('0x53')]-_0x133955[_0x5d83('0x53')]),{'commonTape':_0x3e944c,'iEnd':_0x4ce0fc,'jEnd':_0x46ce55};function _0x215f48(_0x532001,_0x49aacc,_0x1d09c3){let _0xba7878=-0x1,_0x49f7e6=Number[_0x5d83('0x5f')],_0x41bd16=!0x0;for(let _0x1021cc=_0x49aacc;_0x1021cc<_0x1d09c3;_0x1021cc++)if(_0x3d3e82['isInline'](_0x532001[_0x1021cc][_0x5d83('0x1d')])||(_0x41bd16=!0x1),_0x532001[_0x1021cc][_0x5d83('0x1d')][_0x5d83('0xeb')]<_0x49aacc&&(_0xba7878=_0x1021cc),_0x532001[_0x1021cc][_0x5d83('0x1d')]['endIndex']>=_0x1d09c3){_0x49f7e6=_0x1021cc;break;}_0x41bd16&&(_0xba7878=_0x1d09c3-0x1);for(let _0x483fe7=_0x49aacc;_0x483fe7<_0x1d09c3;_0x483fe7++)_0x532001[_0x483fe7]['side']=_0x483fe7<=_0xba7878?-0x1:_0x483fe7<_0x49f7e6?0x0:0x1,_0x532001[_0x483fe7][_0x5d83('0x53')]=_0x483fe7;let _0x456740=0x0;for(let _0x2631c4=_0x49aacc;_0x2631c4<=_0xba7878;_0x2631c4++)0x0==_0x532001[_0x2631c4][_0x5d83('0x107')]?_0x532001[_0x2631c4][_0x5d83('0x95')]=_0x456740:(_0x456740++,_0x532001[_0x2631c4][_0x5d83('0x95')]=_0x456740,_0x456740++);for(let _0x5e4342=_0x49aacc;_0x5e4342<_0x1d09c3;_0x5e4342++)0x0==_0x532001[_0x5e4342][_0x5d83('0x85')]&&(_0x532001[_0x5e4342]['level']=_0x456740);_0x456740=0x0;for(let _0x565ded=_0x1d09c3-0x1;_0x565ded>=_0x49f7e6;_0x565ded--)0x0==_0x532001[_0x565ded][_0x5d83('0x107')]?_0x532001[_0x565ded][_0x5d83('0x95')]=_0x456740:(_0x456740--,_0x532001[_0x565ded][_0x5d83('0x95')]=_0x456740,_0x456740--);}}[_0x5d83('0x2d')](_0x7fd6f5){const _0x31a483=new Map(),_0x35213c=this[_0x5d83('0x30')][_0x5d83('0x2a')][_0x5d83('0xec')];for(let _0x1dd5ff=0x1;_0x1dd5ff<_0x7fd6f5['length'];_0x1dd5ff++){let _0x4991dc,_0x3840fa,_0x107815;const _0x16839d=_0x7fd6f5[_0x1dd5ff],_0x3fc7b7=_0x7fd6f5[_0x1dd5ff-0x1];if(_0x5d83('0x75')==_0x16839d['type'])continue;if(_0x16839d[_0x5d83('0x76')]!=_0x3fc7b7[_0x5d83('0x76')])continue;if(!_0x35213c[_0x5d83('0x42')](_0x3fc7b7[_0x5d83('0x1d')])||_0x35213c[_0x5d83('0x89')](_0x3fc7b7[_0x5d83('0x1d')]))continue;if(!_0x35213c[_0x5d83('0x42')](_0x16839d[_0x5d83('0x1d')])||_0x35213c['isLimit'](_0x16839d['item']))continue;if((_0x7fd6f5[_0x1dd5ff][_0x5d83('0x6b')]||_0x7fd6f5[_0x1dd5ff]['isAddSuggestion'])&&_0x7fd6f5[_0x1dd5ff-0x1]['isRemoved'])_0x4991dc=_0x7fd6f5[_0x1dd5ff],_0x3840fa=_0x7fd6f5[_0x1dd5ff-0x1],_0x107815=_0x1dd5ff-0x1;else{if(!_0x7fd6f5[_0x1dd5ff]['isRemoved']||!_0x7fd6f5[_0x1dd5ff-0x1]['isAdded']&&!_0x7fd6f5[_0x1dd5ff-0x1][_0x5d83('0xb6')])continue;_0x4991dc=_0x7fd6f5[_0x1dd5ff-0x1],_0x3840fa=_0x7fd6f5[_0x1dd5ff],_0x107815=_0x1dd5ff;}const _0x2c5e19=_0x4991dc['level']==_0x3840fa['level'],_0x2f0378=Math[_0x5d83('0x3e')](_0x4991dc[_0x5d83('0x95')])<Math['abs'](_0x3840fa[_0x5d83('0x95')])&&0x0==_0x3840fa['distance'];(_0x2c5e19||_0x2f0378)&&(_0x31a483[_0x5d83('0xfa')](_0x3840fa['id'],_0x4991dc['id']),_0x7fd6f5['splice'](_0x107815,0x1),_0x1dd5ff--,_0x4991dc[_0x5d83('0x6b')]=!0x1);}for(let _0x43b4ef=0x0;_0x43b4ef<_0x7fd6f5['length'];_0x43b4ef++)_0x31a483[_0x5d83('0x20')](_0x7fd6f5[_0x43b4ef][_0x5d83('0xbf')])&&(_0x7fd6f5[_0x43b4ef][_0x5d83('0xbf')]=_0x31a483[_0x5d83('0xca')](_0x7fd6f5[_0x43b4ef][_0x5d83('0xbf')]));}[_0x5d83('0xb5')](_0x500c67){const _0x52b962=new Set(_0x500c67[_0x5d83('0x103')](_0x5384d9=>_0x5384d9['id']));for(let _0x5483c3=0x0;_0x5483c3<_0x500c67[_0x5d83('0x7b')];_0x5483c3++)_0x52b962['has'](_0x500c67[_0x5483c3]['pairId'])||0x0==_0x500c67[_0x5483c3]['distance']||(_0x500c67[_0x5483c3][_0x5d83('0x21')]=!0x0);return _0x500c67[_0x5d83('0xdc')](_0x3be772=>!_0x3be772[_0x5d83('0x21')]);}[_0x5d83('0x9f')](_0x413f70){const _0x2268d9=new Set();for(let _0x226d5d=0x0;_0x226d5d<_0x413f70[_0x5d83('0x7b')];_0x226d5d++){if(_0x2268d9[_0x5d83('0x20')](_0x413f70[_0x226d5d]['id'])&&_0x413f70[_0x226d5d][_0x5d83('0x28')]&&(_0x413f70[_0x226d5d][_0x5d83('0x21')]=!0x0),_0x413f70[_0x226d5d][_0x5d83('0x21')])continue;if(0x0==_0x413f70[_0x226d5d][_0x5d83('0x107')])continue;if(_0x5d83('0xba')!=_0x413f70[_0x226d5d][_0x5d83('0x76')])continue;if(null==_0x413f70[_0x226d5d]['pairId'])continue;let _0x2f569c=_0x226d5d+0x1,_0x3e72ff=0x0;for(;_0x413f70[_0x2f569c]['id']!=_0x413f70[_0x226d5d][_0x5d83('0xbf')];)_0x5d83('0xba')==_0x413f70[_0x2f569c][_0x5d83('0x76')]?_0x3e72ff++:_0x5d83('0x37')==_0x413f70[_0x2f569c]['type']&&_0x3e72ff--,_0x2f569c++;if(0x0!=_0x3e72ff){if(_0x413f70[_0x226d5d][_0x5d83('0x28')])_0x413f70[_0x226d5d][_0x5d83('0x21')]=!0x0;else for(;_0x2f569c!=_0x226d5d;)_0x413f70[_0x2f569c][_0x5d83('0x28')]&&0x0!=_0x413f70[_0x2f569c]['distance']&&(_0x413f70[_0x2f569c]['isIncorrect']=!0x0,_0x2268d9['add'](_0x413f70[_0x2f569c][_0x5d83('0xbf')])),_0x2f569c--;}}return _0x413f70['filter'](_0x4b9a18=>!_0x4b9a18[_0x5d83('0x21')]);}[_0x5d83('0x63')](_0xa46d8c){const _0x11efde=this['editor'][_0x5d83('0x2a')][_0x5d83('0xec')];for(let _0x4d08eb=0x0;_0x4d08eb<_0xa46d8c[_0x5d83('0x7b')];_0x4d08eb++){if(!(_0xa46d8c[_0x4d08eb][_0x5d83('0x6b')]||_0xa46d8c[_0x4d08eb][_0x5d83('0xb6')]||_0xa46d8c[_0x4d08eb][_0x5d83('0x28')]||_0xa46d8c[_0x4d08eb][_0x5d83('0x98')]))continue;if(0x0==_0xa46d8c[_0x4d08eb][_0x5d83('0x107')])continue;const _0x391324=_0xa46d8c[_0x4d08eb][_0x5d83('0x1d')];_0x11efde[_0x5d83('0x42')](_0x391324)||_0x11efde['isLimit'](_0x391324)||(_0xa46d8c[_0x4d08eb][_0x5d83('0x6b')]&&delete _0xa46d8c[_0x4d08eb][_0x5d83('0x6b')],_0xa46d8c[_0x4d08eb][_0x5d83('0xb6')]&&delete _0xa46d8c[_0x4d08eb][_0x5d83('0xb6')],_0xa46d8c[_0x4d08eb][_0x5d83('0x98')]&&delete _0xa46d8c[_0x4d08eb][_0x5d83('0x98')],_0xa46d8c[_0x4d08eb][_0x5d83('0x28')]&&(_0xa46d8c[_0x4d08eb]['isIncorrect']=!0x0));}return _0xa46d8c['filter'](_0x1511c1=>!_0x1511c1['isIncorrect']);}[_0x5d83('0xe3')](_0x1d6594,_0x990aa1,_0x5679b6){const _0x3443d8=new _0x5089c8(),_0x25ec15=[],_0x495684=new Map(),_0x5ec17f=this['editor'][_0x5d83('0x2a')],_0x2a0527=_0x5ec17f[_0x5d83('0xec')],_0x53b303=[_0x3443d8],_0xf05c3={},_0x259fb8={'isAdded':[],'isRemoved':[],'isAddSuggestion':[],'isRemoveSuggestion':[]};let _0x35cb8c=null;const _0x2e013=[0x0];for(let _0x3b581f=0x0;_0x3b581f<_0x1d6594[_0x5d83('0x7b')];_0x3b581f++){let _0x244e29,_0x2dce9f;if(_0x5d83('0xba')===_0x1d6594[_0x3b581f][_0x5d83('0x76')]){_0x244e29=_0x5ec17f[_0x5d83('0x0')](_0x3443d8,_0x2e013);const _0x3a89c9=new _0x3052f3(_0x1d6594[_0x3b581f][_0x5d83('0x1d')][_0x5d83('0xc')],_0x1d6594[_0x3b581f][_0x5d83('0x1d')][_0x5d83('0xe')]());_0x53b303[0x0][_0x5d83('0xd5')](_0x3a89c9),_0x2e013['push'](0x0),_0x53b303['unshift'](_0x3a89c9),_0x2dce9f=_0x5ec17f[_0x5d83('0x0')](_0x3443d8,_0x2e013),_0x35cb8c=null;}else{if('elementEnd'===_0x1d6594[_0x3b581f][_0x5d83('0x76')])_0x53b303[_0x5d83('0xa7')](),_0x244e29=_0x5ec17f[_0x5d83('0x0')](_0x3443d8,_0x2e013),_0x2e013[_0x5d83('0x3c')](),_0x2e013[_0x2e013[_0x5d83('0x7b')]-0x1]++,_0x2dce9f=_0x5ec17f['createPositionFromPath'](_0x3443d8,_0x2e013),_0x35cb8c=null;else{if(_0x244e29=_0x5ec17f[_0x5d83('0x0')](_0x3443d8,_0x2e013),_0x35cb8c&&_0x29eb67(_0x35cb8c,_0x1d6594[_0x3b581f][_0x5d83('0x1d')]))_0x35cb8c['_data']+=_0x1d6594[_0x3b581f]['item'][_0x5d83('0x66')];else{const _0x336455=new _0x562b4d(_0x1d6594[_0x3b581f][_0x5d83('0x1d')]['data'],_0x1d6594[_0x3b581f][_0x5d83('0x1d')][_0x5d83('0xe')]());_0x53b303[0x0][_0x5d83('0xd5')](_0x336455),_0x35cb8c=_0x336455;}_0x2e013[_0x2e013[_0x5d83('0x7b')]-0x1]+=_0x1d6594[_0x3b581f]['item']['offsetSize'],_0x2dce9f=_0x5ec17f[_0x5d83('0x0')](_0x3443d8,_0x2e013);}}for(const _0x5cd41e of _0x1d6594[_0x3b581f][_0x5d83('0xf9')])_0x495684[_0x5d83('0xfa')](_0x5cd41e,{'start':_0x244e29,'end':null});_0x42a04e(_0x5d83('0x98'),_0x3b581f,_0x244e29,_0x2dce9f),_0x42a04e(_0x5d83('0xb6'),_0x3b581f,_0x244e29,_0x2dce9f),_0x42a04e(_0x5d83('0x28'),_0x3b581f,_0x244e29,_0x2dce9f),_0x42a04e(_0x5d83('0x6b'),_0x3b581f,_0x244e29,_0x2dce9f);for(const _0x2dc7a1 of _0x1d6594[_0x3b581f][_0x5d83('0x112')]){_0x495684[_0x5d83('0xca')](_0x2dc7a1)['end']=_0x2dce9f;}}for(const [_0x175074,_0x5f5c7f]of _0x495684){const _0x373773=this['editor'][_0x5d83('0x2a')][_0x5d83('0x11a')](_0x5f5c7f[_0x5d83('0xcb')],_0x5f5c7f[_0x5d83('0x1')]);_0x3443d8[_0x5d83('0x4b')][_0x5d83('0xfa')](_0x175074,_0x373773);}return _0x25ec15[_0x5d83('0x74')]((_0x19bf5b,_0x25ae71)=>{const _0x35911f=_0x3443d8[_0x5d83('0x4b')]['get']('revision:'+_0x19bf5b['id']),_0x1b32ca=_0x3443d8[_0x5d83('0x4b')]['get'](_0x5d83('0x48')+_0x25ae71['id']);return _0x35911f[_0x5d83('0xcb')][_0x5d83('0x51')](_0x1b32ca['start'])?-0x1:_0x35911f[_0x5d83('0xcb')]['isAfter'](_0x1b32ca[_0x5d83('0xcb')])?0x1:_0x35911f[_0x5d83('0x1')][_0x5d83('0x51')](_0x1b32ca[_0x5d83('0x1')])?-0x1:_0x35911f[_0x5d83('0x1')]['isAfter'](_0x1b32ca[_0x5d83('0x1')])?0x1:_0x5d83('0x7c')===_0x19bf5b[_0x5d83('0x76')]?-0x1:0x1;}),{'root':_0x3443d8,'changes':_0x25ec15};function _0x42a04e(_0xbbced4,_0x327efa,_0x17b255,_0x18fbec){const _0x4f0359=!!_0x1d6594[_0x327efa][_0xbbced4],_0x24acfe=_0x4f0359?_0x1d6594[_0x327efa][_0xbbced4][_0x5d83('0x79')]:null,_0x3b6d36=_0x327efa===_0x1d6594['length']-0x1,_0x72696f=_0x259fb8[_0xbbced4][0x0],_0x12b8e4=_0x2a0527[_0x5d83('0x1f')](_0x1d6594[_0x327efa][_0x5d83('0x1d')]);!_0xf05c3[_0xbbced4]&&_0x4f0359?_0xf05c3[_0xbbced4]={'start':_0x17b255,'tapeItem':_0x1d6594[_0x327efa],'userId':_0x24acfe,'type':_0xbbced4}:_0xf05c3[_0xbbced4]&&!_0x4f0359?(_0xf05c3[_0xbbced4][_0x5d83('0x1')]=_0x17b255,_0x1d9bf6(_0xf05c3[_0xbbced4]),_0xf05c3[_0xbbced4]=null):_0xf05c3[_0xbbced4]&&_0x4f0359&&_0xf05c3[_0xbbced4][_0x5d83('0x79')]!==_0x24acfe&&(_0xf05c3[_0xbbced4][_0x5d83('0x1')]=_0x17b255,_0x72696f&&_0x72696f[_0x5d83('0x79')]===_0xf05c3[_0xbbced4]['userId']||_0x1d9bf6(_0xf05c3[_0xbbced4]),_0xf05c3[_0xbbced4]={'start':_0x17b255,'tapeItem':_0x1d6594[_0x327efa],'userId':_0x24acfe,'type':_0xbbced4}),_0xf05c3[_0xbbced4]&&_0x12b8e4&&(_0x5d83('0xba')!==_0x1d6594[_0x327efa][_0x5d83('0x76')]||_0x72696f&&_0x72696f[_0x5d83('0x79')]===_0x24acfe||_0x259fb8[_0xbbced4][_0x5d83('0xc5')]({'userId':_0x24acfe,'object':_0x1d6594[_0x327efa][_0x5d83('0x1d')],'change':_0xf05c3[_0xbbced4]}),_0x5d83('0x37')===_0x1d6594[_0x327efa][_0x5d83('0x76')]&&_0x72696f&&_0x72696f[_0x5d83('0xe8')]===_0x1d6594[_0x327efa][_0x5d83('0x1d')]&&(_0x259fb8[_0xbbced4]['shift'](),_0xf05c3[_0xbbced4]=_0x72696f[_0x5d83('0x122')])),_0xf05c3[_0xbbced4]&&_0x3b6d36&&(_0xf05c3[_0xbbced4]['end']=_0x18fbec,_0x1d9bf6(_0xf05c3[_0xbbced4]),_0xf05c3[_0xbbced4]=null);}function _0x1d9bf6({start:_0x59efbd,end:_0x55e5c6,tapeItem:_0xd81ed9,userId:_0x456964,type:_0x37607e}){const _0x29fb51=_0xd81ed9[_0x5d83('0x1d')],_0x1f72cf=_0x5ec17f[_0x5d83('0xec')][_0x5d83('0x42')](_0x29fb51)&&!_0x5ec17f[_0x5d83('0xec')][_0x5d83('0x89')](_0x29fb51),_0x5ae21c=_0x59efbd[_0x5d83('0x26')]==_0x55e5c6[_0x5d83('0x4d')]&&_0x55e5c6[_0x5d83('0x65')];if(_0x1f72cf&&_0x5ae21c)return;const _0x5dde32=_0x5ec17f['createRange'](_0x59efbd,_0x55e5c6),_0x55ea03=_0x990aa1[_0x5d83('0xca')](_0x456964),_0x5f5caa=new _0x5b860c({'author':_0x55ea03,'type':_0x5d83('0x6b')==_0x37607e||_0x5d83('0xb6')==_0x37607e?_0x5d83('0x7c'):_0x5d83('0xee'),'data':{'isSuggestion':'isAddSuggestion'==_0x37607e||_0x5d83('0x98')==_0x37607e},'createdAt':new Date(),'rootName':_0x5679b6});_0x25ec15[_0x5d83('0x90')](_0x5f5caa),_0x3443d8[_0x5d83('0x4b')][_0x5d83('0xfa')](_0x5d83('0x48')+_0x5f5caa['id'],_0x5dde32);}function _0x29eb67(_0x556630,_0x5f2200){const _0x3dbbb4=_0x556630[_0x5d83('0xe')](),_0x1f4093=_0x5f2200[_0x5d83('0xe')]();for(const _0x773f21 of _0x3dbbb4){if(_0x773f21[0x1]!==_0x5f2200[_0x5d83('0x60')](_0x773f21[0x0]))return!0x1;_0x1f4093[_0x5d83('0xe5')]();}return _0x1f4093[_0x5d83('0xe5')]()[_0x5d83('0x93')];}}['_setConversion'](){this[_0x5d83('0x30')][_0x5d83('0xed')][_0x5d83('0x4e')](_0x5d83('0x6'))[_0x5d83('0x92')]({'view':_0x5d83('0xf4')}),this[_0x5d83('0x30')][_0x5d83('0xed')][_0x5d83('0x4e')]('editingDowncast')[_0x5d83('0xfb')]({'model':_0x5d83('0xf4'),'view':_0x5a67a1=>{const _0x32defe=_0x5a67a1[_0x5d83('0x87')][_0x5d83('0x125')](':')[0x1],_0x305270=this['_getChangeFromId'](_0x32defe);if(!_0x305270)return null;const _0xad00b7=_0x5d83('0x7c')==_0x305270['type']?_0x5d83('0x9c'):_0x5d83('0xae'),_0x177228=[_0x5d83('0xd2'),_0x5d83('0x94')+_0xad00b7];return _0x305270[_0x5d83('0x66')][_0x5d83('0x8c')]&&_0x177228[_0x5d83('0x90')](_0x5d83('0x94')+_0xad00b7+_0x5d83('0x6d')),this[_0x5d83('0xdf')]==_0x305270&&_0x177228['push'](_0x5d83('0xa0')),{'classes':_0x177228,'attributes':{'data-change-id':_0x32defe}};}}),this[_0x5d83('0x30')][_0x5d83('0xed')][_0x5d83('0x4e')](_0x5d83('0x6'))[_0x5d83('0x7c')](_0x158581=>{_0x158581['on'](_0x5d83('0xa2'),(_0xaa635b,_0x17c87e,_0x324f9f)=>{const _0xc85ee7=_0x17c87e[_0x5d83('0x45')][_0x5d83('0xe7')](0x0);if(!_0xc85ee7||!_0xc85ee7['is'](_0x5d83('0xb2'),_0x5d83('0x6f')))return;if(!_0x324f9f[_0x5d83('0x16')]['consume'](_0xc85ee7,{'attributes':['vid_start',_0x5d83('0x10e')]}))return;const _0x33df23=_0x17c87e[_0x5d83('0x35')][_0x5d83('0xcb')][_0x5d83('0x26')];_0x324f9f[_0x5d83('0x128')][_0x5d83('0xad')]('vid_start',_0xc85ee7[_0x5d83('0x60')](_0x5d83('0xaf')),_0x33df23),_0x324f9f[_0x5d83('0x128')][_0x5d83('0xad')](_0x5d83('0x10e'),_0xc85ee7[_0x5d83('0x60')]('vid_end'),_0x33df23);},{'priority':_0x5d83('0xb1')});}),this[_0x5d83('0x30')][_0x5d83('0xed')][_0x5d83('0x4e')](_0x5d83('0x6'))[_0x5d83('0x7c')](_0x4524b3=>{_0x4524b3['on'](_0x5d83('0xb2'),(_0x4e09f5,_0x2156e4,_0x46ab92)=>{if(!_0x46ab92[_0x5d83('0x16')]['consume'](_0x2156e4['viewItem'],{'attributes':[_0x5d83('0xaf'),'vid_end']}))return;if(_0x2156e4[_0x5d83('0x35')][_0x5d83('0x3a')])return;const _0x4e825e=_0x2156e4[_0x5d83('0x35')]['start'][_0x5d83('0x26')];_0x4e825e[_0x5d83('0xff')](_0x5d83('0xaf'))||_0x4e825e[_0x5d83('0xff')](_0x5d83('0x71'))||(_0x46ab92['writer'][_0x5d83('0xad')]('vid_start',_0x2156e4[_0x5d83('0x45')][_0x5d83('0x60')](_0x5d83('0xaf')),_0x4e825e),_0x46ab92[_0x5d83('0x128')]['setAttribute'](_0x5d83('0x10e'),_0x2156e4[_0x5d83('0x45')][_0x5d83('0x60')]('vid_end'),_0x4e825e));},{'priority':_0x5d83('0xb1')});}),this[_0x5d83('0x30')]['conversion'][_0x5d83('0x4e')](_0x5d83('0x6'))[_0x5d83('0x18')]({'view':{'name':_0x5d83('0x69'),'attributes':{'vid':!0x0}},'model':{'key':_0x5d83('0x71'),'value':_0x4ee7de=>_0x4ee7de[_0x5d83('0x60')](_0x5d83('0x71'))}}),this['editor'][_0x5d83('0x2a')][_0x5d83('0xec')]['on'](_0x5d83('0xf6'),(_0x3b0756,[,_0x4af63c])=>{['vid_start',_0x5d83('0x10e'),_0x5d83('0x71')][_0x5d83('0x5e')](_0x4af63c)&&(_0x3b0756[_0x5d83('0xbd')]=!0x0,_0x3b0756[_0x5d83('0x124')]());},{'priority':_0x5d83('0xd1')}),this[_0x5d83('0x30')][_0x5d83('0xed')][_0x5d83('0x4e')]('dataDowncast')[_0x5d83('0x7c')](_0x325e1c=>{_0x325e1c['on'](_0x5d83('0xde'),(_0x1fed9a,_0x2fdefa,_0xa8a8cd)=>{if('\x20'!=_0x2fdefa[_0x5d83('0x1d')][_0x5d83('0x66')]||_0x2fdefa[_0x5d83('0x1d')][_0x5d83('0x4d')]['maxOffset']>0x1)return;if(!_0xa8a8cd['consumable'][_0x5d83('0xc0')](_0x2fdefa['item'],_0x1fed9a[_0x5d83('0xc')]))return;const _0x4a361a=_0xa8a8cd[_0x5d83('0x128')],_0x16b85f=_0xa8a8cd[_0x5d83('0x72')][_0x5d83('0x9')](_0x2fdefa[_0x5d83('0x97')]);_0x4a361a[_0x5d83('0xb3')](_0x16b85f,_0x4a361a[_0x5d83('0xfd')](_0x5d83('0x69')));});}),this[_0x5d83('0x30')][_0x5d83('0xed')][_0x5d83('0x4e')](_0x5d83('0x110'))['markerToData']({'model':_0x5d83('0xf4')}),this[_0x5d83('0x30')]['editing'][_0x5d83('0xc1')]['on'](_0x5d83('0x6e'),function(_0x13d508){const _0x32be94=_0x13d508['plugins']['get']('RevisionViewer');return(_0x18375e,_0x991a11,_0x3704e2)=>{const _0x2ba543=_0x991a11['markerName'][_0x5d83('0x125')](':')[0x1],_0x4fa652=_0x32be94[_0x5d83('0x8d')](_0x2ba543);if(!_0x4fa652)return null;const _0x4c97ad='add'==_0x4fa652[_0x5d83('0x76')]?_0x5d83('0x125'):_0x5d83('0x106');if(!_0x3704e2[_0x5d83('0x16')][_0x5d83('0x105')](_0x991a11[_0x5d83('0xd4')],_0x18375e[_0x5d83('0xc')]))return;const _0x127884=_0x991a11[_0x5d83('0xd4')][_0x5d83('0x57')](),_0x3a9af3=_0x991a11[_0x5d83('0xd4')]['start'],_0x49d85d=_0x13d508[_0x5d83('0x2a')][_0x5d83('0xec')];let _0x2ed830=null,_0x5d7927=null,_0x2a2e29=!0x1,_0x4e25b5=!0x1;for(const _0x3222eb of _0x127884){const _0x1a1c64=_0x3222eb[_0x5d83('0x1d')];_0x2a2e29=_0x2a2e29||_0x49d85d[_0x5d83('0x102')](_0x1a1c64);const _0x8af45e=_0x3704e2[_0x5d83('0x72')][_0x5d83('0xf5')](_0x1a1c64);if(_0x8af45e&&_0x8af45e[_0x5d83('0xe1')]('addHighlight'))return;_0x5d83('0x37')==_0x3222eb['type']&&(_0x49d85d[_0x5d83('0x42')](_0x1a1c64)&&!_0x49d85d['isLimit'](_0x1a1c64)&&(_0x1a1c64['nextSibling']||_0x3a9af3[_0x5d83('0x10a')]?_0x2ed830&&_0x2ed830['parent']==_0x1a1c64||(_0x2ed830=_0x1a1c64,_0x1529ed(_0x3222eb[_0x5d83('0x120')]),_0x4e25b5=!0x0):_0x5d7927=_0x5d7927||_0x3222eb[_0x5d83('0x120')]));}function _0x1529ed(_0x52f3ba){const _0x46627b=_0x3704e2[_0x5d83('0x128')][_0x5d83('0x5')](_0x5d83('0x69'),{'class':'ck-suggestion-marker-'+_0x4c97ad}),_0x503d25=_0x3704e2[_0x5d83('0x72')]['toViewPosition'](_0x52f3ba);_0x4fa652[_0x5d83('0x66')][_0x5d83('0x8c')]&&_0x3704e2[_0x5d83('0x128')][_0x5d83('0x123')](_0x5d83('0x94')+_0x4c97ad+_0x5d83('0x6d'),_0x46627b),_0x32be94[_0x5d83('0xdf')]==_0x4fa652&&_0x3704e2['writer']['addClass'](_0x5d83('0xa0'),_0x46627b),_0x3704e2['writer']['insert'](_0x503d25,_0x46627b),_0x3704e2[_0x5d83('0x72')][_0x5d83('0x8b')](_0x46627b,_0x991a11['markerName']);}_0x2a2e29||_0x4e25b5||!_0x5d7927||_0x1529ed(_0x5d7927);};}(this[_0x5d83('0x30')]),{'priority':'high'}),this[_0x5d83('0x30')]['editing'][_0x5d83('0xc1')]['on']('removeMarker:revision',(_0x7840b9,_0x537d82,_0x3be05d)=>{const _0x53dcac=_0x3be05d[_0x5d83('0x72')][_0x5d83('0xcc')](_0x537d82[_0x5d83('0x87')]);if(_0x53dcac)for(const _0x4168cb of _0x53dcac)(_0x4168cb[_0x5d83('0xa')](_0x5d83('0x43'))||_0x4168cb[_0x5d83('0xa')](_0x5d83('0x55')))&&(_0x3be05d['mapper'][_0x5d83('0x86')](_0x4168cb,_0x537d82[_0x5d83('0x87')]),_0x3be05d[_0x5d83('0x128')]['remove'](_0x4168cb));},{'priority':_0x5d83('0xab')}),this['editor'][_0x5d83('0x29')][_0x5d83('0xc1')]['on'](_0x5d83('0x6e'),(_0x1b4ba0,_0x2839b1,_0x57d8b7)=>{const _0x4f7e93=_0x2839b1['markerName'][_0x5d83('0x125')](':')[0x1],_0x59de2a=this[_0x5d83('0x8d')](_0x4f7e93);if(!_0x59de2a)return null;const _0x10a67a=_0x5d83('0x7c')==_0x59de2a[_0x5d83('0x76')]?'split':'merge';if(_0x57d8b7[_0x5d83('0x16')]['test'](_0x2839b1[_0x5d83('0xd4')],_0x1b4ba0['name']))for(const _0x51eb13 of _0x2839b1['markerRange'][_0x5d83('0x88')]()){if(!_0x51eb13['is'](_0x5d83('0xb2'),_0x5d83('0xf0')))continue;const _0x4932e4=_0x57d8b7['writer'][_0x5d83('0x5')](_0x5d83('0x69'),{'class':_0x5d83('0x94')+_0x10a67a}),_0x37dea5=_0x57d8b7[_0x5d83('0x72')][_0x5d83('0x3f')](this[_0x5d83('0x30')][_0x5d83('0x2a')][_0x5d83('0xfe')](_0x51eb13));_0x59de2a[_0x5d83('0x66')][_0x5d83('0x8c')]&&_0x57d8b7[_0x5d83('0x128')]['addClass'](_0x5d83('0x94')+_0x10a67a+_0x5d83('0x6d'),_0x4932e4),this[_0x5d83('0xdf')]==_0x59de2a&&_0x57d8b7['writer']['addClass'](_0x5d83('0xa0'),_0x4932e4),_0x57d8b7[_0x5d83('0x128')][_0x5d83('0x126')](_0x37dea5,_0x4932e4),_0x57d8b7[_0x5d83('0x72')][_0x5d83('0x8b')](_0x4932e4,_0x2839b1[_0x5d83('0x87')]);}},{'priority':_0x5d83('0xab')}),this[_0x5d83('0x30')][_0x5d83('0x2a')][_0x5d83('0x34')]['on']('change',()=>{this[_0x5d83('0x30')]['editing'][_0x5d83('0xa4')][_0x5d83('0x122')](_0x319dbd=>{for(const _0x10b319 of this[_0x5d83('0x30')][_0x5d83('0x2a')]['document'][_0x5d83('0x40')]()){const _0x1f6692=this[_0x5d83('0x30')][_0x5d83('0x2a')][_0x5d83('0x34')]['getRoot'](_0x10b319),_0x51b1b6=this[_0x5d83('0x30')]['editing'][_0x5d83('0xa4')][_0x5d83('0x34')][_0x5d83('0x1a')](_0x10b319);if(_0x51b1b6){const _0x55140f=_0x1f6692[_0x5d83('0x60')]('revisionHistoryAttachChange');if(_0x319dbd[_0x5d83('0x4c')](_0x5d83('0x24'),_0x51b1b6),_0x319dbd[_0x5d83('0x36')](_0x5d83('0xac'),_0x51b1b6),_0x319dbd[_0x5d83('0x36')](_0x5d83('0x113'),_0x51b1b6),_0x319dbd[_0x5d83('0x36')](_0x5d83('0xef'),_0x51b1b6),_0x55140f){const _0x2a6b79=this[_0x5d83('0x8d')](_0x55140f);if(!_0x2a6b79)return null;_0x319dbd[_0x5d83('0xad')](_0x5d83('0x24'),_0x55140f,_0x51b1b6),_0x319dbd[_0x5d83('0x123')](_0x5d83('0x78')+_0x2a6b79[_0x5d83('0x76')],_0x51b1b6),this[_0x5d83('0xdf')]==_0x2a6b79&&_0x319dbd['addClass'](_0x5d83('0xef'),_0x51b1b6);}}}});}),this[_0x5d83('0x30')][_0x5d83('0xed')]['for'](_0x5d83('0x6'))[_0x5d83('0x92')]({'view':_0x5d83('0xc7'),'model':_0x2281a7=>'revision-comment:'+_0x2281a7,'converterPriority':_0x5d83('0xd1')}),this[_0x5d83('0x30')][_0x5d83('0xed')]['for'](_0x5d83('0x6'))[_0x5d83('0x92')]({'view':_0x5d83('0xbe'),'model':_0x280472=>_0x5d83('0x2')+_0x280472,'converterPriority':_0x5d83('0xd1')}),this[_0x5d83('0x30')]['conversion'][_0x5d83('0x4e')](_0x5d83('0x110'))[_0x5d83('0x22')]({'model':'revision-suggestion','view':_0x2b60ad=>({'name':'suggestion:'+_0x2b60ad,'group':_0x5d83('0x31')}),'converterPriority':_0x5d83('0xd1')}),this[_0x5d83('0x30')][_0x5d83('0xed')][_0x5d83('0x4e')](_0x5d83('0x101'))[_0x5d83('0xfb')]({'model':_0x5d83('0x31'),'view':_0x38db12=>{const _0x3ecbb9=_0x38db12['markerName']['split'](':')[0x1];return'insertion'!=_0x3ecbb9&&_0x5d83('0xae')!=_0x3ecbb9?null:{'classes':[_0x5d83('0x9a'),_0x5d83('0xb8')+_0x3ecbb9]};}}),this[_0x5d83('0x30')][_0x5d83('0x29')][_0x5d83('0xc1')]['on'](_0x5d83('0x114'),et(this[_0x5d83('0x30')],_0x5d83('0x106')),{'priority':_0x5d83('0xab')}),this[_0x5d83('0x30')][_0x5d83('0x29')][_0x5d83('0xc1')]['on'](_0x5d83('0x5a'),et(this[_0x5d83('0x30')],_0x5d83('0x125')),{'priority':'high'}),this[_0x5d83('0x30')]['editing'][_0x5d83('0xc1')]['on'](_0x5d83('0x2f'),(_0x4a17b6,_0x237129,_0x5e18e5)=>{const _0x46e905=_0x5e18e5[_0x5d83('0x72')][_0x5d83('0xcc')](_0x237129['markerName']);if(_0x46e905)for(const _0x44582c of _0x46e905)_0x44582c['is'](_0x5d83('0x25'))&&(_0x5e18e5[_0x5d83('0x72')][_0x5d83('0x86')](_0x44582c,_0x237129[_0x5d83('0x87')]),_0x5e18e5[_0x5d83('0x128')][_0x5d83('0xee')](_0x44582c));},{'priority':_0x5d83('0xab')});}[_0x5d83('0x8d')](_0x29714b){return this[_0x5d83('0x39')][_0x5d83('0xca')](_0x29714b);}[_0x5d83('0xf2')](_0x2c84a6){return this[_0x5d83('0x54')]&&this[_0x5d83('0x54')][_0x5d83('0x3d')](),this[_0x5d83('0x54')]=new _0xe84d61(this[_0x5d83('0x30')][_0x5d83('0x59')],_0x2c84a6),this[_0x5d83('0x54')];}[_0x5d83('0xcf')](){this['editor'][_0x5d83('0x2a')][_0x5d83('0x34')][_0x5d83('0x108')][_0x5d83('0x13')](_0x5d83('0xf4')),this['on'](_0x5d83('0x50'),(_0x35dda3,_0x23ef9e,_0x263a17,_0x249a91)=>{_0x249a91&&this[_0x5d83('0x118')][_0x5d83('0xee')](_0x249a91),_0x263a17&&(this[_0x5d83('0x118')]['add']({'view':_0x263a17,'stackId':_0x5d83('0xd6'),'position':{'target':()=>{const _0x477f59=this['editor'][_0x5d83('0x29')],_0x51bf17=this[_0x5d83('0x8d')](_0x263a17[_0x5d83('0x64')]);let _0x229b0e;if(_0x51bf17[_0x5d83('0x66')][_0x5d83('0x4a')]){const _0x17109c=_0x477f59[_0x5d83('0xa4')][_0x5d83('0xbc')](_0x51bf17[_0x5d83('0xda')]);_0x229b0e=Array[_0x5d83('0xe2')](_0x17109c[_0x5d83('0x11e')]());}else{const _0x32511c=this[_0x5d83('0x30')][_0x5d83('0x2a')][_0x5d83('0x4b')][_0x5d83('0xca')](_0x5d83('0x48')+_0x263a17['changeId']);_0x229b0e=Array[_0x5d83('0xe2')](_0x477f59[_0x5d83('0x72')]['markerNameToElements'](_0x32511c[_0x5d83('0xc')]))[_0x5d83('0x103')](_0xc55e4b=>_0x477f59['view'][_0x5d83('0x10f')][_0x5d83('0x62')](_0xc55e4b))[_0x5d83('0x103')](_0x2858c1=>Array[_0x5d83('0xe2')](_0x2858c1['getClientRects']()))[_0x5d83('0xd7')]();}if(!this[_0x5d83('0x6a')])return _0x229b0e[0x0];return _0x229b0e['find'](_0x955293=>_0x955293[_0x5d83('0x3')]-0x3<=this[_0x5d83('0x6a')]['y']&&_0x955293[_0x5d83('0x2b')]+0x3>=this[_0x5d83('0x6a')]['y']&&_0x955293[_0x5d83('0x84')]-0x3<=this[_0x5d83('0x6a')]['x']&&_0x955293[_0x5d83('0xdd')]+0x3>=this[_0x5d83('0x6a')]['x'])||_0x229b0e[0x0];}}}),this[_0x5d83('0x118')][_0x5d83('0x1b')](_0x5d83('0xd6')));}),this['on'](_0x5d83('0xb7'),(_0x5d2772,_0x45c4e2,_0x4c7e03,_0x24919a)=>{this['activeView']=_0x4c7e03?this[_0x5d83('0xf2')](_0x4c7e03):null,this['editor'][_0x5d83('0x2a')][_0x5d83('0x122')](()=>{const _0xc67b08=this['editor'][_0x5d83('0x29')];_0x24919a&&(_0x24919a[_0x5d83('0x66')][_0x5d83('0x4a')]?_0xc67b08[_0x5d83('0xa4')]['change'](_0x291c39=>{_0x291c39['removeClass'](_0x5d83('0xef'),_0xc67b08[_0x5d83('0xa4')][_0x5d83('0x34')][_0x5d83('0x1a')](_0x24919a[_0x5d83('0xda')]));}):_0xc67b08[_0x5d83('0xc2')](_0x5d83('0x48')+_0x24919a['id'])),_0x4c7e03&&(_0x4c7e03[_0x5d83('0x66')]['isOnRoot']?_0xc67b08['view']['change'](_0x240ff3=>{_0x240ff3[_0x5d83('0x123')]('ck-revision-history-root--active',_0xc67b08[_0x5d83('0xa4')][_0x5d83('0x34')]['getRoot'](_0x4c7e03['rootName']));}):_0xc67b08[_0x5d83('0xc2')]('revision:'+_0x4c7e03['id']));});}),this[_0x5d83('0x12')](this[_0x5d83('0x30')][_0x5d83('0x29')][_0x5d83('0xa4')][_0x5d83('0x34')],'mouseover',(_0x26abaf,_0x132121)=>{if(this[_0x5d83('0xdf')])return;const _0x3c4110=this['_findChangeIdFromDomTarget'](_0x132121[_0x5d83('0x109')]),_0x305b29=this['_changeIdToChange']['get'](_0x3c4110);_0x305b29?(this[_0x5d83('0x6a')]={'x':_0x132121[_0x5d83('0xf8')]['x'],'y':_0x132121['domEvent']['y']},this[_0x5d83('0x68')]=this[_0x5d83('0xf2')](_0x305b29)):(this[_0x5d83('0x6a')]=null,this[_0x5d83('0x68')]=null);}),this[_0x5d83('0x12')](this[_0x5d83('0x30')][_0x5d83('0x29')][_0x5d83('0xa4')][_0x5d83('0x34')],_0x5d83('0x47'),(_0xaf45f,_0x2bfbdd)=>{const _0x4e46bc=this[_0x5d83('0xdb')](_0x2bfbdd[_0x5d83('0x109')]),_0xf5086d=this[_0x5d83('0x39')]['get'](_0x4e46bc);_0xf5086d?(this[_0x5d83('0x6a')]={'x':_0x2bfbdd[_0x5d83('0xf8')]['x'],'y':_0x2bfbdd['domEvent']['y']},_0xf5086d===this[_0x5d83('0xdf')]?this[_0x5d83('0x118')][_0x5d83('0xb0')]():this[_0x5d83('0xdf')]=_0xf5086d):(this[_0x5d83('0x6a')]=null,this[_0x5d83('0xdf')]=null);});}[_0x5d83('0xdb')](_0x27a793){do{const _0x182aec=_0x27a793[_0x5d83('0x60')](_0x5d83('0x24'));if(_0x182aec)return _0x182aec;_0x27a793=_0x27a793[_0x5d83('0x4d')];}while(_0x27a793);return null;}['_cleanMarkers'](){this[_0x5d83('0x30')][_0x5d83('0x2a')][_0x5d83('0x122')](_0xb0575=>{for(const _0x1d23c1 of this[_0x5d83('0x30')][_0x5d83('0x2a')]['markers'])_0xb0575['removeMarker'](_0x1d23c1);});}}function et(_0x198a95,_0x2873f1){return(_0x47f5f0,_0x1af346,_0x57b7ee)=>{if(!_0x57b7ee[_0x5d83('0x16')][_0x5d83('0x105')](_0x1af346[_0x5d83('0xd4')],_0x47f5f0[_0x5d83('0xc')]))return;const _0x353d3e=_0x1af346[_0x5d83('0xd4')][_0x5d83('0x57')](),_0x4d0cd6=_0x1af346[_0x5d83('0xd4')][_0x5d83('0xcb')],_0x5e0338=_0x198a95[_0x5d83('0x2a')][_0x5d83('0xec')];let _0x2725b4=null,_0x58bb7a=null,_0x203387=!0x1,_0x5d8597=!0x1;for(const _0xb923c1 of _0x353d3e){const _0x4995da=_0xb923c1[_0x5d83('0x1d')];_0x203387=_0x203387||_0x5e0338[_0x5d83('0x102')](_0x4995da);const _0x1fc33f=_0x57b7ee[_0x5d83('0x72')]['toViewElement'](_0x4995da);if(_0x1fc33f&&_0x1fc33f[_0x5d83('0xe1')](_0x5d83('0x121')))return;_0x5d83('0x37')==_0xb923c1['type']&&(_0x5e0338[_0x5d83('0x42')](_0x4995da)&&!_0x5e0338['isLimit'](_0x4995da)&&(_0x4995da[_0x5d83('0xd9')]||_0x4d0cd6[_0x5d83('0x10a')]?_0x2725b4&&_0x2725b4[_0x5d83('0x4d')]==_0x4995da||(_0x2725b4=_0x4995da,_0x3f3836(_0xb923c1['previousPosition']),_0x5d8597=!0x0):_0x58bb7a=_0x58bb7a||_0xb923c1[_0x5d83('0x120')]));}function _0x3f3836(_0x2fcb46){const _0x4450c4=_0x57b7ee[_0x5d83('0x72')][_0x5d83('0x3f')](_0x2fcb46),_0x55382e=_0x57b7ee[_0x5d83('0x128')][_0x5d83('0x5')](_0x5d83('0x69'),{'class':'ck-suggestion-preview-marker-'+_0x2873f1});_0x57b7ee[_0x5d83('0x128')][_0x5d83('0x126')](_0x4450c4,_0x55382e),_0x57b7ee[_0x5d83('0x72')][_0x5d83('0x8b')](_0x55382e,_0x1af346['markerName']);}_0x203387||_0x5d8597||!_0x58bb7a||_0x3f3836(_0x58bb7a);};}export class RestoreRevisionCommand extends _0x1008a0{constructor(_0x11c266){super(_0x11c266);const _0x313d05=_0x11c266[_0x5d83('0xea')][_0x5d83('0xca')](d);this[_0x5d83('0x80')]=!0x1,this[_0x5d83('0x12')](_0x313d05,'change:isReady',()=>this[_0x5d83('0x67')]()),this[_0x5d83('0x12')](_0x313d05,_0x5d83('0xa1'),()=>this[_0x5d83('0x67')]());}['execute'](){const _0x191786=this[_0x5d83('0x30')],_0xc06fa5=_0x191786['plugins'][_0x5d83('0xca')](d),_0x351120=_0xc06fa5[_0x5d83('0x14')]?_0xc06fa5['diff']['newRevisionId']:null;_0x191786[_0x5d83('0x52')][_0x5d83('0xca')]('revisionHistory')[_0x5d83('0x70')](_0x351120);}[_0x5d83('0x67')](){const {isReady:_0x8dda32,isEnabled:_0x189aa8}=this[_0x5d83('0x30')]['plugins'][_0x5d83('0xca')](d);this['isEnabled']=_0x8dda32&&_0x189aa8;}}export class ShowChangeCommand extends _0x1008a0{constructor(_0x10c0b8,{direction:_0x318da5}){super(_0x10c0b8);const _0x2bfb08=_0x10c0b8[_0x5d83('0xea')]['get'](d);this[_0x5d83('0x80')]=!0x1,this['_step']=_0x5d83('0x49')===_0x318da5?0x1:-0x1,this[_0x5d83('0x12')](_0x2bfb08,_0x5d83('0xa3'),()=>this['refresh']()),this[_0x5d83('0x12')](_0x2bfb08,'change:isEnabled',()=>this['refresh']()),this[_0x5d83('0x12')](_0x2bfb08,_0x5d83('0xb7'),()=>this[_0x5d83('0x67')]());}[_0x5d83('0x11b')](){const _0x4d1f1e=this[_0x5d83('0x30')],_0x27bd67=_0x4d1f1e[_0x5d83('0xea')][_0x5d83('0xca')](d),{isNavigationMode:_0x2afa3d,currentChangeNumber:_0x43de28}=_0x27bd67;let _0x2b5271;if(_0x27bd67[_0x5d83('0xdf')]=_0x2afa3d?_0x27bd67['diff'][_0x5d83('0xb')]['get'](_0x43de28+this[_0x5d83('0x81')]):_0x27bd67[_0x5d83('0x127')][_0x5d83('0xb')][_0x5d83('0x32')],_0x27bd67['activeChange'][_0x5d83('0x66')][_0x5d83('0x4a')])_0x2b5271=_0x4d1f1e['editing'][_0x5d83('0xa4')][_0x5d83('0xbc')](_0x27bd67[_0x5d83('0xdf')][_0x5d83('0xda')]);else{const _0x4e26db=_0x4d1f1e[_0x5d83('0x2a')][_0x5d83('0x4b')][_0x5d83('0xca')](_0x5d83('0x48')+_0x27bd67[_0x5d83('0xdf')]['id']);_0x2b5271=_0xa03dff(_0x4d1f1e['editing'],_0x4e26db);}_0x2046aa({'target':_0x2b5271,'viewportOffset':0x28});}[_0x5d83('0x67')](){const {isNavigationMode:_0x1aaa7d,currentChangeNumber:_0x20b442,numberOfChanges:_0x3e857c,isReady:_0x3efa04,isEnabled:_0x376e74}=this[_0x5d83('0x30')][_0x5d83('0xea')][_0x5d83('0xca')](d);this['isEnabled']=!!(_0x376e74&&_0x3efa04&&_0x3e857c)&&(!_0x1aaa7d||(0x1===this[_0x5d83('0x81')]?_0x20b442<_0x3e857c-0x1:_0x20b442>0x0));}}