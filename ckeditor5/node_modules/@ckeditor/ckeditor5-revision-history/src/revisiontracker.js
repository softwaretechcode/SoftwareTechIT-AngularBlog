/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x2b01=['_update','map','stickiness','default','getNodeByPath','currentRevision','_createFromRanges','_baseRoots','revision-end','move','_getPreviousFrom','_loadedStateData','marker','vid','setSource','_bufferedUpdates','_continueCurrentRevision','_touchedRoots','_fixRange','isEqual','_initialRevisionId','config','update','getChildren','RealTimeCollaborationClient','_prepareViewToSave','Initial\x20revision','$graveyard','_removeMetaData','revision:','item','_makeRevision','_getVidAttributeName','for','getOperation','attachChange','_lastTo','getRootNames','size','getTime','_authorId','attributes','_createInitialRevision','howMany','position','model','addRevisionData','split','_reset','baseVersion','_addPendingAction','creatorId','_generateTape','affectsData','push','authorsIds','_handleMarkerOperation','createRevision','_cloneOperation','newRange','_handleRootOperation','processor','insert','source','_isAttached','_handleSplitOperation','_getState','max','_getViewJson','NEGATIVE_INFINITY','_removeRevisionMarkers','resolve','_processRootBeforeSave','childCount','_bufferUpdate','find','add','_clone','paragraph','sourcePosition','from','revision-start','collaboration.channelId','Users','sendBufferedUpdates','_handleRootAttributeOperation','useFillerType','initialData','previousPosition','keys','requires','_handleMergeOperation','newValue','vid_end','elementStart','isEnabled','children','_handleInsertOperation','_createCurrentRevision','view','getRange','$text','createdAt','dataDowncast','repository','clone','_baseRootsAttributes','fromVersion','element','finally','rootsAttributes','_appendChild','fromEntries','getAncestors','set','splitPosition','getRoot','remove','getRevisionRootsAttributes','length','_revisionId','createRange','bind','creator','RevisionTracker','_calculateMetaData','init','_idsRoots','editor','start','detachRoot','document','getLatestVersion','addRoot','buildRevisionData','_loadState','includes','getUser','reinsert','removeRootAttribute','forEach','upcast','_pendingAction','_startingRevisionId','editor-initial-data-replaced-with-revision-data','_applyOperations','tableCell','_getFromVersion','_isPendingUpdate','_makeModelFromViewString','_setAttribute','_makeIdsRoot','plugins','_findInsertionIndex','_transformMarkers','ready','isAttached','roots','adapter','getChild','toView','PendingActions','dataToMarker','root','_lastFrom','diffData','_loadRevisionData','editing','getAttribute','setRevisionData','userId','oldRange','delete','_isInit','getCurrentRevisionId','_copyMarkers','toVersion','attributesAfter','_touched','_fixPosition','data','PENDING_ACTION_REVISION_HISTORY','getRevision','_setConversion','slice','offsetSize','merge','key','_insertChild','vid_start','_touchedMarkers','_handleOperation','_diffRootsAttributes','parse','markerToData','_diffRoots','name','deletions','_saveMetaData','has','_startingVersion','loadState','then','changeRootAttribute','getRevisionDocumentData','clear','_baseIdsRoots','_execute','_savedMetaData','type','insertions','RevisionsRepository','toData','authors','shift','locale','getWalker','graveyardPosition','_getBaseVids','range','_markChanges','insertion','getRevisions','_operations','version','_markers','createPositionBefore','deletion','startsWith','markers','_removePendingAction','elementEnd','isReady','reInit','_revisionDataBuilder','_source','pluginName','isAdd','getAttributes','addRevision','getData','rootName','_replaceEditorDataWithRevisionData','_fixOperation','addRootAttribute','trim','path','end','parent','filter','_handleMoveOperation','values','history','reverse','get','offset','documentFragment','createPositionFromPath','string'];(function(_0x1274fb,_0x2b01af){const _0xe38960=function(_0x483bbe){while(--_0x483bbe){_0x1274fb['push'](_0x1274fb['shift']());}};_0xe38960(++_0x2b01af);}(_0x2b01,0xb1));const _0xe389=function(_0x1274fb,_0x2b01af){_0x1274fb=_0x1274fb-0x0;let _0xe38960=_0x2b01[_0x1274fb];return _0xe38960;};import{Users as _0x17d52b}from'ckeditor5-collaboration/src/collaboration-core';import{Plugin as _0x17299e,PendingActions as _0x2664ba}from'ckeditor5/src/core';import{logWarning as _0x58b9bf,uid as _0x32417b}from'ckeditor5/src/utils';import{Position as _0xcad0e,Range as _0x57b050,Element as _0x158621,DocumentFragment as _0x1576b0,ViewText as _0x105f45,ViewElement as _0x5dcad1,ViewContainerElement as _0x5f4c67,ViewAttributeElement as _0x30309c,ViewEmptyElement as _0x3159de,ViewRawElement as _0x41b9c9,ViewUIElement as _0x2622d0,ViewDocumentFragment as _0x4dc568}from'ckeditor5/src/engine';import _0xade6f9 from'./revisionsrepository';import{getTranslation as _0x280d66}from'./utils/common-translations';import{cloneDeep as _0x8b954a,isEqual as _0x9f05e}from'lodash-es';const B={'c':_0x5f4c67,'a':_0x30309c,'e':_0x3159de,'r':_0x41b9c9,'u':_0x2622d0};export default class l extends _0x17299e{static get[_0xe389('0x3b')](){return _0xe389('0xce');}static get[_0xe389('0xac')](){return[_0x17d52b,_0xade6f9,_0x2664ba];}constructor(_0x5e0b81){super(_0x5e0b81),this[_0xe389('0xf0')]=null,this[_0xe389('0x57')]=null,this['_revisionDataBuilder']=new H(this['editor']),this[_0xe389('0x66')]=this['editor']['config'][_0xe389('0x4d')]('collaboration.channelId')||'initial',this['_bufferedUpdates']=new Map(),this[_0xe389('0x5d')]=null;const _0x315d6a=_0x32417b();this[_0xe389('0x3a')]={'history':this[_0xe389('0xd2')][_0xe389('0x7f')]['document']['history'],'getLatestVersion':()=>Promise[_0xe389('0x99')](this['editor'][_0xe389('0x7f')][_0xe389('0xd5')][_0xe389('0x2f')]),'getCurrentRevisionId':()=>_0x315d6a},this[_0xe389('0xc4')](_0xe389('0x37'),!0x1),this[_0xe389('0xc4')](_0xe389('0xb1'),!0x0),this[_0xe389('0xc4')]('_isPendingUpdate',!0x1),this[_0xe389('0xd2')][_0xe389('0x67')]['define']('revisionHistory.resumeUnsavedRevision',!0x0),this[_0xe389('0xd2')]['conversion'][_0xe389('0x73')](_0xe389('0xdf'))[_0xe389('0xf4')]({'view':'revision'});}[_0xe389('0xd0')](){this[_0xe389('0xba')]=this['editor'][_0xe389('0xea')][_0xe389('0x4d')](_0xe389('0x22')),this[_0xe389('0x6')](),this['editor'][_0xe389('0x3')]['on'](_0xe389('0xed'),()=>{const _0x9d7856=this[_0xe389('0xba')][_0xe389('0x5')](0x0),_0x561989=_0x9d7856&&null===_0x9d7856[_0xe389('0xcd')]?_0x9d7856:null;if(this[_0xe389('0x62')]=!!_0x561989&&this[_0xe389('0xd2')][_0xe389('0x67')][_0xe389('0x4d')]('revisionHistory.resumeUnsavedRevision'),this[_0xe389('0xd2')][_0xe389('0xea')]['has'](_0xe389('0x6a'))){const _0xb4e19b=this['_source'][_0xe389('0x100')](),_0x10b8b4=this['repository'][_0xe389('0x5')](_0xb4e19b);if(_0x10b8b4)this[_0xe389('0x17')]=_0x10b8b4[_0xe389('0xbd')],this[_0xe389('0x62')]=!0x1;else{const _0x499ed0=this[_0xe389('0x3a')][_0xe389('0x4b')][_0xe389('0x2e')]['find'](_0x1f22fa=>!_0x1f22fa[_0xe389('0xff')]),_0x104ddb=_0x499ed0?_0x499ed0[_0xe389('0x83')]:this[_0xe389('0x3a')][_0xe389('0x4b')][_0xe389('0x2f')];_0x9d7856?(_0x9d7856[_0xe389('0x102')]<_0x104ddb&&_0x9d7856[_0xe389('0x52')]({'toVersion':_0x104ddb}),this[_0xe389('0x62')]?(this[_0xe389('0x3a')][_0xe389('0x100')]=()=>_0x561989['id'],this[_0xe389('0x17')]=_0x561989[_0xe389('0xbd')]):(this[_0xe389('0x17')]=_0x9d7856['toVersion'],this[_0xe389('0x62')]=!0x1)):(this[_0xe389('0x17')]=_0x104ddb,this[_0xe389('0x62')]=!0x1);}}else _0x561989&&(this[_0xe389('0xd2')]['model']['document'][_0xe389('0x4b')][_0xe389('0x2f')]=Math[_0xe389('0x95')](_0x561989[_0xe389('0x102')],this[_0xe389('0xd2')][_0xe389('0x7f')][_0xe389('0xd5')][_0xe389('0x4b')][_0xe389('0x2f')]),_0x561989['fromVersion']===_0x561989['toVersion']?(0x0!==_0x561989[_0xe389('0xbd')]&&(this[_0xe389('0x3a')][_0xe389('0x100')]=()=>_0x561989['id']),this[_0xe389('0x62')]=!0x1):this['_continueCurrentRevision']&&(this[_0xe389('0x3a')]['getCurrentRevisionId']=()=>_0x561989['id'],this[_0xe389('0x17')]=_0x561989[_0xe389('0xbd')])),this[_0xe389('0x62')]||(this[_0xe389('0x17')]=this[_0xe389('0xd2')][_0xe389('0x7f')][_0xe389('0xd5')][_0xe389('0x2f')]);this[_0xe389('0x39')][_0xe389('0xd0')](this[_0xe389('0x3a')][_0xe389('0x4b')]),this[_0xe389('0x7c')](this[_0xe389('0x17')]),this[_0xe389('0xb4')](this[_0xe389('0x17')]),this[_0xe389('0xf0')]&&this[_0xe389('0xa6')]();}),this[_0xe389('0xcc')](_0xe389('0x37'))['to'](this,_0xe389('0xe6'),_0x568b61=>!_0x568b61);}async['afterInit'](){if(this[_0xe389('0xba')]['length']>0x0){const _0x3a479b=this[_0xe389('0xba')][_0xe389('0x5')](0x0),_0x1f5734=await this['getRevisionDocumentData'](_0x3a479b),_0x5cc22f=await this[_0xe389('0xc8')](_0x3a479b);this[_0xe389('0x41')](_0x1f5734,_0x5cc22f);}}[_0xe389('0x60')](_0x39addf){this[_0xe389('0x3a')]=_0x39addf;}async[_0xe389('0x68')](){const _0x4c4730=await this['_source'][_0xe389('0xd6')]();if(_0x4c4730>this[_0xe389('0x57')][_0xe389('0x102')]){await this['_loadState']();const _0x3893aa=this[_0xe389('0xd8')]({'revision':this[_0xe389('0x57')],'to':_0x4c4730});_0x3893aa[_0xe389('0x24')]=_0x3893aa[_0xe389('0x89')][_0xe389('0x53')](_0x5b46d6=>this[_0xe389('0xd2')][_0xe389('0xea')][_0xe389('0x4d')](_0xe389('0xa5'))[_0xe389('0xdb')](_0x5b46d6)),this[_0xe389('0x57')][_0xe389('0x52')](_0x3893aa);}}async[_0xe389('0xd9')](){this['_continueCurrentRevision']&&!this[_0xe389('0x5d')]&&(await this[_0xe389('0xf8')](this[_0xe389('0x57')]),this['_revisionDataBuilder'][_0xe389('0x18')](this[_0xe389('0x57')]),this[_0xe389('0x5d')]={'fromVersion':this[_0xe389('0x57')][_0xe389('0xbd')],'authors':this[_0xe389('0x57')]['authors'][_0xe389('0x7')]()});}async['saveRevision'](_0x1eada0={},_0x11a0f5=null){const _0x3f9c93=[];await this[_0xe389('0xd9')](),this[_0xe389('0x62')]=!0x1,_0x11a0f5>this[_0xe389('0x57')]['toVersion']&&(_0x11a0f5=null),null===_0x11a0f5&&(_0x11a0f5=await this[_0xe389('0x3a')][_0xe389('0xd6')]());const _0x1d7160=this[_0xe389('0xe5')](_0x11a0f5),_0x3ee97c=this[_0xe389('0xd8')]({'from':_0x1d7160,'to':_0x11a0f5});if(this['currentRevision'][_0xe389('0x102')]<_0x11a0f5){const _0x42d8f7=this[_0xe389('0xd8')]({'revision':this[_0xe389('0x57')],'from':_0x11a0f5,'to':_0x11a0f5});_0x42d8f7[_0xe389('0x24')]=[],_0x42d8f7['authorsIds']=[],_0x42d8f7['id']=this['currentRevision']['id'],this[_0xe389('0x57')][_0xe389('0x52')](_0x42d8f7,!0x0),delete _0x42d8f7[_0xe389('0x24')],_0x3f9c93[_0xe389('0x88')](_0x42d8f7);}_0x1eada0[_0xe389('0x85')]=this[_0xe389('0xd2')][_0xe389('0xea')][_0xe389('0x4d')](_0xe389('0xa5'))['me']['id'],_0x1eada0[_0xe389('0x13')]=_0x1eada0[_0xe389('0x13')]||null,_0x1eada0['id']=_0x1eada0['id']||_0x32417b(),_0x1eada0={..._0x1eada0,..._0x3ee97c};const _0x4e79da=this[_0xe389('0x80')](_0x1eada0);_0x3f9c93[_0xe389('0x88')](_0x1eada0);const _0x58c6d0=this['repository']['getIndex'](_0x4e79da);if(0x0!==_0x58c6d0){const _0x5299b3=this[_0xe389('0xba')][_0xe389('0x5')](_0x58c6d0-0x1);if(_0x5299b3[_0xe389('0xbd')]!==_0x11a0f5){const _0x30ad86=this[_0xe389('0x39')][_0xe389('0x3f')](_0x11a0f5,_0x5299b3['toVersion']),_0x1193f5={'id':_0x5299b3['id'],'diffData':_0x30ad86[_0xe389('0xf7')],'authorsIds':_0x30ad86['authorsIds'],'authors':_0x30ad86[_0xe389('0x89')][_0xe389('0x53')](_0x144ebc=>this[_0xe389('0xd2')][_0xe389('0xea')][_0xe389('0x4d')]('Users')[_0xe389('0xdb')](_0x144ebc)),'fromVersion':_0x11a0f5};_0x5299b3===this[_0xe389('0x57')]&&(_0x1193f5[_0xe389('0xb8')]=new Date(_0x1eada0[_0xe389('0xb8')][_0xe389('0x79')]()+0xa)),_0x5299b3[_0xe389('0x52')](_0x1193f5,!0x0),delete _0x1193f5[_0xe389('0x24')],_0x3f9c93[_0xe389('0x88')](_0x1193f5);}}if(this[_0xe389('0xf0')]){for(const _0x21d029 of _0x3f9c93)this[_0xe389('0x9c')](_0x21d029['id'],_0x21d029,!0x0);this[_0xe389('0xa6')]();}return _0x4e79da;}[_0xe389('0x80')](_0x1ba137){const _0x5979a3=this[_0xe389('0xba')][_0xe389('0x8b')](_0x1ba137);return this[_0xe389('0xf0')]&&_0x5979a3['on'](_0xe389('0x52'),(_0x1683a3,_0x3c4ba9,_0x56a7d0)=>{_0x56a7d0||(this[_0xe389('0x9c')](_0x3c4ba9['id'],_0x3c4ba9,!0x0),this[_0xe389('0xa6')]());}),this[_0xe389('0xba')][_0xe389('0x3e')](_0x5979a3,this[_0xe389('0xeb')](_0x5979a3)),_0x5979a3;}async[_0xe389('0x1b')](_0x2f4ce2){await this[_0xe389('0xf8')](_0x2f4ce2);const _0x2bc07f={};for(const _0x4d0cd1 in _0x2f4ce2[_0xe389('0xf7')]){if(_0x2f4ce2[_0xe389('0xf7')][_0x4d0cd1][_0xe389('0x75')]&&!_0x2f4ce2[_0xe389('0xf7')][_0x4d0cd1]['attachChange']['isAttached'])continue;const _0x481492=this['_removeRevisionMarkers'](JSON[_0xe389('0x10')](_0x2f4ce2[_0xe389('0xf7')][_0x4d0cd1]['insertions'])),_0x47c47d=this[_0xe389('0xd2')][_0xe389('0xf9')][_0xe389('0xb5')][_0xe389('0xd5')],_0x492459=new _0x4dc568(_0x47c47d,_0x481492['map'](_0x30a771=>J(_0x30a771,this['editor'])));this[_0xe389('0xd2')][_0xe389('0x3')][_0xe389('0x8f')][_0xe389('0xa8')]('marked'),_0x2bc07f[_0x4d0cd1]=this['editor'][_0xe389('0x3')][_0xe389('0x8f')][_0xe389('0x23')](_0x492459),this[_0xe389('0xd2')][_0xe389('0x3')][_0xe389('0x8f')]['useFillerType'](_0xe389('0x55'));}return _0x2bc07f;}async['getRevisionRootsAttributes'](_0x39b1af){await this[_0xe389('0xf8')](_0x39b1af);const _0x3e17f7={};for(const _0x288ed7 in _0x39b1af[_0xe389('0xf7')])_0x39b1af[_0xe389('0xf7')][_0x288ed7]['attachChange']&&!_0x39b1af[_0xe389('0xf7')][_0x288ed7]['attachChange'][_0xe389('0xee')]||(_0x3e17f7[_0x288ed7]=_0x39b1af['diffData'][_0x288ed7][_0xe389('0x0')]||{});return _0x3e17f7;}[_0xe389('0xa6')](){if(0x0===this[_0xe389('0x61')]['size'])return;if(this[_0xe389('0xe6')])return;let _0x4fef4d=Array[_0xe389('0xa2')](this[_0xe389('0x61')][_0xe389('0x4a')]());this[_0xe389('0x61')][_0xe389('0x1c')]();for(let _0x5c1580=0x0;_0x5c1580<_0x4fef4d[_0xe389('0xc9')];_0x5c1580++){const _0x11e913=_0x4fef4d[_0x5c1580];let _0x76b7c7=!0x1;for(const _0x1cd5d4 of Object['keys'](_0x11e913))void 0x0===_0x11e913[_0x1cd5d4]?delete _0x11e913[_0x1cd5d4]:'id'!==_0x1cd5d4&&(_0x76b7c7=!0x0);_0x76b7c7||(_0x4fef4d[_0x5c1580]=null);}if(_0x4fef4d=_0x4fef4d['filter'](_0x32c2da=>null!==_0x32c2da),!_0x4fef4d['length'])return;for(let _0x5167d8=0x0;_0x5167d8<_0x4fef4d['length'];_0x5167d8++){const _0x4d6d6a=_0x4fef4d[_0x5167d8];void 0x0!==_0x4d6d6a[_0xe389('0xbd')]&&void 0x0===_0x4d6d6a[_0xe389('0x102')]&&(_0x4d6d6a['toVersion']=this[_0xe389('0xba')]['getRevision'](_0x4d6d6a['id'])[_0xe389('0x102')]),void 0x0!==_0x4d6d6a['toVersion']&&void 0x0===_0x4d6d6a[_0xe389('0xbd')]&&(_0x4d6d6a['fromVersion']=this[_0xe389('0xba')][_0xe389('0x5')](_0x4d6d6a['id'])[_0xe389('0xbd')]);}const _0x35c3cd=this[_0xe389('0xd2')][_0xe389('0x67')]['get'](_0xe389('0xa4'));this[_0xe389('0xe6')]=!0x0,this[_0xe389('0x84')](),this[_0xe389('0xf0')]['updateRevisions'](_0x4fef4d,_0x35c3cd)[_0xe389('0xbf')](()=>{this[_0xe389('0xe6')]=!0x1;})[_0xe389('0x19')](_0x793eec=>{if(_0x793eec)for(const _0x860ab6 of _0x793eec)this[_0xe389('0xfb')]({'id':_0x860ab6['id'],'createdAt':_0x860ab6[_0xe389('0xb8')]});this[_0xe389('0x35')](),this[_0xe389('0xa6')]();});}['_replaceEditorDataWithRevisionData'](_0x3884f4,_0x20ff6a){let _0x1e15bf=this[_0xe389('0xd2')][_0xe389('0x67')]['get']('initialData'),_0x4ec2da=this[_0xe389('0xd2')][_0xe389('0x67')][_0xe389('0x4d')](_0xe389('0xc0'));if(void 0x0===_0x1e15bf){_0x1e15bf={};for(const _0x498983 of this[_0xe389('0xd2')]['model'][_0xe389('0xd5')][_0xe389('0x77')]())_0x1e15bf[_0x498983]='';}if(_0xe389('0x51')==typeof _0x1e15bf&&(_0x1e15bf={'main':_0x1e15bf}),void 0x0===_0x4ec2da){_0x4ec2da={};for(const _0x28be12 of this[_0xe389('0xd2')]['model'][_0xe389('0xd5')][_0xe389('0x77')]())_0x4ec2da[_0x28be12]={};}let _0x4d12f5=!0x1;const _0x1279f4=Object[_0xe389('0xab')](_0x1e15bf),_0x1cc9ba=Object['keys'](_0x3884f4);for(const _0x49d92e of _0x1279f4){if(_0x1e15bf[_0x49d92e]!==_0x3884f4[_0x49d92e]&&''!==_0x1e15bf[_0x49d92e][_0xe389('0x44')]()){_0x4d12f5=!0x0;break;}if(!_0x9f05e(_0x4ec2da[_0x49d92e],_0x20ff6a[_0x49d92e])&&Object[_0xe389('0xab')](_0x4ec2da[_0x49d92e])[_0xe389('0xc9')]>0x0){_0x4d12f5=!0x0;break;}}_0x4d12f5||(_0x4d12f5=_0x1cc9ba['some'](_0x402a46=>!this[_0xe389('0xd2')][_0xe389('0x7f')][_0xe389('0xd5')][_0xe389('0xc6')](_0x402a46))),_0x4d12f5&&_0x58b9bf(_0xe389('0xe2'),{'editorData':_0x1e15bf,'editorRootsAttributes':_0x4ec2da,'revisionData':_0x3884f4,'revisionRootsAttributes':_0x20ff6a}),this[_0xe389('0xd2')]['config']['set'](_0xe389('0xa9'),_0x3884f4),this['editor'][_0xe389('0x67')][_0xe389('0xc4')](_0xe389('0xc0'),_0x20ff6a);}[_0xe389('0x84')](){if(!this[_0xe389('0xe0')]){const _0x433953=this[_0xe389('0xd2')][_0xe389('0xea')][_0xe389('0x4d')](_0xe389('0xf3'));this[_0xe389('0xe0')]=_0x433953[_0xe389('0x9e')](_0x280d66(this[_0xe389('0xd2')][_0xe389('0x26')],_0xe389('0x4')));}}[_0xe389('0x35')](){this[_0xe389('0xe0')]&&(this[_0xe389('0xd2')][_0xe389('0xea')][_0xe389('0x4d')]('PendingActions')['remove'](this['_pendingAction']),this[_0xe389('0xe0')]=null);}['_findInsertionIndex'](_0x5bcf5a){const _0x1ce4ba=this[_0xe389('0xba')][_0xe389('0x2d')]();_0x1ce4ba[_0xe389('0x4c')]();let _0xfe37a=0x0;for(;_0xfe37a<_0x1ce4ba[_0xe389('0xc9')];){const _0x460ea9=_0x1ce4ba[_0xfe37a];if(_0x460ea9===this[_0xe389('0x57')]){_0xfe37a++;continue;}if(_0x460ea9['id']===this[_0xe389('0x66')])break;const _0x125efd=_0x5bcf5a['toVersion']-_0x460ea9['toVersion']||_0x5bcf5a[_0xe389('0xbd')]-_0x460ea9['fromVersion'];if(_0x125efd>0x0)break;if(_0x125efd<0x0)_0xfe37a++;else{if(!_0x5bcf5a['creator']&&_0x460ea9[_0xe389('0xcd')])break;if(_0x460ea9[_0xe389('0xcd')]||!_0x5bcf5a[_0xe389('0xcd')]){if(_0x5bcf5a[_0xe389('0xb8')]>_0x460ea9[_0xe389('0xb8')])break;_0xfe37a++;}else _0xfe37a++;}}return _0xfe37a;}[_0xe389('0xfb')](_0xabff73){const _0x47b00b=this['repository'][_0xe389('0x5')](_0xabff73['id']);if(_0xabff73[_0xe389('0xb8')]&&(_0xabff73[_0xe389('0xb8')]=new Date(_0xabff73[_0xe389('0xb8')])),_0xabff73[_0xe389('0x89')]){const _0x27f289=this[_0xe389('0xd2')][_0xe389('0xea')][_0xe389('0x4d')]('Users');_0xabff73['authors']=_0xabff73[_0xe389('0x89')]['map'](_0x4bf83c=>_0x27f289['getUser'](_0x4bf83c));}_0x47b00b[_0xe389('0x52')](_0xabff73,!0x0);}['buildRevisionData']({revision:_0xde5719=null,from:_0x35d1db=null,to:_0x91f169=null}){_0x35d1db=null!==_0x35d1db?_0x35d1db:_0xde5719[_0xe389('0xbd')],_0x91f169=null!==_0x91f169?_0x91f169:_0xde5719['toVersion'];const _0x236511=this[_0xe389('0x39')][_0xe389('0x3f')](_0x35d1db,_0x91f169),_0x3be82f={'diffData':_0x236511[_0xe389('0xf7')],'authorsIds':_0x236511[_0xe389('0x89')],'fromVersion':_0x35d1db,'toVersion':_0x91f169};if(!_0xde5719||_0x91f169!==_0xde5719[_0xe389('0x102')]){const _0x24394b=_0x91f169-0x1,_0x54f296=this['_source'][_0xe389('0x4b')][_0xe389('0x74')](_0x24394b);_0x3be82f[_0xe389('0xb8')]=_0x54f296&&_0x54f296[_0xe389('0xb8')]||new Date();}if(this['_loadedStateData']&&_0x35d1db===this[_0xe389('0x5d')][_0xe389('0xbd')])for(const _0xe32c60 of this['_loadedStateData']['authors'])_0x3be82f[_0xe389('0x89')][_0xe389('0xda')](_0xe32c60['id'])||_0x3be82f['authorsIds'][_0xe389('0x88')](_0xe32c60['id']);return _0x3be82f;}['_loadRevisionData'](_0x5a530a){if(!_0x5a530a||_0x5a530a['diffData'])return Promise['resolve']();{const _0xfe695d=this[_0xe389('0xd2')][_0xe389('0x67')]['get'](_0xe389('0xa4'));return this[_0xe389('0xf0')][_0xe389('0x5')]({'channelId':_0xfe695d,'revisionId':_0x5a530a['id']})[_0xe389('0x19')](_0x38ca81=>{_0x5a530a['diffData']=_0x38ca81[_0xe389('0xf7')];});}}[_0xe389('0x9c')](_0x26017b,_0x2bd4e1,_0xbdcbb3){if(this[_0xe389('0x61')][_0xe389('0x16')](_0x26017b)){const _0x5cdb56=this['_bufferedUpdates']['get'](_0x26017b);_0x2bd4e1=_0xbdcbb3?{..._0x5cdb56,..._0x2bd4e1}:{..._0x2bd4e1,..._0x5cdb56};}this[_0xe389('0x61')][_0xe389('0xc4')](_0x26017b,_0x2bd4e1);}['_getFromVersion'](_0x170cc0){const _0x4b07a4=this['repository']['getRevisions']();_0x4b07a4[_0xe389('0x4c')](),_0x4b07a4[_0xe389('0x25')]();const _0x456b22=_0x4b07a4['find'](_0x10f98a=>_0x10f98a['toVersion']<=_0x170cc0)[_0xe389('0x102')];return _0x456b22<this[_0xe389('0x17')]?this[_0xe389('0x17')]:_0x456b22;}[_0xe389('0x7c')](_0x39951a){const _0x532cc9=this['repository'][_0xe389('0x5')](this['repository'][_0xe389('0xc9')]-0x1);if(_0x532cc9)this[_0xe389('0x66')]=_0x532cc9['id'];else{const _0x3f656d=!this[_0xe389('0xd2')][_0xe389('0x7f')][_0xe389('0xd5')][_0xe389('0xef')][_0xe389('0x9d')](_0x3c13f7=>this['editor'][_0xe389('0x7f')]['hasContent'](_0x3c13f7)),_0x54cf08=this[_0xe389('0xd2')][_0xe389('0xea')]['get'](_0xe389('0xa5'))['me']['id'],_0x2d807c=_0x280d66(this[_0xe389('0xd2')][_0xe389('0x26')],_0x3f656d?'Empty\x20document':_0xe389('0x6c'));this[_0xe389('0x71')]({'from':_0x39951a,'to':_0x39951a,'id':this['_initialRevisionId'],'name':_0x2d807c,'creatorId':_0x54cf08});}}[_0xe389('0xb4')](_0x17ec7f){const _0x29ceec=this[_0xe389('0x3a')]['getCurrentRevisionId']();this['currentRevision']=this[_0xe389('0xba')][_0xe389('0x5')](_0x29ceec),this[_0xe389('0x57')]||(this[_0xe389('0x57')]=this[_0xe389('0x71')]({'from':_0x17ec7f,'to':_0x17ec7f,'id':_0x29ceec,'name':'','creatorId':null}));}['_makeRevision']({name:_0x44a808,from:_0x53aea3,to:_0x542ee4,creatorId:_0x11838f,id:_0x22215d}){const _0xea6579=this[_0xe389('0xd8')]({'from':_0x53aea3,'to':_0x542ee4});_0xea6579[_0xe389('0x13')]=_0x44a808,_0xea6579[_0xe389('0x85')]=_0x11838f,_0xea6579['id']=_0x22215d;const _0xca606f=this[_0xe389('0x80')](_0xea6579);return this[_0xe389('0xf0')]&&this['_bufferUpdate'](_0xea6579['id'],_0xea6579,!0x0),_0xca606f;}[_0xe389('0x6')](){this[_0xe389('0xd2')]['conversion'][_0xe389('0x73')](_0xe389('0xb9'))[_0xe389('0x11')]({'model':'revision'});}['_removeRevisionMarkers'](_0x591930){return(_0x591930=_0x591930[_0xe389('0x48')](_0x5ecbff=>!_0x5ecbff['name']||_0xe389('0xa3')!==_0x5ecbff[_0xe389('0x13')]&&_0xe389('0x5a')!==_0x5ecbff[_0xe389('0x13')]))[_0xe389('0xde')](_0x4906df=>{'string'!=typeof _0x4906df&&(_0x4906df['children']=this[_0xe389('0x98')](_0x4906df['children']),_0x4906df['attributes']=_0x4906df['attributes']['filter'](_0x4621f2=>!_0x4621f2[0x0][_0xe389('0x33')]('data-revision-')));}),_0x591930;}}function J(_0x18ad4b,_0xd0a9ff){const _0x5b143b=_0xd0a9ff[_0xe389('0xf9')][_0xe389('0xb5')][_0xe389('0xd5')];if(_0xe389('0x51')==typeof _0x18ad4b)return new _0x105f45(_0x5b143b,_0x18ad4b);{const _0x3c81d7=_0x18ad4b[_0xe389('0xb2')][_0xe389('0x53')](_0xe35f61=>J(_0xe35f61,_0xd0a9ff));return new(B[_0x18ad4b[(_0xe389('0x20'))]]||_0x5dcad1)(_0x5b143b,_0x18ad4b[_0xe389('0x13')],_0x18ad4b[_0xe389('0x7b')],_0x3c81d7);}}class H{constructor(_0x39db62){this[_0xe389('0xd2')]=_0x39db62,this['_savedMetaData']=new Map(),this[_0xe389('0xf6')]=-0x1,this['_lastTo']=-0x1,this[_0xe389('0x30')]=new Map(),this[_0xe389('0x12')]=new Map(),this['_diffRootsAttributes']=new Map(),this['_baseRoots']=new Map(),this['_baseRootsAttributes']=new Map(),this[_0xe389('0xd1')]=new Map(),this[_0xe389('0x1d')]=new Map(),this[_0xe389('0x1')]=new Map(),this[_0xe389('0xd')]=new Map(),this['_touchedRoots']=new Map(),this['_revisionId']=0x1;}[_0xe389('0xd0')](_0x4254cd){this['source']=_0x4254cd;const _0x529ebb=new Map(),_0x3f4fc3=new Map(),_0x58b834=this['editor'][_0xe389('0x7f')][_0xe389('0xd5')][_0xe389('0xef')][_0xe389('0x53')](_0x4927ef=>_0x4927ef[_0xe389('0x40')]);for(const _0x485d4c of _0x58b834){const _0x175e5c=this[_0xe389('0xd2')][_0xe389('0x7f')][_0xe389('0xd5')]['getRoot'](_0x485d4c),_0x193b95=q(_0x175e5c);_0x529ebb[_0xe389('0xc4')](_0x485d4c,_0x193b95),_0x3f4fc3['set'](_0x485d4c,Object[_0xe389('0xc2')](_0x175e5c[_0xe389('0x3d')]()));}const _0xba91ff=Array['from'](this[_0xe389('0xd2')][_0xe389('0x7f')][_0xe389('0x34')])['map'](_0xac584=>[_0xac584[_0xe389('0x13')],_0xac584[_0xe389('0xb6')]()]),_0x3a8a67=this[_0xe389('0x91')][_0xe389('0x2f')];this['_saveMetaData'](_0x3a8a67,_0x529ebb,_0xba91ff,_0x3f4fc3),this[_0xe389('0xe1')]=this[_0xe389('0xca')];const _0x37731=new Map(),_0x5e6651=new Map();for(const _0x35d8b3 of _0x58b834){const _0x5a4ea5=G(_0x35d8b3);_0x37731['set'](_0x35d8b3,_0x5a4ea5),_0x5e6651['set'](_0x35d8b3,{});}this[_0xe389('0x15')](Number[_0xe389('0x97')],_0x37731,[],_0x5e6651);}[_0xe389('0x3f')](_0x324492,_0x79c588){if(this[_0xe389('0xf6')]===_0x324492&&this[_0xe389('0x76')]<=_0x79c588)this[_0xe389('0x1f')][_0xe389('0x78')]>0x1&&this[_0xe389('0x6e')](this[_0xe389('0x76')]),this[_0xe389('0xe3')](this[_0xe389('0x76')],_0x79c588,!0x0);else{if(!this[_0xe389('0x1f')]['has'](_0x324492)){const _0x2af40f=this['_getPreviousFrom'](_0x324492);this[_0xe389('0xcf')](_0x2af40f,_0x324492,!0x1);}this[_0xe389('0xcf')](_0x324492,_0x79c588,!0x0);}return this[_0xe389('0xf6')]=_0x324492,this[_0xe389('0x76')]=_0x79c588,this[_0xe389('0x94')]();}[_0xe389('0x18')](_0x3c596c){this[_0xe389('0x82')](),this[_0xe389('0xf6')]=_0x3c596c['fromVersion'],this[_0xe389('0x76')]=_0x3c596c[_0xe389('0x102')];for(const _0x1fe4c0 in _0x3c596c[_0xe389('0xf7')]){const _0xd93ba7=_0x3c596c['diffData'][_0x1fe4c0][_0xe389('0x75')],_0x3b67d0=_0x8b954a(_0x3c596c[_0xe389('0xf7')][_0x1fe4c0]['attributesBefore'])||{},_0x5efc51=this[_0xe389('0xe7')](_0x3c596c[_0xe389('0xf7')][_0x1fe4c0][_0xe389('0x14')]);_0x5efc51['rootName']=_0x1fe4c0,_0x5efc51[_0xe389('0x92')]=!_0xd93ba7||!_0xd93ba7[_0xe389('0xee')],_0x5efc51[_0xe389('0xee')]=()=>_0x5efc51[_0xe389('0x92')],this['_baseRoots'][_0xe389('0xc4')](_0x1fe4c0,_0x5efc51),this[_0xe389('0xbc')]['set'](_0x1fe4c0,_0x3b67d0),_0xd93ba7&&this[_0xe389('0x63')][_0xe389('0xc4')](_0x1fe4c0,_0xd93ba7);const _0x1b7d3b=this['_makeIdsRoot'](_0x5efc51);this[_0xe389('0x1d')]['set'](_0x1fe4c0,_0x1b7d3b);for(const [_0x249567,_0x2c8a70]of _0x5efc51['markers']){if(!_0x249567['startsWith'](_0xe389('0x6f')))continue;const _0xfb6a40=_0x249567[_0xe389('0x81')](':')[0x2];for(const _0x5229b8 of _0x2c8a70['getWalker']({'singleCharacters':!0x0})){const _0x8bea31=this['_getVidAttributeName'](_0x5229b8),_0x48532f=_0xe389('0x36')==_0x5229b8[_0xe389('0x20')]?_0x5229b8[_0xe389('0xaa')][_0xe389('0x45')][_0xe389('0x7')](0x0,-0x1):_0x5229b8[_0xe389('0xaa')][_0xe389('0x45')],_0x5eadd2=_0x1b7d3b[_0xe389('0x56')](_0x48532f)[_0xe389('0xfa')](_0x8bea31);this[_0xe389('0x1')]['set'](_0x5eadd2,{'userId':_0xfb6a40});}}}this[_0xe389('0xe1')]=this[_0xe389('0xca')];const _0x1cc0f0=[...Array(this[_0xe389('0xca')])[_0xe389('0xab')]()][_0xe389('0x7')](0x1)['filter'](_0x4dcf11=>!this[_0xe389('0x1')][_0xe389('0x16')](_0x4dcf11));let _0x383866=0x0;const _0x1af0d3=new Map();for(const _0x30b02c in _0x3c596c[_0xe389('0xf7')]){const _0x3ca9e1=_0x3c596c[_0xe389('0xf7')][_0x30b02c][_0xe389('0x75')],_0x427206=_0x8b954a(_0x3c596c['diffData'][_0x30b02c]['attributesAfter'])||{},_0x102e37=this[_0xe389('0xe7')](_0x3c596c[_0xe389('0xf7')][_0x30b02c]['insertions']);_0x102e37['rootName']=_0x30b02c,_0x102e37['_isAttached']=!_0x3ca9e1||_0x3ca9e1[_0xe389('0xee')],_0x102e37[_0xe389('0xee')]=()=>_0x102e37['_isAttached'],this[_0xe389('0x12')][_0xe389('0xc4')](_0x30b02c,_0x102e37),this[_0xe389('0xf')][_0xe389('0xc4')](_0x30b02c,_0x427206);const _0x4ae58a=this[_0xe389('0xe9')](_0x102e37,Number[_0xe389('0x97')]);this[_0xe389('0xd1')][_0xe389('0xc4')](_0x30b02c,_0x4ae58a),_0x1af0d3[_0xe389('0xc4')](_0x30b02c,_0x102e37[_0xe389('0xee')]()?_0x427206:{});for(const [_0xe8987,_0x409a28]of _0x102e37['markers']){if(!_0xe8987[_0xe389('0x33')](_0xe389('0x6f')))continue;const _0x1b3b58=_0xe8987['split'](':')[0x2];for(const _0x4e236e of _0x409a28[_0xe389('0x27')]({'singleCharacters':!0x0})){const _0x543aad=this[_0xe389('0x72')](_0x4e236e),_0x293138=this[_0xe389('0xca')]++,_0x11aac7=_0xe389('0x36')==_0x4e236e[_0xe389('0x20')]?_0x4e236e[_0xe389('0xaa')]['path'][_0xe389('0x7')](0x0,-0x1):_0x4e236e['previousPosition'][_0xe389('0x45')];_0x4ae58a['getNodeByPath'](_0x11aac7)['_setAttribute'](_0x543aad,_0x293138),this['_touched']['set'](_0x293138,{'userId':_0x1b3b58});}}for(const _0x2ddcc4 of this[_0xe389('0xd2')][_0xe389('0x7f')]['createRangeIn'](_0x102e37)[_0xe389('0x27')]({'singleCharacters':!0x0})){const _0x277cab=this[_0xe389('0x72')](_0x2ddcc4),_0x3e87ee=_0xe389('0x36')==_0x2ddcc4[_0xe389('0x20')]?_0x2ddcc4[_0xe389('0xaa')]['path'][_0xe389('0x7')](0x0,-0x1):_0x2ddcc4[_0xe389('0xaa')][_0xe389('0x45')],_0x4443e6=_0x4ae58a[_0xe389('0x56')](_0x3e87ee);_0x4443e6[_0xe389('0xfa')](_0x277cab)>0x0||_0x4443e6['_setAttribute'](_0x277cab,_0x1cc0f0[_0x383866++]);}for(const [_0xa8b2d2,_0x4b63ab]of _0x102e37[_0xe389('0x34')])_0xa8b2d2[_0xe389('0x33')](_0xe389('0x6f'))||this[_0xe389('0x30')][_0xe389('0xc4')](_0xa8b2d2,_0x4b63ab);}const _0x3a45b6=G(_0xe389('0x6d'));this[_0xe389('0x59')][_0xe389('0xc4')](_0xe389('0x6d'),_0x3a45b6),this['_baseIdsRoots'][_0xe389('0xc4')](_0xe389('0x6d'),this['_makeIdsRoot'](_0x3a45b6,0x1));const _0x27cdae=G(_0xe389('0x6d'));this[_0xe389('0x12')][_0xe389('0xc4')](_0xe389('0x6d'),_0x27cdae),this[_0xe389('0xd1')][_0xe389('0xc4')](_0xe389('0x6d'),this[_0xe389('0xe9')](_0x27cdae,0x1));const _0x212a0a=Array[_0xe389('0xa2')](this[_0xe389('0x12')])[_0xe389('0x53')](([_0x41ed5b,_0x3b1030])=>[_0x41ed5b,q(_0x3b1030)]);this[_0xe389('0x15')](this['_lastTo'],_0x212a0a,this['_markers'],_0x1af0d3);}['_makeModelFromViewString'](_0x31b51f){const _0x5e4a98=JSON[_0xe389('0x10')](_0x31b51f),_0x5c5db0=this[_0xe389('0xd2')]['editing'][_0xe389('0xb5')][_0xe389('0xd5')],_0x46b225=new _0x4dc568(_0x5c5db0,_0x5e4a98[_0xe389('0x53')](_0xc99f33=>J(_0xc99f33,this['editor'])));return this[_0xe389('0xd2')][_0xe389('0x3')]['toModel'](_0x46b225);}['_saveMetaData'](_0x1f8a5f,_0x2f4e83,_0x4e5677,_0x126384){const _0x128943=new Map(_0x2f4e83),_0x31c847=new Map(_0x8b954a(_0x126384)),_0x3b7506=new Map();for(const [_0x1cdffb,_0x1f499e]of _0x4e5677)_0x3b7506[_0xe389('0xc4')](_0x1cdffb,{'start':_0x1f499e[_0xe389('0xd3')][_0xe389('0xbb')](),'end':_0x1f499e[_0xe389('0x46')][_0xe389('0xbb')](),'rootName':_0x1f499e['root'][_0xe389('0x40')]});this[_0xe389('0x1f')][_0xe389('0xc4')](_0x1f8a5f,{'roots':_0x128943,'markers':_0x3b7506,'rootsAttributes':_0x31c847});}[_0xe389('0x6e')](_0x4a2fbd){this[_0xe389('0x1f')][_0xe389('0xfe')](_0x4a2fbd);}[_0xe389('0x38')](){this[_0xe389('0x82')](),this[_0xe389('0xf6')]=-0x1,this[_0xe389('0x76')]=-0x1,this['_savedMetaData'][_0xe389('0x1c')](),this[_0xe389('0xd0')](this['source']);}[_0xe389('0x82')](){this[_0xe389('0x1')][_0xe389('0x1c')](),this[_0xe389('0xd')][_0xe389('0x1c')](),this[_0xe389('0x63')][_0xe389('0x1c')](),this['_diffRoots']['clear'](),this[_0xe389('0xf')][_0xe389('0x1c')](),this[_0xe389('0x59')]['clear'](),this[_0xe389('0xbc')][_0xe389('0x1c')](),this['_idsRoots'][_0xe389('0x1c')](),this[_0xe389('0x1d')][_0xe389('0x1c')](),this['_markers'][_0xe389('0x1c')](),this[_0xe389('0xca')]=0x1,this['_startingRevisionId']=this[_0xe389('0xca')];}['_makeIdsRoot'](_0x44de50,_0x26d2ed=null){let _0x5b93ce=null;_0x44de50['is']('documentFragment')||(_0x5b93ce=new _0x158621(_0x44de50[_0xe389('0x13')],{'vid_start':null===_0x26d2ed?this['_revisionId']++:_0x26d2ed++}));const _0x42d7ef=[];for(const _0x11c3f5 of _0x44de50['getChildren']())if(_0x11c3f5['is'](_0xe389('0xbe'))){_0x42d7ef[_0xe389('0x88')](this[_0xe389('0xe9')](_0x11c3f5,_0x26d2ed));const _0x2f3805=_0x42d7ef[_0x42d7ef[_0xe389('0xc9')]-0x1];null!==_0x26d2ed&&(_0x26d2ed=_0x2f3805['is'](_0xe389('0xbe'),_0xe389('0xb7'))?_0x2f3805[_0xe389('0xfa')]('vid')+0x1:_0x2f3805[_0xe389('0xfa')](_0xe389('0xaf'))+0x1);}else for(let _0x443916=0x0;_0x443916<_0x11c3f5[_0xe389('0x8')];_0x443916++)_0x42d7ef['push'](new _0x158621(_0xe389('0xb7'),{'vid':null===_0x26d2ed?this[_0xe389('0xca')]++:_0x26d2ed++}));if(_0x44de50['is'](_0xe389('0x4f'))){const _0x17f43c=G(_0x44de50['rootName']);return _0x17f43c['_insertChild'](0x0,_0x42d7ef),_0x17f43c;}return _0x5b93ce[_0xe389('0xe8')](_0xe389('0xaf'),null===_0x26d2ed?this[_0xe389('0xca')]++:_0x26d2ed++),_0x5b93ce[_0xe389('0xb')](0x0,_0x42d7ef),_0x5b93ce;}[_0xe389('0xcf')](_0x4fe78c,_0x3ee659,_0x5a468b){this[_0xe389('0x82')]();const {roots:_0x1b95e0,markers:_0x513143,rootsAttributes:_0x124cef}=this[_0xe389('0x1f')][_0xe389('0x4d')](_0x4fe78c);this['_baseRoots']=new Map(_0x1b95e0),this[_0xe389('0xbc')]=new Map(_0x8b954a(_0x124cef));for(const [_0x29f36f,_0x30658b]of this[_0xe389('0x59')])if(_0xe389('0x6d')!==_0x29f36f&&(this[_0xe389('0x12')][_0xe389('0xc4')](_0x29f36f,q(_0x30658b)),this[_0xe389('0xf')]=new Map(_0x8b954a(_0x124cef)),_0x5a468b)){const _0x2ea9a5=this['_revisionId'];this[_0xe389('0xd1')][_0xe389('0xc4')](_0x29f36f,this[_0xe389('0xe9')](_0x30658b)),this[_0xe389('0x1d')]['set'](_0x29f36f,this[_0xe389('0xe9')](_0x30658b,_0x2ea9a5));}this[_0xe389('0xe1')]=this['_revisionId'],this['_diffRoots'][_0xe389('0xc4')](_0xe389('0x6d'),q(this[_0xe389('0x59')][_0xe389('0x4d')](_0xe389('0x6d')))),_0x5a468b&&this[_0xe389('0xd1')][_0xe389('0xc4')](_0xe389('0x6d'),this[_0xe389('0xe9')](this[_0xe389('0x59')][_0xe389('0x4d')]('$graveyard')));for(const [_0xf895f0,_0x665d89]of _0x513143){const _0x4b1c11=this[_0xe389('0x59')][_0xe389('0x4d')](_0x665d89[_0xe389('0x40')]),_0x4b5cb7=this[_0xe389('0x12')][_0xe389('0x4d')](_0x665d89[_0xe389('0x40')]),_0x41ab15=new _0x57b050(this[_0xe389('0x2')](_0x665d89[_0xe389('0xd3')],_0x4b1c11),this[_0xe389('0x2')](_0x665d89[_0xe389('0x46')],_0x4b1c11)),_0x54e6ab=this[_0xe389('0x64')](_0x41ab15,_0x4b5cb7);_0x4b1c11[_0xe389('0x34')][_0xe389('0xc4')](_0xf895f0,_0x41ab15),this[_0xe389('0x30')][_0xe389('0xc4')](_0xf895f0,_0x54e6ab);}this[_0xe389('0xe3')](_0x4fe78c,_0x3ee659,_0x5a468b);}['_applyOperations'](_0x579d79,_0x75c7a9,_0x437703){for(const _0xa3cfa8 of this[_0xe389('0x91')]['getOperations'](_0x579d79,_0x75c7a9))this[_0xe389('0xe')](_0xa3cfa8,_0x437703);for(const _0x57e08e of this['_diffRoots'][_0xe389('0x4a')]())_0x57e08e[_0xe389('0x34')][_0xe389('0x1c')]();for(const [_0x172f54,_0x3f7f6c]of this[_0xe389('0x30')]){this['_diffRoots'][_0xe389('0x4d')](_0x3f7f6c['root']['rootName'])[_0xe389('0x34')][_0xe389('0xc4')](_0x172f54,_0x3f7f6c[_0xe389('0xbb')]());}const _0x532786=new Map(),_0x35776b=new Map();for(const [_0x4d5dda,_0xbac8d2]of this[_0xe389('0x12')])_0x532786[_0xe389('0xc4')](_0x4d5dda,q(_0xbac8d2)),_0x35776b[_0xe389('0xc4')](_0x4d5dda,this[_0xe389('0xf')][_0xe389('0x4d')](_0x4d5dda));this[_0xe389('0x15')](_0x75c7a9,_0x532786,this[_0xe389('0x30')],_0x35776b);}[_0xe389('0x5c')](_0x48af47){const _0x2d0acf=Array[_0xe389('0xa2')](this[_0xe389('0x1f')][_0xe389('0xab')]());_0x2d0acf['sort']((_0x4bb45b,_0x2dc7f5)=>_0x4bb45b-_0x2dc7f5),_0x2d0acf[_0xe389('0x4c')]();for(const _0x5035f6 of _0x2d0acf)if(_0x5035f6<_0x48af47)return _0x5035f6;return Number[_0xe389('0x97')];}['_copyMarkers'](_0x571c1f,_0x3c5929){const _0xa9ab94=Array[_0xe389('0xa2')](_0x3c5929[_0xe389('0x34')])['map'](([_0x30e8a0,_0x586cc4])=>[_0x30e8a0,this['_fixRange'](_0x586cc4,_0x571c1f)]);_0x571c1f['markers']=new Map(_0xa9ab94);}[_0xe389('0xec')](_0x3ae52f){for(const _0x4a3bc0 of this['_markers']['values']()){const _0x136067=_0x4a3bc0['getTransformedByOperation'](_0x3ae52f),_0x59efc7=_0x57b050[_0xe389('0x58')](_0x136067);_0x4a3bc0[_0xe389('0xd3')]=_0x59efc7[_0xe389('0xd3')],_0x4a3bc0[_0xe389('0x46')]=_0x59efc7['end'];}}[_0xe389('0xe')](_0x20317b,_0x1614b4){if(_0xe389('0xd7')==_0x20317b[_0xe389('0x20')]||_0xe389('0xd4')==_0x20317b[_0xe389('0x20')])return void this['_handleRootOperation'](_0x20317b,_0x1614b4);if('insert'==_0x20317b[_0xe389('0x20')]){const _0xec9c65=_0x20317b[_0xe389('0x7e')]['root'][_0xe389('0x40')];this[_0xe389('0x12')][_0xe389('0x16')](_0xec9c65)||(this['_diffRoots']['set'](_0xec9c65,G(_0xec9c65,!0x0)),this['_diffRootsAttributes'][_0xe389('0xc4')](_0xec9c65,{}),_0x1614b4&&this[_0xe389('0xd1')]['set'](_0xec9c65,G(_0xec9c65,!0x0)));}else{if(_0xe389('0x43')==_0x20317b[_0xe389('0x20')]||_0xe389('0xdd')==_0x20317b[_0xe389('0x20')]||_0xe389('0x1a')==_0x20317b[_0xe389('0x20')])return void this[_0xe389('0xa7')](_0x20317b);}const _0x2b9e63=this['_cloneOperation'](_0x20317b,this['_diffRoots']);if('marker'!==_0x20317b[_0xe389('0x20')]&&(_0x2b9e63[_0xe389('0x1e')](),this[_0xe389('0xec')](_0x2b9e63)),_0x1614b4)switch(_0x2b9e63[_0xe389('0x20')]){case _0xe389('0x90'):this['_handleInsertOperation'](_0x20317b);break;case _0xe389('0x5b'):case _0xe389('0xc7'):case _0xe389('0xdc'):this[_0xe389('0x49')](_0x20317b);break;case _0xe389('0x9'):this['_handleMergeOperation'](_0x20317b);break;case'split':this[_0xe389('0x93')](_0x20317b);break;case _0xe389('0x5e'):this[_0xe389('0x8a')](_0x20317b);}}[_0xe389('0x8c')](_0x221095,_0x32dd19){const _0x23d766=_0x221095[_0xe389('0xbb')]();return _0x23d766[_0xe389('0x7a')]=_0x221095[_0xe389('0x7a')],this['_fixOperation'](_0x23d766,_0x32dd19),_0x23d766;}[_0xe389('0x29')](_0x252ab7){return _0x252ab7[_0xe389('0x53')](_0x25a915=>{const _0x49e815=this['_getVidAttributeName'](_0x25a915);return Number(_0x25a915[_0xe389('0x70')][_0xe389('0xfa')](_0x49e815));});}['_generateTape'](_0x152b1,_0x35d4bf){if(_0x152b1['is'](_0xe389('0xbe'),_0xe389('0xb7')))_0x35d4bf['push']({'item':_0x152b1,'type':'text'});else{_0x152b1['is'](_0xe389('0xbe'))&&_0x35d4bf[_0xe389('0x88')]({'item':_0x152b1,'type':_0xe389('0xb0')});for(const _0x572b11 of _0x152b1[_0xe389('0x69')]())this[_0xe389('0x86')](_0x572b11,_0x35d4bf);_0x152b1['is'](_0xe389('0xbe'))&&_0x35d4bf[_0xe389('0x88')]({'item':_0x152b1,'type':_0xe389('0x36')});}return _0x35d4bf;}['_getState'](){const _0x1454be=new Map(this[_0xe389('0x1')]),_0x1586c1=new Map(_0x1454be),_0x41cf00=new Map(),_0x1c97af={'insertions':{},'deletions':{}},_0x58e3bb={'insertions':{},'deletions':{}},_0x50c128=new Map(),_0x4a78ac=new Set([...this[_0xe389('0x59')]['keys'](),...this[_0xe389('0x12')][_0xe389('0xab')]()]);_0x4a78ac['delete']('$graveyard');for(const _0x1eaaab of _0x4a78ac){const _0x16ada2=this['_diffRoots'][_0xe389('0x4d')](_0x1eaaab)||G(_0x1eaaab,!0x1),_0x1a792e=this['_baseRoots']['get'](_0x1eaaab)||G(_0x1eaaab,!0x1);_0x16ada2['isAttached']()||_0x1a792e[_0xe389('0xee')]()?(_0x1c97af['insertions'][_0x1eaaab]=q(_0x16ada2),_0x1c97af[_0xe389('0x14')][_0x1eaaab]=q(_0x1a792e),this['_copyMarkers'](_0x1c97af['deletions'][_0x1eaaab],_0x1a792e),this[_0xe389('0x101')](_0x1c97af[_0xe389('0x21')][_0x1eaaab],_0x16ada2),_0x58e3bb[_0xe389('0x21')][_0x1eaaab]=this[_0xe389('0x86')](this['_idsRoots']['get'](_0x1eaaab),[]),_0x58e3bb[_0xe389('0x14')][_0x1eaaab]=this[_0xe389('0x86')](this[_0xe389('0x1d')][_0xe389('0x4d')](_0x1eaaab)||G(_0x1eaaab,!0x1),[])):_0x4a78ac['delete'](_0x1eaaab);}for(const _0x573970 of _0x4a78ac){const _0x7d3299=_0x58e3bb[_0xe389('0x21')][_0x573970];for(const _0x5f2bf4 of _0x7d3299){const _0x13d24a=this[_0xe389('0x72')](_0x5f2bf4),_0xd07fd3=_0x5f2bf4[_0xe389('0x70')][_0xe389('0xfa')](_0x13d24a);_0x1586c1[_0xe389('0xfe')](_0xd07fd3),_0xd07fd3>=this[_0xe389('0xe1')]&&_0x41cf00[_0xe389('0xc4')](_0xd07fd3,_0x1454be[_0xe389('0x4d')](_0xd07fd3));}}for(const _0x42c3a9 of _0x4a78ac){const _0x68ef3f=_0x58e3bb[_0xe389('0x21')][_0x42c3a9],_0x260405=this[_0xe389('0x29')](_0x58e3bb['deletions'][_0x42c3a9]);let _0x5502c7=0x0;for(const _0x5626de of _0x68ef3f){const _0x532967=this[_0xe389('0x72')](_0x5626de),_0x3e94e8=_0x5626de['item'][_0xe389('0xfa')](_0x532967);if(!_0x41cf00['has'](_0x3e94e8)&&!_0x50c128[_0xe389('0x16')](_0x3e94e8)){if(_0x1586c1[_0xe389('0x16')](_0x3e94e8))_0x5502c7++;else{if(_0x3e94e8!=_0x260405[_0x5502c7]){const _0x11a15f=_0x1454be[_0xe389('0x4d')](_0x3e94e8)||_0x1454be[_0xe389('0x4d')](_0x260405[_0x5502c7]);for(;_0x3e94e8!=_0x260405[_0x5502c7];)_0x1586c1[_0xe389('0x16')](_0x260405[_0x5502c7])||(_0x50c128[_0xe389('0xc4')](_0x260405[_0x5502c7],_0x11a15f),_0x1454be['set'](_0x260405[_0x5502c7],_0x11a15f)),_0x5502c7++;}_0x5502c7++;}}}}for(const _0x48c572 of _0x4a78ac){const _0x49576b=_0x58e3bb[_0xe389('0x21')][_0x48c572];for(const _0x12b452 of _0x49576b){const _0x20218a=this[_0xe389('0x72')](_0x12b452),_0x212e3b=_0x12b452['item'][_0xe389('0xfa')](_0x20218a);if(_0x50c128[_0xe389('0x16')](_0x212e3b)){const _0x40ef81=_0x50c128[_0xe389('0x4d')](_0x212e3b);_0x1586c1[_0xe389('0x16')](_0x212e3b)||_0x1586c1[_0xe389('0xc4')](_0x212e3b,{..._0x40ef81}),_0x41cf00[_0xe389('0xc4')](_0x212e3b,{..._0x40ef81});}}}for(const _0x328489 of _0x1586c1[_0xe389('0xab')]())_0x328489>=this[_0xe389('0xe1')]&&_0x1586c1[_0xe389('0xfe')](_0x328489);const _0x328dcb=new Map();for(const _0x507e70 of _0x4a78ac){let _0x343d72=_0x58e3bb['insertions'][_0x507e70];for(const _0x57e8d3 of _0x343d72)if(_0x57e8d3[_0xe389('0x70')]['is'](_0xe389('0xbe'),_0xe389('0xe4'))){const _0xe5da4a=this[_0xe389('0x72')](_0x57e8d3),_0x33851f=_0x57e8d3[_0xe389('0x70')]['getAttribute'](_0xe5da4a);if(_0x41cf00[_0xe389('0x16')](_0x33851f)){const _0x22abe6=_0x57e8d3[_0xe389('0x70')][_0xe389('0x47')][_0xe389('0x47')][_0xe389('0xfa')]('vid_start'),_0x29b16c=_0x328dcb[_0xe389('0x4d')](_0x22abe6)||new Set();_0x29b16c['add'](_0x41cf00[_0xe389('0x4d')](_0x33851f)[_0xe389('0xfc')]),_0x328dcb[_0xe389('0xc4')](_0x22abe6,_0x29b16c);}}_0x343d72=_0x58e3bb[_0xe389('0x14')][_0x507e70];for(const _0x51900b of _0x343d72)if(_0x51900b[_0xe389('0x70')]['is']('element',_0xe389('0xe4'))){const _0x3c9eb8=this['_getVidAttributeName'](_0x51900b),_0x3f546f=_0x51900b[_0xe389('0x70')][_0xe389('0xfa')](_0x3c9eb8);if(_0x1586c1[_0xe389('0x16')](_0x3f546f)){const _0x36d844=_0x51900b[_0xe389('0x70')]['parent'][_0xe389('0x47')]['getAttribute'](_0xe389('0xc')),_0x3f84cb=_0x328dcb['get'](_0x36d844)||new Set();_0x3f84cb[_0xe389('0x9e')](_0x1586c1['get'](_0x3f546f)[_0xe389('0xfc')]),_0x328dcb['set'](_0x36d844,_0x3f84cb);}}for(const _0x580a55 of _0x328dcb[_0xe389('0xab')]())(_0x41cf00[_0xe389('0x16')](_0x580a55)||_0x1586c1[_0xe389('0x16')](_0x580a55))&&_0x328dcb[_0xe389('0xfe')](_0x580a55);}for(const _0x411832 of _0x4a78ac){const _0x1367fc=_0x58e3bb[_0xe389('0x21')][_0x411832];let _0x4f28a8=null,_0x2776f6=null;for(const _0x3e23eb of _0x1367fc){const _0x1416cf=this[_0xe389('0x72')](_0x3e23eb),_0x1a1b2e=_0x3e23eb['item'][_0xe389('0xfa')](_0x1416cf),_0x1d65d7=_0x328dcb[_0xe389('0x4d')](_0x1a1b2e);_0x1d65d7&&_0xe389('0xb0')==_0x3e23eb['type']&&(_0x4f28a8=Array[_0xe389('0xa2')](_0x1d65d7)[0x0],_0x2776f6=_0x3e23eb[_0xe389('0x70')][_0xe389('0xfa')]('vid_end')),_0x4f28a8&&(_0x1586c1[_0xe389('0xc4')](_0x1a1b2e,{'userId':_0x4f28a8}),_0x41cf00['set'](_0x1a1b2e,{'userId':_0x4f28a8})),_0x1a1b2e==_0x2776f6&&(_0x4f28a8=null,_0x2776f6=null);}}const _0x2e8a0b={},_0xc1e1e0=new Set();for(const _0x54c823 of _0x4a78ac){const _0x1c0f32=_0x1c97af[_0xe389('0x14')][_0x54c823],_0x3a83f0=_0x1c97af[_0xe389('0x21')][_0x54c823];for(const {userId:_0x56ee07}of this[_0xe389('0xd')]['values']())null!==_0x56ee07&&_0xc1e1e0[_0xe389('0x9e')](_0x56ee07);for(const {userId:_0x170c07}of this['_touchedRoots']['values']())null!==_0x170c07&&_0xc1e1e0[_0xe389('0x9e')](_0x170c07);this[_0xe389('0x2b')](_0x3a83f0,_0x58e3bb[_0xe389('0x21')][_0x54c823],_0x41cf00,_0xe389('0x2c'),_0xc1e1e0),this['_markChanges'](_0x1c0f32,_0x58e3bb[_0xe389('0x14')][_0x54c823],_0x1586c1,_0xe389('0x32'),_0xc1e1e0),_0x2e8a0b[_0x54c823]={'insertions':this[_0xe389('0x6b')](_0x3a83f0),'deletions':this[_0xe389('0x6b')](_0x1c0f32),'attachChange':this['_touchedRoots'][_0xe389('0x4d')](_0x54c823)||null,'attributesBefore':_0x8b954a(this['_baseRootsAttributes'][_0xe389('0x4d')](_0x54c823))||{},'attributesAfter':_0x8b954a(this['_diffRootsAttributes'][_0xe389('0x4d')](_0x54c823))};}return{'diffData':_0x2e8a0b,'authorsIds':Array[_0xe389('0xa2')](_0xc1e1e0)};}[_0xe389('0x9a')](_0x12e1f4){for(const [,_0x1948bc]of _0x12e1f4['markers']){const _0x4d03ce=_0x1948bc[_0xe389('0xd3')][_0xe389('0xc3')]()[_0xe389('0x48')](_0x3aac9f=>_0xe389('0xe4')==_0x3aac9f['name']);for(const _0xd02c75 of _0x4d03ce)0x1==_0xd02c75['childCount']&&_0xd02c75['getChild'](0x0)['is'](_0xe389('0xbe'),_0xe389('0xa0'))&&_0xd02c75['getChild'](0x0)[_0xe389('0xe8')]('keepParagraph',!0x0);}}['_prepareViewToSave'](_0x8a89bd){this['_processRootBeforeSave'](_0x8a89bd);const _0xf3638e=this['editor'][_0xe389('0x3')][_0xe389('0xf2')](_0x8a89bd,{}),_0x3625de=Array[_0xe389('0xa2')](_0xf3638e[_0xe389('0x69')]())[_0xe389('0x53')](_0x24a1a5=>this[_0xe389('0x96')](_0x24a1a5));return JSON['stringify'](_0x3625de);}['_getViewJson'](_0x58b869){if(_0x58b869['is'](_0xe389('0xb7')))return _0x58b869[_0xe389('0x3')];{const _0x18e608=_0x58b869;return{'type':Object[_0xe389('0xab')](B)['find'](_0x34f247=>_0x58b869 instanceof B[_0x34f247]),'name':_0x18e608['name'],'attributes':Array[_0xe389('0xa2')](_0x18e608[_0xe389('0x3d')]()),'children':Array['from'](_0x18e608[_0xe389('0x69')]())[_0xe389('0x53')](_0x3500ff=>this['_getViewJson'](_0x3500ff))};}}['_markChanges'](_0x46a9cd,_0x329a1c,_0x3f562f,_0x5e3dc7,_0x581b72){let _0x341ca1=null,_0x56c1fc=null,_0x529c2c=0x0;const _0x2edf9c=this['editor'][_0xe389('0x7f')];for(let _0x368111=0x0;_0x368111<_0x329a1c[_0xe389('0xc9')];_0x368111++){const _0x47cb5d=this['_getVidAttributeName'](_0x329a1c[_0x368111]),_0x577883=_0x329a1c[_0x368111][_0xe389('0x70')]['getAttribute'](_0x47cb5d),_0x85f05c=_0x3f562f[_0xe389('0x4d')](_0x577883),_0x37845b=_0x368111==_0x329a1c[_0xe389('0xc9')]-0x1;(!_0x341ca1&&_0x85f05c&&(_0x341ca1=_0x85f05c,_0x56c1fc=_0x329a1c[_0x368111]),_0x341ca1&&(!_0x85f05c||_0x85f05c[_0xe389('0xfc')]!=_0x341ca1[_0xe389('0xfc')]))&&(_0x250833(_0x85f05c,L(_0x56c1fc,_0x46a9cd,_0x2edf9c),L(_0x329a1c[_0x368111],_0x46a9cd,_0x2edf9c)),_0x341ca1=_0x85f05c||null,_0x56c1fc=_0x85f05c?_0x329a1c[_0x368111]:null),_0x341ca1&&_0x37845b&&_0x250833(_0x85f05c,L(_0x56c1fc,_0x46a9cd,_0x2edf9c),W(_0x329a1c[_0x368111],_0x46a9cd,_0x2edf9c));}function _0x250833(_0x1c883e,_0x4a8c82,_0x22af6d){const _0x1f46ad=_0x341ca1[_0xe389('0xfc')],_0x3a3ad0='revision:'+_0x5e3dc7+':'+_0x1f46ad+':'+_0x529c2c++,_0x2edf94=_0x2edf9c[_0xe389('0xcb')](_0x4a8c82,_0x22af6d);_0x46a9cd[_0xe389('0x34')]['set'](_0x3a3ad0,_0x2edf94),null!==_0x1f46ad&&_0x581b72[_0xe389('0x9e')](_0x1f46ad);}}[_0xe389('0x72')](_0x431fe7){switch(_0x431fe7[_0xe389('0x20')]){case _0xe389('0xb0'):return _0xe389('0xc');case _0xe389('0x36'):return _0xe389('0xaf');default:return'vid';}}[_0xe389('0x42')](_0x5dd053,_0x48969d){_0x5dd053[_0xe389('0x83')]=null;for(const _0x5888e3 in _0x5dd053){const _0x1e3ada=_0x5dd053[_0x5888e3];if(_0x1e3ada instanceof _0xcad0e){const _0x1d5bc9=_0x48969d['get'](_0x1e3ada[_0xe389('0xf5')]['rootName']);_0x5dd053[_0x5888e3]=this['_fixPosition'](_0x1e3ada,_0x1d5bc9);}if(_0x1e3ada instanceof _0x57b050){const _0x113d53=_0x48969d[_0xe389('0x4d')](_0x1e3ada['root']['rootName']);_0x5dd053[_0x5888e3]=this[_0xe389('0x64')](_0x1e3ada,_0x113d53);}_0xe389('0xf5')===_0x5888e3&&(_0x5dd053[_0xe389('0xf5')]=_0x48969d[_0xe389('0x4d')](_0x5dd053['root']['rootName']));}}[_0xe389('0x64')](_0x544a87,_0x295bf5){return this['editor'][_0xe389('0x7f')][_0xe389('0xcb')](this[_0xe389('0x2')](_0x544a87['start'],_0x295bf5),this[_0xe389('0x2')](_0x544a87[_0xe389('0x46')],_0x295bf5));}['_fixPosition'](_0x52426e,_0x25c244){return this[_0xe389('0xd2')][_0xe389('0x7f')]['createPositionFromPath'](_0x25c244,_0x52426e[_0xe389('0x45')],_0x52426e[_0xe389('0x54')]);}[_0xe389('0xb3')](_0x1abbe6){const _0x56915e=this[_0xe389('0xd1')]['get'](_0x1abbe6[_0xe389('0x7e')]['root'][_0xe389('0x40')]),_0x58a6c8=this['_fixPosition'](_0x1abbe6[_0xe389('0x7e')],_0x56915e),_0xa5e6ad=null===_0x1abbe6[_0xe389('0x7a')]?null:_0x1abbe6['_authorId']||this['editor'][_0xe389('0xea')][_0xe389('0x4d')](_0xe389('0xa5'))['me']['id'],_0x17369e=_0x58a6c8[_0xe389('0x47')],_0x518b3e=this[_0xe389('0xca')],_0x5caae6=[];for(const _0x10667d of _0x1abbe6['nodes'])if(_0x10667d['is'](_0xe389('0xbe')))_0x5caae6['push'](this['_makeIdsRoot'](_0x10667d));else for(let _0x6e62f8=0x0;_0x6e62f8<_0x10667d[_0xe389('0x8')];_0x6e62f8++)_0x5caae6[_0xe389('0x88')](new _0x158621(_0xe389('0xb7'),{'vid':this['_revisionId']++}));const _0x127641=this[_0xe389('0xca')];for(let _0x2621f=_0x518b3e;_0x2621f<_0x127641;_0x2621f++)this[_0xe389('0x1')]['set'](_0x2621f,{'userId':_0xa5e6ad});_0x17369e[_0xe389('0xb')](_0x58a6c8['offset'],_0x5caae6);}[_0xe389('0x49')](_0xae1e33){(_0xae1e33=this[_0xe389('0x8c')](_0xae1e33,this[_0xe389('0xd1')]))['_execute']();const _0x5aece8=null===_0xae1e33[_0xe389('0x7a')]?null:_0xae1e33[_0xe389('0x7a')]||this[_0xe389('0xd2')][_0xe389('0xea')][_0xe389('0x4d')](_0xe389('0xa5'))['me']['id'],_0x198000=_0xae1e33['getMovedRangeStart'](),_0x357838=_0x198000[_0xe389('0x47')],_0x37d481=_0x198000[_0xe389('0x4e')];!function _0x52bb8e(_0x111a3e,_0x287f4d,_0x68784f,_0x4d9085){for(let _0x3c29bc=_0x68784f;_0x3c29bc<_0x4d9085;_0x3c29bc++){const _0x51e143=_0x287f4d[_0xe389('0xf1')](_0x3c29bc);_0x51e143['is'](_0xe389('0xbe'),_0xe389('0xb7'))?_0x111a3e[_0xe389('0xc4')](_0x51e143[_0xe389('0xfa')](_0xe389('0x5f')),{'userId':_0x5aece8}):(_0x111a3e[_0xe389('0xc4')](_0x51e143[_0xe389('0xfa')](_0xe389('0xc')),{'userId':_0x5aece8}),_0x52bb8e(_0x111a3e,_0x51e143,0x0,_0x51e143[_0xe389('0x9b')]),_0x111a3e['set'](_0x51e143[_0xe389('0xfa')](_0xe389('0xaf')),{'userId':_0x5aece8}));}}(this[_0xe389('0x1')],_0x357838,_0x37d481,_0x37d481+_0xae1e33[_0xe389('0x7d')]);}[_0xe389('0xad')](_0x2deefc){const _0x212277=null===(_0x2deefc=this['_cloneOperation'](_0x2deefc,this[_0xe389('0xd1')]))[_0xe389('0x7a')]?null:_0x2deefc[_0xe389('0x7a')]||this[_0xe389('0xd2')]['plugins']['get'](_0xe389('0xa5'))['me']['id'],_0x5315b4=_0x2deefc['targetPosition'][_0xe389('0x47')],_0x37dc90=_0x2deefc[_0xe389('0xa1')][_0xe389('0x47')],_0x395863=_0x5315b4[_0xe389('0xfa')]('vid_end'),_0x749fa6=_0x37dc90[_0xe389('0xfa')](_0xe389('0xc'));_0x5315b4[_0xe389('0xe8')]('vid_end',_0x37dc90['getAttribute']('vid_end')),_0x37dc90[_0xe389('0xe8')](_0xe389('0xaf'),_0x395863),this[_0xe389('0x1')]['set'](_0x749fa6,{'userId':_0x212277}),this[_0xe389('0x1')]['set'](_0x395863,{'userId':_0x212277}),_0x2deefc[_0xe389('0x1e')]();}[_0xe389('0x93')](_0x34c5fb){const _0x1e035a=null===(_0x34c5fb=this[_0xe389('0x8c')](_0x34c5fb,this[_0xe389('0xd1')]))[_0xe389('0x7a')]?null:_0x34c5fb[_0xe389('0x7a')]||this[_0xe389('0xd2')][_0xe389('0xea')][_0xe389('0x4d')]('Users')['me']['id'],_0x5be021=_0x34c5fb[_0xe389('0x28')],_0x28c21f=_0x34c5fb[_0xe389('0xc5')][_0xe389('0x47')];_0x34c5fb[_0xe389('0x1e')]();const _0x30acdb=_0x28c21f[_0xe389('0xfa')]('vid_end'),_0x4f5aca=_0x34c5fb['insertionPosition']['nodeAfter'];if(_0x5be021){const _0x33e605=_0x4f5aca[_0xe389('0xfa')](_0xe389('0xaf')),_0x459a6b=_0x28c21f['getAttribute'](_0xe389('0xaf'));_0x28c21f[_0xe389('0xe8')](_0xe389('0xaf'),_0x33e605),_0x4f5aca[_0xe389('0xe8')](_0xe389('0xaf'),_0x459a6b),this[_0xe389('0x1')][_0xe389('0xc4')](_0x28c21f[_0xe389('0xfa')]('vid_end'),{'userId':_0x1e035a}),this[_0xe389('0x1')][_0xe389('0xc4')](_0x4f5aca[_0xe389('0xfa')](_0xe389('0xc')),{'userId':_0x1e035a});}else{const _0x4b06fa=this[_0xe389('0xca')]++,_0x333f37=this[_0xe389('0xca')]++;_0x28c21f[_0xe389('0xe8')](_0xe389('0xaf'),_0x4b06fa),_0x4f5aca[_0xe389('0xe8')](_0xe389('0xc'),_0x333f37),_0x4f5aca[_0xe389('0xe8')](_0xe389('0xaf'),_0x30acdb),this['_touched']['set'](_0x4b06fa,{'userId':_0x1e035a}),this[_0xe389('0x1')][_0xe389('0xc4')](_0x333f37,{'userId':_0x1e035a});}}[_0xe389('0x8a')](_0x508dbb){if(!_0x508dbb[_0xe389('0x87')])return;const _0x45be6b=(_0x508dbb=this[_0xe389('0x8c')](_0x508dbb,this[_0xe389('0x12')]))[_0xe389('0xfd')]?_0x508dbb[_0xe389('0xfd')][_0xe389('0xf5')]:null,_0x4c1d78=_0x508dbb['newRange']?_0x508dbb['newRange'][_0xe389('0xf5')]:null;_0x45be6b&&this['_markers']['delete'](_0x508dbb[_0xe389('0x13')]),_0x4c1d78&&this[_0xe389('0x30')][_0xe389('0xc4')](_0x508dbb[_0xe389('0x13')],_0x508dbb[_0xe389('0x8d')][_0xe389('0xbb')]());const _0x59cc61=null===_0x508dbb[_0xe389('0x7a')]?null:_0x508dbb[_0xe389('0x7a')]||this[_0xe389('0xd2')][_0xe389('0xea')][_0xe389('0x4d')](_0xe389('0xa5'))['me']['id'],_0x17511b=_0x508dbb[_0xe389('0x13')];if(!this[_0xe389('0xd')][_0xe389('0x16')](_0x17511b))return void this[_0xe389('0xd')][_0xe389('0xc4')](_0x17511b,{'range':_0x508dbb['oldRange'],'userId':_0x59cc61});const _0x55c37c=this[_0xe389('0xd')]['get'](_0x17511b),_0x3c3bf7=_0x55c37c[_0xe389('0x2a')],_0x42e997=_0x508dbb[_0xe389('0x8d')];null==_0x3c3bf7&&null==_0x42e997||_0x3c3bf7&&_0x42e997&&_0x3c3bf7[_0xe389('0x65')](_0x42e997)?this['_touchedMarkers']['delete'](_0x508dbb['name']):_0x55c37c[_0xe389('0xfc')]=_0x59cc61;}[_0xe389('0x8e')](_0x212470,_0x461ac6){this[_0xe389('0x12')]['has'](_0x212470[_0xe389('0x40')])?this['_diffRoots'][_0xe389('0x4d')](_0x212470[_0xe389('0x40')])[_0xe389('0x92')]=_0x212470[_0xe389('0x3c')]:(this[_0xe389('0x12')][_0xe389('0xc4')](_0x212470['rootName'],G(_0x212470[_0xe389('0x40')],!0x0)),this['_diffRootsAttributes']['set'](_0x212470[_0xe389('0x40')],{}),_0x461ac6&&this[_0xe389('0xd1')][_0xe389('0xc4')](_0x212470[_0xe389('0x40')],G(_0x212470[_0xe389('0x40')],!0x0)));const _0x4efd84=null===_0x212470[_0xe389('0x7a')]?null:_0x212470[_0xe389('0x7a')]||this[_0xe389('0xd2')][_0xe389('0xea')][_0xe389('0x4d')](_0xe389('0xa5'))['me']['id'],_0xa2454c=this[_0xe389('0x63')][_0xe389('0x4d')](_0x212470['rootName']);_0xa2454c&&_0xa2454c[_0xe389('0xfc')]===_0x4efd84?this[_0xe389('0x63')][_0xe389('0xfe')](_0x212470[_0xe389('0x40')]):this[_0xe389('0x63')][_0xe389('0xc4')](_0x212470['rootName'],{'userId':_0x4efd84,'isAttached':_0x212470[_0xe389('0x3c')]});}['_handleRootAttributeOperation'](_0xc75fbd){const _0x455aa0=this[_0xe389('0xf')][_0xe389('0x4d')](_0xc75fbd[_0xe389('0xf5')][_0xe389('0x40')]);null===_0xc75fbd['newValue']?delete _0x455aa0[_0xc75fbd[_0xe389('0xa')]]:_0x455aa0[_0xc75fbd[_0xe389('0xa')]]=_0xc75fbd[_0xe389('0xae')];}}function q(_0x1f106e){const _0x41d786=G(_0x1f106e[_0xe389('0x40')],_0x1f106e[_0xe389('0xee')]());for(const _0x1f460b of _0x1f106e[_0xe389('0x69')]()){const _0x1deeba=_0x1f460b[_0xe389('0x9f')](!0x0);_0x41d786[_0xe389('0xc1')](_0x1deeba);}return _0x41d786;}function G(_0x20b463,_0x543bde=!0x0){const _0x188f4f=new _0x1576b0();return _0x188f4f[_0xe389('0x40')]=_0x20b463,_0x188f4f['_isAttached']=_0x543bde,_0x188f4f['isAttached']=()=>_0x188f4f[_0xe389('0x92')],_0x188f4f;}function L(_0x579db5,_0x38af62,_0x41cf32){const _0x15e511=_0xe389('0x36')==_0x579db5[_0xe389('0x20')]?_0x41cf32['createPositionAt'](_0x579db5[_0xe389('0x70')],_0xe389('0x46')):_0x41cf32[_0xe389('0x31')](_0x579db5[_0xe389('0x70')]);return _0x41cf32[_0xe389('0x50')](_0x38af62,_0x15e511[_0xe389('0x45')],_0x15e511[_0xe389('0x54')]);}function W(_0x22cdbc,_0x372c95,_0x2c6ed1){const _0x5dd4ea=_0xe389('0xb0')==_0x22cdbc[_0xe389('0x20')]?_0x2c6ed1['createPositionAt'](_0x22cdbc[_0xe389('0x70')],0x0):_0x2c6ed1['createPositionAfter'](_0x22cdbc[_0xe389('0x70')]);return _0x2c6ed1[_0xe389('0x50')](_0x372c95,_0x5dd4ea[_0xe389('0x45')],_0x5dd4ea['stickiness']);}