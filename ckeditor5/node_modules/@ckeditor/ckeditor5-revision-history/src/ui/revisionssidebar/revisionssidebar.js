/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x2015=['_revisionsRepository','availableRevisionActions','config','change:diff','restoreRevision','highlightRevisions','editor','newRevisionId','appendChild','select','setName','_revisionViewer','Name\x20this\x20revision','_handleEditorDataReady','revisionViews','Restore\x20this\x20revision','action','_handleRevisionSetName','repository','getEarlierVisibleRevision','_revisions','isSelected','_sidebarView','isVisible','render','defaultRevisionActions','assign','compare','Compare\x20against\x20selected','diff','restoreRevisionCallback','listenTo','bind','focus','RevisionsSidebar','isReady','length','_handleRevisionSelected','requires','add','revisionSelected','getLaterVisibleRevision','destroy','getRevisionsInDiff','getRevision','element','_createRevisionActions','isEnabled','locale','getIndex','name','get','timePeriodViews','_handleDiffChange','revisionSetName','fieldView','ready','compareAgainstSelected'];(function(_0xf76734,_0x201590){const _0x404b8f=function(_0x500318){while(--_0x500318){_0xf76734['push'](_0xf76734['shift']());}};_0x404b8f(++_0x201590);}(_0x2015,0xa4));const _0x404b=function(_0xf76734,_0x201590){_0xf76734=_0xf76734-0x0;let _0x404b8f=_0x2015[_0xf76734];return _0x404b8f;};import{Plugin as _0x52b58f}from'ckeditor5/src/core';import _0x2b2742 from'./revisionssidebarview';import _0x2ecd0f from'../../revisionviewer';export default class w extends _0x52b58f{static get['pluginName'](){return _0x404b('0x2c');}static get[_0x404b('0x30')](){return[_0x2ecd0f];}constructor(_0x124691){super(_0x124691),this[_0x404b('0x15')]=_0x124691['plugins'][_0x404b('0x3')](_0x2ecd0f),this[_0x404b('0xa')]=this[_0x404b('0x15')][_0x404b('0x1c')],this[_0x404b('0x20')]=null;}['init'](){const _0x373c7d=this['_revisionsRepository'][_0x404b('0x1e')],_0xcc11d3=this[_0x404b('0x38')](),_0x1cd5e7=this[_0x404b('0x10')]['config'][_0x404b('0x3')]('revisionHistory.viewerSidebarContainer');this[_0x404b('0x20')]=new _0x2b2742(this[_0x404b('0x10')][_0x404b('0x0')],_0x373c7d,_0xcc11d3),this[_0x404b('0x20')]['on'](_0x404b('0x32'),this[_0x404b('0x2f')]['bind'](this)),this[_0x404b('0x20')]['on'](_0x404b('0x6'),this[_0x404b('0x1b')][_0x404b('0x2a')](this)),this['_sidebarView'][_0x404b('0x2a')](_0x404b('0x39'))['to'](this['_revisionViewer']),this[_0x404b('0x20')][_0x404b('0x4')]['on'](_0x404b('0x31'),(_0x51549e,_0x439ac8)=>{_0x439ac8[_0x404b('0x18')]['on'](_0x404b('0x31'),(_0x356ca8,_0x5f1774)=>{_0x5f1774[_0x404b('0x2a')]('isEnabled',_0x404b('0x2d'))['to'](this[_0x404b('0x15')]);});}),this['_sidebarView'][_0x404b('0x22')](),this[_0x404b('0x29')](this[_0x404b('0x10')]['data'],_0x404b('0x8'),this['_handleEditorDataReady']['bind'](this)),this[_0x404b('0x29')](this[_0x404b('0x15')],_0x404b('0xd'),this[_0x404b('0x5')][_0x404b('0x2a')](this)),_0x1cd5e7[_0x404b('0x12')](this[_0x404b('0x20')][_0x404b('0x37')]);}[_0x404b('0x34')](){this[_0x404b('0x20')]['element']['remove'](),this[_0x404b('0x20')][_0x404b('0x34')]();}[_0x404b('0x17')](){const _0x38ad82=this[_0x404b('0xa')][_0x404b('0x36')](0x0);if(_0x38ad82){const _0x42e7d5=this[_0x404b('0xa')][_0x404b('0x1d')](_0x38ad82['id']);this[_0x404b('0x15')]['compare'](_0x38ad82,_0x42e7d5);}}[_0x404b('0x2f')](_0x332fd1,_0x46e433){const _0x32cee8=this[_0x404b('0xa')]['getRevision'](_0x46e433['id']),_0x512dc5=this['_revisionsRepository'][_0x404b('0x1d')](_0x32cee8['id']);this[_0x404b('0x15')][_0x404b('0x25')](_0x32cee8,_0x512dc5);}[_0x404b('0x1b')](_0x4afeba,_0xbde7cf){this[_0x404b('0xa')][_0x404b('0x36')](_0xbde7cf['id'])[_0x404b('0x14')](_0xbde7cf[_0x404b('0x2')]);}['_handleDiffChange'](_0xcfa44,_0xacf1bd,_0x2df0a0){const _0x43c3d3=this[_0x404b('0xa')][_0x404b('0x35')](_0x2df0a0);_0x43c3d3[_0x404b('0x2e')]>0x2?(this['_sidebarView'][_0x404b('0xf')](_0x43c3d3),this[_0x404b('0x20')]['selectRevision'](null)):(this[_0x404b('0x20')]['highlightRevisions']([]),this['_sidebarView']['selectRevision'](_0x43c3d3[0x0]));}['_createRevisionActions'](){const _0x328580=this[_0x404b('0x10')],_0x9e1351=w[_0x404b('0xb')],_0x19ad57=_0x328580[_0x404b('0xc')][_0x404b('0x3')]('revisionHistory.revisionActions')||w[_0x404b('0x23')];if(_0x19ad57[_0x404b('0x2e')])return _0x19ad57['map'](_0x1080de=>{const _0x255758='string'==typeof _0x1080de?Object[_0x404b('0x24')]({},_0x9e1351[_0x1080de]):_0x1080de;return _0x255758[_0x404b('0x1a')]=_0x255758[_0x404b('0x1a')][_0x404b('0x2a')](this,_0x328580),_0x255758[_0x404b('0x21')]&&(_0x255758[_0x404b('0x21')]=_0x255758[_0x404b('0x21')][_0x404b('0x2a')](this,_0x328580)),_0x255758;});}}w['availableRevisionActions']={'compareAgainstSelected':{'name':_0x404b('0x26'),'action':({plugins:_0x5f53d4},_0x207ce8)=>{const _0x411465=_0x5f53d4[_0x404b('0x3')](_0x2ecd0f),_0x302e6a=_0x411465[_0x404b('0x1c')];let _0x18de45=_0x411465[_0x404b('0x27')][_0x404b('0x11')],_0x44854a=_0x207ce8['id'];_0x302e6a[_0x404b('0x1')](_0x18de45)>_0x302e6a['getIndex'](_0x44854a)&&([_0x18de45,_0x44854a]=[_0x44854a,_0x18de45]),_0x411465[_0x404b('0x25')](_0x18de45,_0x44854a);},'isVisible':({plugins:_0x22496f},_0x372536)=>{const _0x495148=_0x22496f[_0x404b('0x3')](_0x2ecd0f);return!(_0x495148['repository'][_0x404b('0x35')](_0x495148['diff'])[_0x404b('0x2e')]>0x2)&&!_0x372536[_0x404b('0x1f')];}},'restoreRevision':{'name':_0x404b('0x19'),'action':(_0x450087,{id:_0x5f26fd})=>{_0x450087[_0x404b('0xc')][_0x404b('0x3')]('revisionHistory')[_0x404b('0x28')](_0x5f26fd);},'isVisible':({plugins:_0x4271a2},_0x3f3b71)=>!!_0x4271a2['get'](_0x2ecd0f)[_0x404b('0x1c')][_0x404b('0x33')](_0x3f3b71['id'])},'nameRevision':{'name':_0x404b('0x16'),'action':({plugins:_0x478cf2},{id:_0x182ed9,revisionNameView:_0x371331})=>{const _0xbb4fb6=_0x478cf2[_0x404b('0x3')](_0x2ecd0f),_0x1f7d50=_0xbb4fb6['repository']['getEarlierVisibleRevision'](_0x182ed9);_0xbb4fb6[_0x404b('0x25')](_0x182ed9,_0x1f7d50),_0x371331[_0x404b('0x2b')](),_0x371331[_0x404b('0x7')][_0x404b('0x13')]();}}},w[_0x404b('0x23')]=[_0x404b('0x9'),_0x404b('0xe'),'nameRevision'];