/*
 *             Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x3961=['push','data','findIndex','text','item','editor','length','getRoot','_deriveHeadingElementsFromConversion','_getActiveHeading','model','domConverter','pluginName','_getHeadingNames','getRootNames','_getOutlineDefinitions','includes','indexOf','selection','documentOutline.headings','config','change','modelElement','backward','getFirstPosition','afterInit','document','getChildren','_headingNames','init','level','name','toModel','element','fire','domToView'];(function(_0x42f4e8,_0x3961f3){const _0x348c76=function(_0x5e428c){while(--_0x5e428c){_0x42f4e8['push'](_0x42f4e8['shift']());}};_0x348c76(++_0x3961f3);}(_0x3961,0x17d));const _0x348c=function(_0x42f4e8,_0x3961f3){_0x42f4e8=_0x42f4e8-0x0;let _0x348c76=_0x3961[_0x42f4e8];return _0x348c76;};import{Plugin as _0x5b7270}from'ckeditor5/src/core';import{debounce as _0x2a5e9f}from'lodash-es';import{TreeWalker as _0x367126}from'ckeditor5/src/engine';import{getElementText as _0x3a2cda,getDefaultFeatureHeadingNames as _0x42094b}from'./utils';import{diff as _0x5ae2e2,diffToChanges as _0xc0dc95}from'ckeditor5/src/utils';export default class n extends _0x5b7270{constructor(){super(...arguments),this[_0x348c('0x7')]=[];}static get[_0x348c('0x1b')](){return'DocumentOutlineUtils';}[_0x348c('0x8')](){const _0x1ec8cd=this[_0x348c('0x14')];this[_0x348c('0x7')]=this[_0x348c('0x1c')]();let _0x283178=[];_0x1ec8cd['model']['document']['on'](_0x348c('0x0'),_0x2a5e9f(()=>{const _0x31040f=_0x283178;_0x283178=this['_getOutlineDefinitions']();const _0x2d4a81=_0x5ae2e2(_0x31040f,_0x283178,(_0x49e596,_0x5b8c95)=>_0x49e596[_0x348c('0x9')]===_0x5b8c95['level']&&_0x49e596[_0x348c('0x12')]===_0x5b8c95[_0x348c('0x12')]&&_0x49e596[_0x348c('0x1')]===_0x5b8c95[_0x348c('0x1')]),_0x18e4fc=_0xc0dc95(_0x2d4a81,_0x283178),_0x4aecb0=this['_getActiveHeading'](),_0x5cdbde=_0x283178[_0x348c('0x11')](_0x2a9e06=>_0x2a9e06['modelElement']===_0x4aecb0);_0x18e4fc[_0x348c('0x15')]&&this[_0x348c('0xd')](_0x348c('0x0'),{'outlineDefinitions':_0x283178,'activeItemIndex':_0x5cdbde,'outlineChanges':_0x18e4fc}),this[_0x348c('0xd')]('activeItemIndex',{'index':_0x5cdbde});},0xfa,{'leading':!0x0,'trailing':!0x0}));}[_0x348c('0x4')](){this[_0x348c('0x7')][_0x348c('0x15')]||this[_0x348c('0x17')]();}[_0x348c('0x1e')](){const _0x4e253b=this[_0x348c('0x14')],_0x30d769=[],_0x11c538=this[_0x348c('0x7')];for(const _0x34a4c2 of _0x4e253b[_0x348c('0x19')][_0x348c('0x5')][_0x348c('0x1d')]())_0x3b25f8(_0x4e253b['model'][_0x348c('0x5')][_0x348c('0x16')](_0x34a4c2));function _0x3b25f8(_0x29a0b9){for(const _0x2c5645 of _0x29a0b9[_0x348c('0x6')]())_0x2c5645['is']('element')&&(_0x11c538[_0x348c('0x1f')](_0x2c5645['name'])&&_0x30d769[_0x348c('0xf')]({'level':_0x11c538[_0x348c('0x20')](_0x2c5645[_0x348c('0xa')])+0x1,'text':_0x3a2cda(_0x2c5645),'modelElement':_0x2c5645}),_0x3b25f8(_0x2c5645));}return _0x30d769;}[_0x348c('0x18')](){const _0x4511f8=this[_0x348c('0x14')]['model'][_0x348c('0x5')][_0x348c('0x21')][_0x348c('0x3')](),_0x1e147a=new _0x367126({'direction':_0x348c('0x2'),'startPosition':_0x4511f8});for(const _0x45524b of _0x1e147a)if(_0x45524b['item']['is'](_0x348c('0xc'))&&this[_0x348c('0x7')]['includes'](_0x45524b['item'][_0x348c('0xa')]))return _0x45524b[_0x348c('0x13')];}[_0x348c('0x1c')](){const _0x37068d=this[_0x348c('0x14')][_0x348c('0x23')]['get'](_0x348c('0x22'));return _0x37068d||_0x42094b(this['editor']);}[_0x348c('0x17')](){const _0x22d9d0=this['editor'],_0xc7af75=['h1','h2','h3','h4','h5','h6'],_0x451617=[];for(const _0x5c9a16 of _0xc7af75){const _0x5cc89b=_0x22d9d0['editing']['view'][_0x348c('0x1a')][_0x348c('0xe')](document['createElement'](_0x5c9a16)),_0xec90bb=_0x22d9d0[_0x348c('0x10')][_0x348c('0xb')](_0x5cc89b)['getChild'](0x0);(null==_0xec90bb?void 0x0:_0xec90bb['is']('element'))&&_0x451617[_0x348c('0xf')](_0xec90bb[_0x348c('0xa')]);}this[_0x348c('0x7')]=_0x451617;}}